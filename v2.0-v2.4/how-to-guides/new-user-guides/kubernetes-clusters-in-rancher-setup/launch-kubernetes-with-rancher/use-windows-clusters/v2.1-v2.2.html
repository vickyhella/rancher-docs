<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-2.0-2.4 plugin-docs plugin-id-default docs-doc-id-how-to-guides/new-user-guides/kubernetes-clusters-in-rancher-setup/launch-kubernetes-with-rancher/use-windows-clusters/v2.1-v2.2">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<link rel="search" type="application/opensearchdescription+xml" title="Rancher Manager" href="/opensearch.xml"><title data-rh="true">v2.1.x and v2.2.x Windows Documentation (Experimental) | Rancher Manager</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://docs.ranchermanager.rancher.io//v2.0-v2.4/how-to-guides/new-user-guides/kubernetes-clusters-in-rancher-setup/launch-kubernetes-with-rancher/use-windows-clusters/v2.1-v2.2"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="2.0-2.4"><meta data-rh="true" name="docusaurus_tag" content="docs-default-2.0-2.4"><meta data-rh="true" name="docsearch:version" content="2.0-2.4"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-2.0-2.4"><meta data-rh="true" property="og:title" content="v2.1.x and v2.2.x Windows Documentation (Experimental) | Rancher Manager"><meta data-rh="true" name="description" content="Available from v2.1.0 to v2.1.9 and v2.2.0 to v2.2.3"><meta data-rh="true" property="og:description" content="Available from v2.1.0 to v2.1.9 and v2.2.0 to v2.2.3"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="http://docs.ranchermanager.rancher.io//v2.0-v2.4/how-to-guides/new-user-guides/kubernetes-clusters-in-rancher-setup/launch-kubernetes-with-rancher/use-windows-clusters/v2.1-v2.2"><link data-rh="true" rel="alternate" href="http://docs.ranchermanager.rancher.io//v2.0-v2.4/how-to-guides/new-user-guides/kubernetes-clusters-in-rancher-setup/launch-kubernetes-with-rancher/use-windows-clusters/v2.1-v2.2" hreflang="en"><link data-rh="true" rel="alternate" href="http://docs.ranchermanager.rancher.io//v2.0-v2.4/how-to-guides/new-user-guides/kubernetes-clusters-in-rancher-setup/launch-kubernetes-with-rancher/use-windows-clusters/v2.1-v2.2" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://30NEY6C9UY-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.9543bcfd.css">
<link rel="preload" href="/assets/js/runtime~main.217a7f9f.js" as="script">
<link rel="preload" href="/assets/js/main.00d8b9dc.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/rancher-logo-horiz-color.svg" alt="logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/rancher-logo-horiz-color.svg" alt="logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><div class="navbar__item dropdown dropdown--hoverable"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/v2.0-v2.4">v2.0-v2.4</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/">v2.6</a></li><li><a class="dropdown__link" href="/v2.5">v2.5</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/v2.0-v2.4/how-to-guides/new-user-guides/kubernetes-clusters-in-rancher-setup/launch-kubernetes-with-rancher/use-windows-clusters/v2.1-v2.2">v2.0-v2.4</a></li><li><a class="dropdown__link" href="/versions">All versions</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__docs navbar__link--active" href="/v2.0-v2.4">Docs</a><a href="https://github.com/rancher/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__github btn btn-secondary icon-github">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v2.0-v2.4">Rancher 2.0-2.4</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/v2.0-v2.4/getting-started">Getting Started</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/v2.0-v2.4/how-to-guides">How-to Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;How-to Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/new-user-guides">New User Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;New User Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/kubernetes-cluster-setup">Kubernetes Cluster Setup</a><button aria-label="Toggle the collapsible sidebar category &#x27;Kubernetes Cluster Setup&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/infrastructure-setup">Infrastructure Setup</a><button aria-label="Toggle the collapsible sidebar category &#x27;Infrastructure Setup&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/kubernetes-clusters-in-rancher-setup">Kubernetes Clusters in Rancher Setup</a><button aria-label="Toggle the collapsible sidebar category &#x27;Kubernetes Clusters in Rancher Setup&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/how-to-guides/new-user-guides/kubernetes-clusters-in-rancher-setup/node-requirements-for-rancher-managed-clusters">Node Requirements for Rancher Managed Clusters</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/checklist-for-production-ready-clusters">Checklist for Production-Ready Clusters</a><button aria-label="Toggle the collapsible sidebar category &#x27;Checklist for Production-Ready Clusters&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/set-up-clusters-from-hosted-kubernetes-providers">Set Up Clusters from Hosted Kubernetes Providers</a><button aria-label="Toggle the collapsible sidebar category &#x27;Set Up Clusters from Hosted Kubernetes Providers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/launch-kubernetes-with-rancher">Launch Kubernetes with Rancher</a><button aria-label="Toggle the collapsible sidebar category &#x27;Launch Kubernetes with Rancher&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/use-new-nodes-in-an-infra-provider">Use New Nodes in an Infra Provider</a><button aria-label="Toggle the collapsible sidebar category &#x27;Use New Nodes in an Infra Provider&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/use-windows-clusters">Use Windows Clusters</a><button aria-label="Toggle the collapsible sidebar category &#x27;Use Windows Clusters&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/how-to-guides/new-user-guides/kubernetes-clusters-in-rancher-setup/launch-kubernetes-with-rancher/use-windows-clusters/azure-storageclass-configuration">Configuration for Storage Classes in Azure</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/how-to-guides/new-user-guides/kubernetes-clusters-in-rancher-setup/launch-kubernetes-with-rancher/use-windows-clusters/network-requirements-for-host-gateway">Networking Requirements for Host Gateway (L2bridge)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/v2.0-v2.4/how-to-guides/new-user-guides/kubernetes-clusters-in-rancher-setup/launch-kubernetes-with-rancher/use-windows-clusters/v2.1-v2.2">v2.1.x and v2.2.x Windows Documentation (Experimental)</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/set-up-cloud-providers">Set Up Cloud Providers</a><button aria-label="Toggle the collapsible sidebar category &#x27;Set Up Cloud Providers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/how-to-guides/new-user-guides/kubernetes-clusters-in-rancher-setup/launch-kubernetes-with-rancher/about-rancher-agents">Rancher Agents</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/how-to-guides/new-user-guides/kubernetes-clusters-in-rancher-setup/import-existing-clusters">Importing Existing Clusters</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/kubernetes-resources-setup">Kubernetes Resources Setup</a><button aria-label="Toggle the collapsible sidebar category &#x27;Kubernetes Resources Setup&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/helm-charts-in-rancher">Helm Charts in Rancher</a><button aria-label="Toggle the collapsible sidebar category &#x27;Helm Charts in Rancher&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/how-to-guides/new-user-guides/deploy-apps-across-clusters">Deploying Applications across Clusters</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/backup-restore-and-disaster-recovery">Backup, Restore, and Disaster Recovery</a><button aria-label="Toggle the collapsible sidebar category &#x27;Backup, Restore, and Disaster Recovery&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/migrate-from-v1.6-v2.x">Migrating from v1.6 to v2.x</a><button aria-label="Toggle the collapsible sidebar category &#x27;Migrating from v1.6 to v2.x&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/advanced-user-guides">Advanced User Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Advanced User Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/v2.0-v2.4/reference-guides">Reference Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Reference Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/v2.0-v2.4/explanations">Explanations</a><button aria-label="Toggle the collapsible sidebar category &#x27;Explanations&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/v2.0-v2.4/faq">FAQ</a><button aria-label="Toggle the collapsible sidebar category &#x27;FAQ&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/v2.0-v2.4/troubleshooting">Troubleshooting</a><button aria-label="Toggle the collapsible sidebar category &#x27;Troubleshooting&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v2.0-v2.4/contribute-to-rancher">Contributing to Rancher</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Rancher Manager<!-- --> <b>v2.0-v2.4</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/">latest version</a></b> (<!-- -->v2.6<!-- -->).</div></div><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/v2.0-v2.4/how-to-guides"><span itemprop="name">How-to Guides</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/v2.0-v2.4/pages-for-subheaders/new-user-guides"><span itemprop="name">New User Guides</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/v2.0-v2.4/pages-for-subheaders/kubernetes-clusters-in-rancher-setup"><span itemprop="name">Kubernetes Clusters in Rancher Setup</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/v2.0-v2.4/pages-for-subheaders/launch-kubernetes-with-rancher"><span itemprop="name">Launch Kubernetes with Rancher</span></a><meta itemprop="position" content="4"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/v2.0-v2.4/pages-for-subheaders/use-windows-clusters"><span itemprop="name">Use Windows Clusters</span></a><meta itemprop="position" content="5"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">v2.1.x and v2.2.x Windows Documentation (Experimental)</span><meta itemprop="position" content="6"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v2.0-v2.4</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>v2.1.x and v2.2.x Windows Documentation (Experimental)</h1></header><p><em>Available from v2.1.0 to v2.1.9 and v2.2.0 to v2.2.3</em></p><p>This section describes how to provision Windows clusters in Rancher v2.1.x and v2.2.x. If you are using Rancher v2.3.0 or later, please refer to the new documentation for <a href="/v2.0-v2.4/pages-for-subheaders/use-windows-clusters">v2.3.0 or later</a>.</p><p>When you create a <a href="/v2.0-v2.4/pages-for-subheaders/use-existing-nodes">custom cluster</a>, Rancher uses RKE (the Rancher Kubernetes Engine) to provision the Kubernetes cluster on your existing infrastructure.</p><p>You can provision a custom Windows cluster using Rancher by using a mix of Linux and Windows hosts as your cluster nodes.</p><blockquote><p><strong>Important:</strong> In versions of Rancher before v2.3, support for Windows nodes is experimental. Therefore, it is not recommended to use Windows nodes for production environments if you are using Rancher before v2.3.</p></blockquote><p>This guide walks you through create of a custom cluster that includes three nodes:</p><ul><li>A Linux node, which serves as a Kubernetes control plane node</li><li>Another Linux node, which serves as a Kubernetes worker used to support Ingress for the cluster</li><li>A Windows node, which is assigned the Kubernetes worker role and runs your Windows containers</li></ul><p>For a summary of Kubernetes features supported in Windows, see <a href="https://kubernetes.io/docs/setup/windows/intro-windows-in-kubernetes/" target="_blank" rel="noopener noreferrer">Using Windows in Kubernetes</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="os-and-container-requirements">OS and Container Requirements<a class="hash-link" href="#os-and-container-requirements" title="Direct link to heading">​</a></h2><ul><li>For clusters provisioned with Rancher v2.1.x and v2.2.x, containers must run on Windows Server 1809 or above.</li><li>You must build containers on a Windows Server core version 1809 or above to run these containers on the same server version.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="objectives-for-creating-cluster-with-windows-support">Objectives for Creating Cluster with Windows Support<a class="hash-link" href="#objectives-for-creating-cluster-with-windows-support" title="Direct link to heading">​</a></h2><p>When setting up a custom cluster with support for Windows nodes and containers, complete the series of tasks below.</p><ul><li><a href="#1-provision-hosts">1. Provision Hosts</a></li><li><a href="#2-cloud-hosted-vm-networking-configuration">2. Cloud-host VM Networking Configuration</a></li><li><a href="#3-create-the-custom-cluster">3. Create the Custom Cluster</a></li><li><a href="#4-add-linux-host-for-ingress-support">4. Add Linux Host for Ingress Support</a></li><li><a href="#5-adding-windows-workers">5. Adding Windows Workers</a></li><li><a href="#6-cloud-hosted-vm-routes-configuration">6. Cloud-host VM Routes Configuration</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-provision-hosts">1. Provision Hosts<a class="hash-link" href="#1-provision-hosts" title="Direct link to heading">​</a></h2><p>To begin provisioning a custom cluster with Windows support, prepare your host servers. Provision three nodes according to our <a href="/v2.0-v2.4/pages-for-subheaders/installation-requirements">requirements</a>—two Linux, one Windows. Your hosts can be:</p><ul><li>Cloud-hosted VMs</li><li>VMs from virtualization clusters</li><li>Bare-metal servers</li></ul><p>The table below lists the Kubernetes node roles you&#x27;ll assign to each host, although you won&#x27;t enable these roles until further along in the configuration process—we&#x27;re just informing you of each node&#x27;s purpose. The first node, a Linux host, is primarily responsible for managing the Kubernetes control plane, although, in this use case, we&#x27;re installing all three roles on this node. Node 2 is also a Linux worker, which is responsible for Ingress support. Finally, the third node is your Windows worker, which will run your Windows applications.</p><table><thead><tr><th>Node</th><th>Operating System</th><th>Future Cluster Role(s)</th></tr></thead><tbody><tr><td>Node 1</td><td>Linux (Ubuntu Server 16.04 recommended)</td><td>Control plane, etcd, worker</td></tr><tr><td>Node 2</td><td>Linux (Ubuntu Server 16.04 recommended)</td><td>Worker (This node is used for Ingress support)</td></tr><tr><td>Node 3</td><td>Windows (Windows Server core version 1809 or above)</td><td>Worker</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">Requirements<a class="hash-link" href="#requirements" title="Direct link to heading">​</a></h3><ul><li>You can view node requirements for Linux and Windows nodes in the <a href="/v2.0-v2.4/pages-for-subheaders/installation-requirements">installation section</a>.</li><li>All nodes in a virtualization cluster or a bare metal cluster must be connected using a layer 2 network.</li><li>To support <a href="https://kubernetes.io/docs/concepts/services-networking/ingress/" target="_blank" rel="noopener noreferrer">Ingress</a>, your cluster must include at least one Linux node dedicated to the worker role.</li><li>Although we recommend the three node architecture listed in the table above, you can add additional Linux and Windows workers to scale up your cluster for redundancy.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-cloud-hosted-vm-networking-configuration">2. Cloud-hosted VM Networking Configuration<a class="hash-link" href="#2-cloud-hosted-vm-networking-configuration" title="Direct link to heading">​</a></h2><blockquote><p><strong>Note:</strong> This step only applies to nodes hosted on cloud-hosted virtual machines. If you&#x27;re using virtualization clusters or bare-metal servers, skip ahead to <a href="#3-create-the-custom-cluster">Create the Custom Cluster</a>.</p></blockquote><p>If you&#x27;re hosting your nodes on any of the cloud services listed below, you must disable the private IP address checks for both your Linux or Windows hosts on startup. To disable this check for each node, follow the directions provided by each service below.</p><table><thead><tr><th>Service</th><th>Directions to disable private IP address checks</th></tr></thead><tbody><tr><td>Amazon EC2</td><td><a href="https://docs.aws.amazon.com/vpc/latest/userguide/VPC_NAT_Instance.html#EIP_Disable_SrcDestCheck" target="_blank" rel="noopener noreferrer">Disabling Source/Destination Checks</a></td></tr><tr><td>Google GCE</td><td><a href="https://cloud.google.com/vpc/docs/using-routes#canipforward" target="_blank" rel="noopener noreferrer">Enabling IP Forwarding for Instances</a></td></tr><tr><td>Azure VM</td><td><a href="https://docs.microsoft.com/en-us/azure/virtual-network/virtual-network-network-interface#enable-or-disable-ip-forwarding" target="_blank" rel="noopener noreferrer">Enable or Disable IP Forwarding</a></td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-create-the-custom-cluster">3. Create the Custom Cluster<a class="hash-link" href="#3-create-the-custom-cluster" title="Direct link to heading">​</a></h2><p>To create a custom cluster that supports Windows nodes, follow the instructions in <a href="/v2.0-v2.4/pages-for-subheaders/use-existing-nodes">Creating a Cluster with Custom Nodes</a>, starting from 2. Create the Custom Cluster. While completing the linked instructions, look for steps that requires special actions for Windows nodes, which are flagged with a note. These notes will link back here, to the special Windows instructions listed in the subheadings below.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="enable-the-windows-support-option">Enable the Windows Support Option<a class="hash-link" href="#enable-the-windows-support-option" title="Direct link to heading">​</a></h3><p>While choosing <strong>Cluster Options</strong>, set <strong>Windows Support (Experimental)</strong> to <strong>Enabled</strong>.</p><p>After you select this option, resume <a href="/v2.0-v2.4/pages-for-subheaders/use-existing-nodes">Creating a Cluster with Custom Nodes</a> from <a href="/v2.0-v2.4/pages-for-subheaders/use-existing-nodes#step-6">step 6</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="networking-option">Networking Option<a class="hash-link" href="#networking-option" title="Direct link to heading">​</a></h3><p>When choosing a network provider for a cluster that supports Windows, the only option available is Flannel, as <a href="https://github.com/coreos/flannel/blob/master/Documentation/backends.md#host-gw" target="_blank" rel="noopener noreferrer">host-gw</a> is needed for IP routing.</p><p>If your nodes are hosted by a cloud provider and you want automation support such as load balancers or persistent storage devices, see <a href="/v2.0-v2.4/pages-for-subheaders/set-up-cloud-providers">Selecting Cloud Providers</a> for configuration info.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="node-configuration">Node Configuration<a class="hash-link" href="#node-configuration" title="Direct link to heading">​</a></h3><p>The first node in your cluster should be a Linux host that fills the Control Plane role. This role must be fulfilled before you can add Windows hosts to your cluster. At minimum, the node must have this role enabled, but we recommend enabling all three. The following table lists our recommended settings (we&#x27;ll provide the recommended settings for nodes 2 and 3 later).</p><table><thead><tr><th>Option</th><th>Setting</th></tr></thead><tbody><tr><td>Node Operating System</td><td>Linux</td></tr><tr><td>Node Roles</td><td>etcd <br> Control Plane <br> Worker</td></tr></tbody></table><p>When you&#x27;re done with these configurations, resume <a href="/v2.0-v2.4/pages-for-subheaders/use-existing-nodes">Creating a Cluster with Custom Nodes</a> from <a href="/v2.0-v2.4/pages-for-subheaders/use-existing-nodes#step-8">step 8</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-add-linux-host-for-ingress-support">4. Add Linux Host for Ingress Support<a class="hash-link" href="#4-add-linux-host-for-ingress-support" title="Direct link to heading">​</a></h2><p>After the initial provisioning of your custom cluster, your cluster only has a single Linux host. Add another Linux host, which will be used to support Ingress for your cluster.</p><ol><li><p>Using the content menu, open the custom cluster your created in <a href="#3-create-the-custom-cluster">2. Create the Custom Cluster</a>.</p></li><li><p>From the main menu, select <strong>Nodes</strong>.</p></li><li><p>Click <strong>Edit Cluster</strong>.</p></li><li><p>Scroll down to <strong>Node Operating System</strong>. Choose <strong>Linux</strong>.</p></li><li><p>Select the <strong>Worker</strong> role.</p></li><li><p>Copy the command displayed on screen to your clipboard.</p></li><li><p>Log in to your Linux host using a remote Terminal connection. Run the command copied to your clipboard.</p></li><li><p>From <strong>Rancher</strong>, click <strong>Save</strong>.</p></li></ol><p><strong>Result:</strong> The worker role is installed on your Linux host, and the node registers with Rancher.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-adding-windows-workers">5. Adding Windows Workers<a class="hash-link" href="#5-adding-windows-workers" title="Direct link to heading">​</a></h2><p>You can add Windows hosts to a custom cluster by editing the cluster and choosing the <strong>Windows</strong> option.</p><ol><li><p>From the main menu, select <strong>Nodes</strong>.</p></li><li><p>Click <strong>Edit Cluster</strong>.</p></li><li><p>Scroll down to <strong>Node Operating System</strong>. Choose <strong>Windows</strong>.</p></li><li><p>Select the <strong>Worker</strong> role.</p></li><li><p>Copy the command displayed on screen to your clipboard.</p></li><li><p>Log in to your Windows host using your preferred tool, such as <a href="https://docs.microsoft.com/en-us/windows-server/remote/remote-desktop-services/clients/remote-desktop-clients" target="_blank" rel="noopener noreferrer">Microsoft Remote Desktop</a>. Run the command copied to your clipboard in the <strong>Command Prompt (CMD)</strong>.</p></li><li><p>From Rancher, click <strong>Save</strong>.</p></li><li><p><strong>Optional:</strong> Repeat these instruction if you want to add more Windows nodes to your cluster.</p></li></ol><p><strong>Result:</strong> The worker role is installed on your Windows host, and the node registers with Rancher.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-cloud-hosted-vm-routes-configuration">6. Cloud-hosted VM Routes Configuration<a class="hash-link" href="#6-cloud-hosted-vm-routes-configuration" title="Direct link to heading">​</a></h2><p>In Windows clusters, containers communicate with each other using the <code>host-gw</code> mode of Flannel. In <code>host-gw</code> mode, all containers on the same node belong to a private subnet, and traffic routes from a subnet on one node to a subnet on another node through the host network.</p><ul><li><p>When worker nodes are provisioned on AWS, virtualization clusters, or bare metal servers, make sure they belong to the same layer 2 subnet. If the nodes don&#x27;t belong to the same layer 2 subnet, <code>host-gw</code> networking will not work.</p></li><li><p>When worker nodes are provisioned on GCE or Azure, they are not on the same layer 2 subnet. Nodes on GCE and Azure belong to a routable layer 3 network. Follow the instructions below to configure GCE and Azure so that the cloud network knows how to route the host subnets on each node.</p></li></ul><p>To configure host subnet routing on GCE or Azure, first run the following command to find out the host subnets on each worker node:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get nodes -o custom-columns</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">nodeName:.metadata.name,nodeIP:status.addresses</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">.address,routeDestination:.spec.podCIDR</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then follow the instructions for each cloud provider to configure routing rules for each node:</p><table><thead><tr><th>Service</th><th>Instructions</th></tr></thead><tbody><tr><td>Google GCE</td><td>For GCE, add a static route for each node: <a href="https://cloud.google.com/vpc/docs/using-routes#addingroute" target="_blank" rel="noopener noreferrer">Adding a Static Route</a>.</td></tr><tr><td>Azure VM</td><td>For Azure, create a routing table: <a href="https://docs.microsoft.com/en-us/azure/virtual-network/virtual-networks-udr-overview#user-defined" target="_blank" rel="noopener noreferrer">Custom Routes: User-defined</a>.</td></tr></tbody></table><p><code> </code></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/rancher/rancher-docs/edit/main/versioned_docs/version-2.0-2.4/how-to-guides/new-user-guides/kubernetes-clusters-in-rancher-setup/launch-kubernetes-with-rancher/use-windows-clusters/v2.1-v2.2.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_eYIM" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vbeJ"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-09-08T22:35:34.000Z">9/8/2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/v2.0-v2.4/how-to-guides/new-user-guides/kubernetes-clusters-in-rancher-setup/launch-kubernetes-with-rancher/use-windows-clusters/network-requirements-for-host-gateway"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Networking Requirements for Host Gateway (L2bridge)</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/v2.0-v2.4/pages-for-subheaders/set-up-cloud-providers"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Setting up Cloud Providers</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#os-and-container-requirements" class="table-of-contents__link toc-highlight">OS and Container Requirements</a></li><li><a href="#objectives-for-creating-cluster-with-windows-support" class="table-of-contents__link toc-highlight">Objectives for Creating Cluster with Windows Support</a></li><li><a href="#1-provision-hosts" class="table-of-contents__link toc-highlight">1. Provision Hosts</a><ul><li><a href="#requirements" class="table-of-contents__link toc-highlight">Requirements</a></li></ul></li><li><a href="#2-cloud-hosted-vm-networking-configuration" class="table-of-contents__link toc-highlight">2. Cloud-hosted VM Networking Configuration</a></li><li><a href="#3-create-the-custom-cluster" class="table-of-contents__link toc-highlight">3. Create the Custom Cluster</a><ul><li><a href="#enable-the-windows-support-option" class="table-of-contents__link toc-highlight">Enable the Windows Support Option</a></li><li><a href="#networking-option" class="table-of-contents__link toc-highlight">Networking Option</a></li><li><a href="#node-configuration" class="table-of-contents__link toc-highlight">Node Configuration</a></li></ul></li><li><a href="#4-add-linux-host-for-ingress-support" class="table-of-contents__link toc-highlight">4. Add Linux Host for Ingress Support</a></li><li><a href="#5-adding-windows-workers" class="table-of-contents__link toc-highlight">5. Adding Windows Workers</a></li><li><a href="#6-cloud-hosted-vm-routes-configuration" class="table-of-contents__link toc-highlight">6. Cloud-hosted VM Routes Configuration</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 SUSE Rancher. All Rights Reserved.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.217a7f9f.js"></script>
<script src="/assets/js/main.00d8b9dc.js"></script>
</body>
</html>