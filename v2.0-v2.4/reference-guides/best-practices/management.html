<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-2.0-2.4 plugin-docs plugin-id-default docs-doc-id-reference-guides/best-practices/management">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<link rel="search" type="application/opensearchdescription+xml" title="Rancher Manager" href="/opensearch.xml"><title data-rh="true">Tips for Scaling, Security and Reliability | Rancher Manager</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://docs.ranchermanager.rancher.io//v2.0-v2.4/reference-guides/best-practices/management"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="2.0-2.4"><meta data-rh="true" name="docusaurus_tag" content="docs-default-2.0-2.4"><meta data-rh="true" name="docsearch:version" content="2.0-2.4"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-2.0-2.4"><meta data-rh="true" property="og:title" content="Tips for Scaling, Security and Reliability | Rancher Manager"><meta data-rh="true" name="description" content="Rancher allows you to set up numerous combinations of configurations. Some configurations are more appropriate for development and testing, while there are other best practices for production environments for maximum availability and fault tolerance. The following best practices should be followed for production."><meta data-rh="true" property="og:description" content="Rancher allows you to set up numerous combinations of configurations. Some configurations are more appropriate for development and testing, while there are other best practices for production environments for maximum availability and fault tolerance. The following best practices should be followed for production."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="http://docs.ranchermanager.rancher.io//v2.0-v2.4/reference-guides/best-practices/management"><link data-rh="true" rel="alternate" href="http://docs.ranchermanager.rancher.io//v2.0-v2.4/reference-guides/best-practices/management" hreflang="en"><link data-rh="true" rel="alternate" href="http://docs.ranchermanager.rancher.io//v2.0-v2.4/reference-guides/best-practices/management" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://30NEY6C9UY-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.9543bcfd.css">
<link rel="preload" href="/assets/js/runtime~main.217a7f9f.js" as="script">
<link rel="preload" href="/assets/js/main.00d8b9dc.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/rancher-logo-horiz-color.svg" alt="logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/rancher-logo-horiz-color.svg" alt="logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><div class="navbar__item dropdown dropdown--hoverable"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/v2.0-v2.4">v2.0-v2.4</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/">v2.6</a></li><li><a class="dropdown__link" href="/v2.5">v2.5</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/v2.0-v2.4/reference-guides/best-practices/management">v2.0-v2.4</a></li><li><a class="dropdown__link" href="/versions">All versions</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__docs navbar__link--active" href="/v2.0-v2.4">Docs</a><a href="https://github.com/rancher/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__github btn btn-secondary icon-github">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v2.0-v2.4">Rancher 2.0-2.4</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/v2.0-v2.4/getting-started">Getting Started</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/v2.0-v2.4/how-to-guides">How-to Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;How-to Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/v2.0-v2.4/reference-guides">Reference Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Reference Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/best-practices">Best Practices</a><button aria-label="Toggle the collapsible sidebar category &#x27;Best Practices&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/reference-guides/best-practices/containers">Tips for Setting Up Containers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/reference-guides/best-practices/deployment-strategies">Rancher Deployment Strategies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/reference-guides/best-practices/deployment-types">Tips for Running Rancher</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/v2.0-v2.4/reference-guides/best-practices/management">Tips for Scaling, Security and Reliability</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/rancher-manager-architecture">Rancher Manager Architecture</a><button aria-label="Toggle the collapsible sidebar category &#x27;Rancher Manager Architecture&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/cluster-configuration">Cluster Configuration</a><button aria-label="Toggle the collapsible sidebar category &#x27;Cluster Configuration&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/single-node-rancher-in-docker">Single-Node Rancher in Docker</a><button aria-label="Toggle the collapsible sidebar category &#x27;Single-Node Rancher in Docker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/installation-references">Installation References</a><button aria-label="Toggle the collapsible sidebar category &#x27;Installation References&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/reference-guides/installation-references/amazon-eks-permissions">Creating an EKS Cluster</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/configure-openldap">Configure OpenLDAP</a><button aria-label="Toggle the collapsible sidebar category &#x27;Configure OpenLDAP&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/reference-guides/kubernetes-concepts">Kubernetes Concepts</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/user-settings">User Settings</a><button aria-label="Toggle the collapsible sidebar category &#x27;User Settings&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/cli-with-rancher">CLI with Rancher</a><button aria-label="Toggle the collapsible sidebar category &#x27;CLI with Rancher&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/about-the-api">About the API</a><button aria-label="Toggle the collapsible sidebar category &#x27;About the API&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/reference-guides/rancher-cluster-tools">Tools for Logging, Monitoring, and More</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/project-tools">Project Tools</a><button aria-label="Toggle the collapsible sidebar category &#x27;Project Tools&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/reference-guides/system-tools">System Tools</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/reference-guides/rke1-template-example-yaml">Example YAML</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/pipelines">Pipelines</a><button aria-label="Toggle the collapsible sidebar category &#x27;Pipelines&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/rancher-security">Rancher Security</a><button aria-label="Toggle the collapsible sidebar category &#x27;Rancher Security&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/reference-guides/v1.6-migration/migration-tools-cli-reference">Migration Tools CLI Reference</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/v2.0-v2.4/explanations">Explanations</a><button aria-label="Toggle the collapsible sidebar category &#x27;Explanations&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/v2.0-v2.4/faq">FAQ</a><button aria-label="Toggle the collapsible sidebar category &#x27;FAQ&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/v2.0-v2.4/troubleshooting">Troubleshooting</a><button aria-label="Toggle the collapsible sidebar category &#x27;Troubleshooting&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v2.0-v2.4/contribute-to-rancher">Contributing to Rancher</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Rancher Manager<!-- --> <b>v2.0-v2.4</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/">latest version</a></b> (<!-- -->v2.6<!-- -->).</div></div><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/v2.0-v2.4/reference-guides"><span itemprop="name">Reference Guides</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/v2.0-v2.4/pages-for-subheaders/best-practices"><span itemprop="name">Best Practices</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Tips for Scaling, Security and Reliability</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v2.0-v2.4</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Tips for Scaling, Security and Reliability</h1></header><p>Rancher allows you to set up numerous combinations of configurations. Some configurations are more appropriate for development and testing, while there are other best practices for production environments for maximum availability and fault tolerance. The following best practices should be followed for production.</p><ul><li><a href="#tips-for-preventing-and-handling-problems">Tips for Preventing and Handling Problems</a></li><li><a href="#network-topology">Network Topology</a></li><li><a href="#tips-for-scaling-and-reliability">Tips for Scaling and Reliability</a></li><li><a href="#tips-for-security">Tips for Security</a></li><li><a href="#tips-for-multi-tenant-clusters">Tips for Multi-Tenant Clusters</a></li><li><a href="#class-of-service-and-kubernetes-clusters">Class of Service and Kubernetes Clusters</a></li><li><a href="#network-security">Network Security</a></li></ul><h1>Tips for Preventing and Handling Problems</h1><p>These tips can help you solve problems before they happen.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="run-rancher-on-a-supported-os-and-supported-docker-version">Run Rancher on a Supported OS and Supported Docker Version<a class="hash-link" href="#run-rancher-on-a-supported-os-and-supported-docker-version" title="Direct link to heading">​</a></h3><p>Rancher is container-based and can potentially run on any Linux-based operating system. However, only operating systems listed in the <a href="/v2.0-v2.4/pages-for-subheaders/installation-requirements">requirements documentation</a> should be used for running Rancher, along with a supported version of Docker. These versions have been most thoroughly tested and can be properly supported by the Rancher Support team.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade-your-kubernetes-version">Upgrade Your Kubernetes Version<a class="hash-link" href="#upgrade-your-kubernetes-version" title="Direct link to heading">​</a></h3><p>Keep your Kubernetes cluster up to date with a recent and supported version. Typically the Kubernetes community will support the current version and previous three minor releases (for example, 1.14.x, 1.13.x, 1.12.x, and 1.11.x). After a new version is released, the third-oldest supported version reaches EOL (End of Life) status. Running on an EOL release can be a risk if a security issues are found and patches are not available. The community typically makes minor releases every quarter (every three months).</p><p>Rancher’s SLAs are not community dependent, but as Kubernetes is a community-driven software, the quality of experience will degrade as you get farther away from the community&#x27;s supported target.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kill-pods-randomly-during-testing">Kill Pods Randomly During Testing<a class="hash-link" href="#kill-pods-randomly-during-testing" title="Direct link to heading">​</a></h3><p>Run chaoskube or a similar mechanism to randomly kill pods in your test environment. This will test the resiliency of your infrastructure and the ability of Kubernetes to self-heal. It&#x27;s not recommended to run this in your production environment.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deploy-complicated-clusters-with-terraform">Deploy Complicated Clusters with Terraform<a class="hash-link" href="#deploy-complicated-clusters-with-terraform" title="Direct link to heading">​</a></h3><p>Rancher&#x27;s &quot;Add Cluster&quot; UI is preferable for getting started with Kubernetes cluster orchestration or for simple use cases. However, for more complex or demanding use cases, it is recommended to use a CLI/API driven approach. <a href="https://www.terraform.io/" target="_blank" rel="noopener noreferrer">Terraform</a> is recommended as the tooling to implement this. When you use Terraform with version control and a CI/CD environment, you can have high assurances of consistency and reliability when deploying Kubernetes clusters. This approach also gives you the most customization options.</p><p>Rancher <a href="https://rancher.com/blog/2019/rancher-2-terraform-provider/" target="_blank" rel="noopener noreferrer">maintains a Terraform provider</a> for working with Rancher 2.0 Kubernetes. It is called the <a href="https://www.terraform.io/docs/providers/rancher2/index.html" target="_blank" rel="noopener noreferrer">Rancher2 Provider.</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade-rancher-in-a-staging-environment">Upgrade Rancher in a Staging Environment<a class="hash-link" href="#upgrade-rancher-in-a-staging-environment" title="Direct link to heading">​</a></h3><p>All upgrades, both patch and feature upgrades, should be first tested on a staging environment before production is upgraded. The more closely the staging environment mirrors production, the higher chance your production upgrade will be successful.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="renew-certificates-before-they-expire">Renew Certificates Before they Expire<a class="hash-link" href="#renew-certificates-before-they-expire" title="Direct link to heading">​</a></h3><p>Multiple people in your organization should set up calendar reminders for certificate renewal. Consider renewing the certificate two weeks to one month in advance. If you have multiple certificates to track, consider using <a href="/v2.0-v2.4/reference-guides/rancher-cluster-tools">monitoring and alerting mechanisms</a> to track certificate expiration.</p><p>Rancher-provisioned Kubernetes clusters will use certificates that expire in one year. Clusters provisioned by other means may have a longer or shorter expiration.</p><p>Certificates can be renewed for Rancher-provisioned clusters <a href="/v2.0-v2.4/how-to-guides/advanced-user-guides/manage-clusters/rotate-certificates">through the Rancher user interface</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="enable-recurring-snapshots-for-backing-up-and-restoring-the-cluster">Enable Recurring Snapshots for Backing up and Restoring the Cluster<a class="hash-link" href="#enable-recurring-snapshots-for-backing-up-and-restoring-the-cluster" title="Direct link to heading">​</a></h3><p>Make sure etcd recurring snapshots are enabled. Extend the snapshot retention to a period of time that meets your business needs. In the event of a catastrophic failure or deletion of data, this may be your only recourse for recovery. For details about configuring snapshots, refer to the <a href="https://rancher.com/docs/rke/latest/en/etcd-snapshots/" target="_blank" rel="noopener noreferrer">RKE documentation</a> or the <a href="/v2.0-v2.4/pages-for-subheaders/backup-restore-and-disaster-recovery">Rancher documentation on backups</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="provision-clusters-with-rancher">Provision Clusters with Rancher<a class="hash-link" href="#provision-clusters-with-rancher" title="Direct link to heading">​</a></h3><p>When possible, use Rancher to provision your Kubernetes cluster rather than importing a cluster. This will ensure the best compatibility and supportability.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-stable-and-supported-rancher-versions-for-production">Use Stable and Supported Rancher Versions for Production<a class="hash-link" href="#use-stable-and-supported-rancher-versions-for-production" title="Direct link to heading">​</a></h3><p>Do not upgrade production environments to alpha, beta, release candidate (rc), or &quot;latest&quot; versions. These early releases are often not stable and may not have a future upgrade path.</p><p>When installing or upgrading a non-production environment to an early release, anticipate problems such as features not working, data loss, outages, and inability to upgrade without a reinstall.</p><p>Make sure the feature version you are upgrading to is considered &quot;stable&quot; as determined by Rancher. Use the beta, release candidate, and &quot;latest&quot; versions in a testing, development, or demo environment to try out new features. Feature version upgrades, for example 2.1.x to 2.2.x, should be considered as and when they are released. Some bug fixes and most features are not back ported into older versions.</p><p>Keep in mind that Rancher does End of Life support for old versions, so you will eventually want to upgrade if you want to continue to receive patches.</p><p>For more detail on what happens during the Rancher product lifecycle, refer to the <a href="https://rancher.com/support-maintenance-terms/" target="_blank" rel="noopener noreferrer">Support Maintenance Terms</a>.</p><h1>Network Topology</h1><p>These tips can help Rancher work more smoothly with your network.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-low-latency-networks-for-communication-within-clusters">Use Low-latency Networks for Communication Within Clusters<a class="hash-link" href="#use-low-latency-networks-for-communication-within-clusters" title="Direct link to heading">​</a></h3><p>Kubernetes clusters are best served by low-latency networks. This is especially true for the control plane components and etcd, where lots of coordination and leader election traffic occurs. Networking between Rancher server and the Kubernetes clusters it manages are more tolerant of latency.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="allow-rancher-to-communicate-directly-with-clusters">Allow Rancher to Communicate Directly with Clusters<a class="hash-link" href="#allow-rancher-to-communicate-directly-with-clusters" title="Direct link to heading">​</a></h3><p>Limit the use of proxies or load balancers between Rancher server and Kubernetes clusters. As Rancher is maintaining a long-lived web sockets connection, these intermediaries can interfere with the connection lifecycle as they often weren&#x27;t configured with this use case in mind.</p><h1>Tips for Scaling and Reliability</h1><p>These tips can help you scale your cluster more easily.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-one-kubernetes-role-per-host">Use One Kubernetes Role Per Host<a class="hash-link" href="#use-one-kubernetes-role-per-host" title="Direct link to heading">​</a></h3><p>Separate the etcd, control plane, and worker roles onto different hosts. Don&#x27;t assign multiple roles to the same host, such as a worker and control plane. This will give you maximum scalability.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="run-the-control-plane-and-etcd-on-virtual-machines">Run the Control Plane and etcd on Virtual Machines<a class="hash-link" href="#run-the-control-plane-and-etcd-on-virtual-machines" title="Direct link to heading">​</a></h3><p>Run your etcd and control plane nodes on virtual machines where you can scale vCPU and memory easily if needed in the future.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-at-least-three-etcd-nodes">Use at Least Three etcd Nodes<a class="hash-link" href="#use-at-least-three-etcd-nodes" title="Direct link to heading">​</a></h3><p>Provision 3 or 5 etcd nodes. Etcd requires a quorum to determine a leader by the majority of nodes, therefore it is not recommended to have clusters of even numbers. Three etcd nodes is generally sufficient for smaller clusters and five etcd nodes for large clusters.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-at-least-three-control-plane-nodes">Use at Least Three Control Plane Nodes<a class="hash-link" href="#use-at-least-three-control-plane-nodes" title="Direct link to heading">​</a></h3><p>Provision three or more control plane nodes. Some control plane components, such as the <code>kube-apiserver</code>, run in <a href="https://www.jscape.com/blog/active-active-vs-active-passive-high-availability-cluster" target="_blank" rel="noopener noreferrer">active-active</a> mode and will give you more scalability. Other components such as kube-scheduler and kube-controller run in active-passive mode (leader elect) and give you more fault tolerance.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="monitor-your-cluster">Monitor Your Cluster<a class="hash-link" href="#monitor-your-cluster" title="Direct link to heading">​</a></h3><p>Closely monitor and scale your nodes as needed. You should <a href="/v2.0-v2.4/pages-for-subheaders/cluster-monitoring">enable cluster monitoring</a> and use the Prometheus metrics and Grafana visualization options as a starting point.</p><h1>Tips for Security</h1><p>Below are some basic tips for increasing security in Rancher. For more detailed information about securing your cluster, you can refer to these resources:</p><ul><li>Rancher&#x27;s <a href="/v2.0-v2.4/pages-for-subheaders/rancher-security">security documentation and Kubernetes cluster hardening guide</a></li><li><a href="https://rancher.com/blog/2019/2019-01-17-101-more-kubernetes-security-best-practices/" target="_blank" rel="noopener noreferrer">101 More Security Best Practices for Kubernetes</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="update-rancher-with-security-patches">Update Rancher with Security Patches<a class="hash-link" href="#update-rancher-with-security-patches" title="Direct link to heading">​</a></h3><p>Keep your Rancher installation up to date with the latest patches. Patch updates have important software fixes and sometimes have security fixes. When patches with security fixes are released, customers with Rancher licenses are notified by e-mail. These updates are also posted on Rancher&#x27;s <a href="https://forums.rancher.com/" target="_blank" rel="noopener noreferrer">forum</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="report-security-issues-directly-to-rancher">Report Security Issues Directly to Rancher<a class="hash-link" href="#report-security-issues-directly-to-rancher" title="Direct link to heading">​</a></h3><p>If you believe you have uncovered a security-related problem in Rancher, please communicate this immediately and discretely to the Rancher team (<a href="mailto:security@rancher.com" target="_blank" rel="noopener noreferrer">security@rancher.com</a>). Posting security issues on public forums such as Twitter, Rancher Slack, GitHub, etc. can potentially compromise security for all Rancher customers. Reporting security issues discretely allows Rancher to assess and mitigate the problem. Security patches are typically given high priority and released as quickly as possible.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="only-upgrade-one-component-at-a-time">Only Upgrade One Component at a Time<a class="hash-link" href="#only-upgrade-one-component-at-a-time" title="Direct link to heading">​</a></h3><p>In addition to Rancher software updates, closely monitor security fixes for related software, such as Docker, Linux, and any libraries used by your workloads. For production environments, try to avoid upgrading too many entities during a single maintenance window. Upgrading multiple components can make it difficult to root cause an issue in the event of a failure. As business requirements allow, upgrade one component at a time.</p><h1>Tips for Multi-Tenant Clusters</h1><h3 class="anchor anchorWithStickyNavbar_LWe7" id="namespaces">Namespaces<a class="hash-link" href="#namespaces" title="Direct link to heading">​</a></h3><p>Each tenant should have their own unique namespaces within the cluster. This avoids naming conflicts and allows resources to be only visible to their owner through use of RBAC policy</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="project-isolation">Project Isolation<a class="hash-link" href="#project-isolation" title="Direct link to heading">​</a></h3><p>Use Rancher&#x27;s Project Isolation to automatically generate Network Policy between Projects (sets of Namespaces). This further protects workloads from interference</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="resource-limits">Resource Limits<a class="hash-link" href="#resource-limits" title="Direct link to heading">​</a></h3><p>Enforce use of sane resource limit definitions for every deployment in your cluster. This not only protects the owners of the deployment, but the neighboring resources from other tenants as well. Remember, namespaces do not isolate at the node level, so over-consumption of resources on a node affects other namespace deployments. Admission controllers can be written to require resource limit definitions</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="resource-requirements">Resource Requirements<a class="hash-link" href="#resource-requirements" title="Direct link to heading">​</a></h3><p>Enforce use of resource requirement definitions for each deployment in your cluster. This enables the scheduler to appropriately schedule workloads. Otherwise you will eventually end up with over-provisioned nodes.</p><h1>Class of Service and Kubernetes Clusters</h1><p>A class of service describes the expectations around cluster uptime, durability, and duration of maintenance windows. Typically organizations group these characteristics into labels such as &quot;dev&quot; or &quot;prod&quot;</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="consider-fault-domains">Consider fault domains<a class="hash-link" href="#consider-fault-domains" title="Direct link to heading">​</a></h3><p>Kubernetes clusters can span multiple classes of service, however it is important to consider the ability for one workload to affect another. Without proper deployment practices such as resource limits, requirements, etc, a deployment that is not behaving well has the potential to impact the health of the cluster. In a &quot;dev&quot; environment it is common for end-users to exercise less caution with deployments, thus increasing the chance of such behavior. Sharing this behavior with your production workload increases risk.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade-risks">Upgrade risks<a class="hash-link" href="#upgrade-risks" title="Direct link to heading">​</a></h3><p>Upgrades of Kubernetes are not without risk, the best way to predict the outcome of an upgrade is try it on a cluster of similar load and use case as your production cluster. This is where having non-prod class of service clusters can be advantageous.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="resource-efficiency">Resource Efficiency<a class="hash-link" href="#resource-efficiency" title="Direct link to heading">​</a></h3><p>Clusters can be built with varying degrees of redundancy. In a class of service with low expectations for uptime, resources and cost can be conserved by building clusters without redundant Kubernetes control components. This approach may also free up more budget/resources to increase the redundancy at the production level</p><h1>Network Security</h1><p>In general, you can use network security best practices in your Rancher and Kubernetes clusters. Consider the following:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-a-firewall-between-your-hosts-and-the-internet">Use a Firewall Between your Hosts and the Internet<a class="hash-link" href="#use-a-firewall-between-your-hosts-and-the-internet" title="Direct link to heading">​</a></h3><p>Firewalls should be used between your hosts and the Internet (or corporate Intranet). This could be enterprise firewall appliances in a datacenter or SDN constructs in the cloud, such as VPCs, security groups, ingress, and egress rules. Try to limit inbound access only to ports and IP addresses that require it. Outbound access can be shut off (air gap) if environment sensitive information that requires this restriction. If available, use firewalls with intrusion detection and DDoS prevention.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="run-periodic-security-scans">Run Periodic Security Scans<a class="hash-link" href="#run-periodic-security-scans" title="Direct link to heading">​</a></h3><p>Run security and penetration scans on your environment periodically. Even with well design infrastructure, a poorly designed microservice could compromise the entire environment.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/rancher/rancher-docs/edit/main/versioned_docs/version-2.0-2.4/reference-guides/best-practices/management.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_eYIM" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vbeJ"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-09-08T22:35:34.000Z">9/8/2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/v2.0-v2.4/reference-guides/best-practices/deployment-types"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Tips for Running Rancher</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/v2.0-v2.4/pages-for-subheaders/rancher-manager-architecture"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Architecture</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#run-rancher-on-a-supported-os-and-supported-docker-version" class="table-of-contents__link toc-highlight">Run Rancher on a Supported OS and Supported Docker Version</a></li><li><a href="#upgrade-your-kubernetes-version" class="table-of-contents__link toc-highlight">Upgrade Your Kubernetes Version</a></li><li><a href="#kill-pods-randomly-during-testing" class="table-of-contents__link toc-highlight">Kill Pods Randomly During Testing</a></li><li><a href="#deploy-complicated-clusters-with-terraform" class="table-of-contents__link toc-highlight">Deploy Complicated Clusters with Terraform</a></li><li><a href="#upgrade-rancher-in-a-staging-environment" class="table-of-contents__link toc-highlight">Upgrade Rancher in a Staging Environment</a></li><li><a href="#renew-certificates-before-they-expire" class="table-of-contents__link toc-highlight">Renew Certificates Before they Expire</a></li><li><a href="#enable-recurring-snapshots-for-backing-up-and-restoring-the-cluster" class="table-of-contents__link toc-highlight">Enable Recurring Snapshots for Backing up and Restoring the Cluster</a></li><li><a href="#provision-clusters-with-rancher" class="table-of-contents__link toc-highlight">Provision Clusters with Rancher</a></li><li><a href="#use-stable-and-supported-rancher-versions-for-production" class="table-of-contents__link toc-highlight">Use Stable and Supported Rancher Versions for Production</a></li><li><a href="#use-low-latency-networks-for-communication-within-clusters" class="table-of-contents__link toc-highlight">Use Low-latency Networks for Communication Within Clusters</a></li><li><a href="#allow-rancher-to-communicate-directly-with-clusters" class="table-of-contents__link toc-highlight">Allow Rancher to Communicate Directly with Clusters</a></li><li><a href="#use-one-kubernetes-role-per-host" class="table-of-contents__link toc-highlight">Use One Kubernetes Role Per Host</a></li><li><a href="#run-the-control-plane-and-etcd-on-virtual-machines" class="table-of-contents__link toc-highlight">Run the Control Plane and etcd on Virtual Machines</a></li><li><a href="#use-at-least-three-etcd-nodes" class="table-of-contents__link toc-highlight">Use at Least Three etcd Nodes</a></li><li><a href="#use-at-least-three-control-plane-nodes" class="table-of-contents__link toc-highlight">Use at Least Three Control Plane Nodes</a></li><li><a href="#monitor-your-cluster" class="table-of-contents__link toc-highlight">Monitor Your Cluster</a></li><li><a href="#update-rancher-with-security-patches" class="table-of-contents__link toc-highlight">Update Rancher with Security Patches</a></li><li><a href="#report-security-issues-directly-to-rancher" class="table-of-contents__link toc-highlight">Report Security Issues Directly to Rancher</a></li><li><a href="#only-upgrade-one-component-at-a-time" class="table-of-contents__link toc-highlight">Only Upgrade One Component at a Time</a></li><li><a href="#namespaces" class="table-of-contents__link toc-highlight">Namespaces</a></li><li><a href="#project-isolation" class="table-of-contents__link toc-highlight">Project Isolation</a></li><li><a href="#resource-limits" class="table-of-contents__link toc-highlight">Resource Limits</a></li><li><a href="#resource-requirements" class="table-of-contents__link toc-highlight">Resource Requirements</a></li><li><a href="#consider-fault-domains" class="table-of-contents__link toc-highlight">Consider fault domains</a></li><li><a href="#upgrade-risks" class="table-of-contents__link toc-highlight">Upgrade risks</a></li><li><a href="#resource-efficiency" class="table-of-contents__link toc-highlight">Resource Efficiency</a></li><li><a href="#use-a-firewall-between-your-hosts-and-the-internet" class="table-of-contents__link toc-highlight">Use a Firewall Between your Hosts and the Internet</a></li><li><a href="#run-periodic-security-scans" class="table-of-contents__link toc-highlight">Run Periodic Security Scans</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 SUSE Rancher. All Rights Reserved.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.217a7f9f.js"></script>
<script src="/assets/js/main.00d8b9dc.js"></script>
</body>
</html>