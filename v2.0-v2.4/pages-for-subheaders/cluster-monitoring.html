<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-2.0-2.4 plugin-docs plugin-id-default docs-doc-id-pages-for-subheaders/cluster-monitoring">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<link rel="search" type="application/opensearchdescription+xml" title="Rancher Manager" href="/opensearch.xml"><title data-rh="true">Integrating Rancher and Prometheus for Cluster Monitoring | Rancher Manager</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://docs.ranchermanager.rancher.io//v2.0-v2.4/pages-for-subheaders/cluster-monitoring"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="2.0-2.4"><meta data-rh="true" name="docusaurus_tag" content="docs-default-2.0-2.4"><meta data-rh="true" name="docsearch:version" content="2.0-2.4"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-2.0-2.4"><meta data-rh="true" property="og:title" content="Integrating Rancher and Prometheus for Cluster Monitoring | Rancher Manager"><meta data-rh="true" name="description" content="Prometheus lets you view metrics from your different Rancher and Kubernetes objects. Learn about the scope of monitoring and how to enable cluster monitoring"><meta data-rh="true" property="og:description" content="Prometheus lets you view metrics from your different Rancher and Kubernetes objects. Learn about the scope of monitoring and how to enable cluster monitoring"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="http://docs.ranchermanager.rancher.io//v2.0-v2.4/pages-for-subheaders/cluster-monitoring"><link data-rh="true" rel="alternate" href="http://docs.ranchermanager.rancher.io//v2.0-v2.4/pages-for-subheaders/cluster-monitoring" hreflang="en"><link data-rh="true" rel="alternate" href="http://docs.ranchermanager.rancher.io//v2.0-v2.4/pages-for-subheaders/cluster-monitoring" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://30NEY6C9UY-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.9543bcfd.css">
<link rel="preload" href="/assets/js/runtime~main.217a7f9f.js" as="script">
<link rel="preload" href="/assets/js/main.00d8b9dc.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/rancher-logo-horiz-color.svg" alt="logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/rancher-logo-horiz-color.svg" alt="logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><div class="navbar__item dropdown dropdown--hoverable"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/v2.0-v2.4">v2.0-v2.4</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/">v2.6</a></li><li><a class="dropdown__link" href="/v2.5">v2.5</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/v2.0-v2.4/pages-for-subheaders/cluster-monitoring">v2.0-v2.4</a></li><li><a class="dropdown__link" href="/versions">All versions</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__docs navbar__link--active" href="/v2.0-v2.4">Docs</a><a href="https://github.com/rancher/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__github btn btn-secondary icon-github">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v2.0-v2.4">Rancher 2.0-2.4</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/v2.0-v2.4/getting-started">Getting Started</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/v2.0-v2.4/how-to-guides">How-to Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;How-to Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/v2.0-v2.4/reference-guides">Reference Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Reference Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/v2.0-v2.4/explanations">Explanations</a><button aria-label="Toggle the collapsible sidebar category &#x27;Explanations&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/integrations-in-rancher">Integrations in Rancher</a><button aria-label="Toggle the collapsible sidebar category &#x27;Integrations in Rancher&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/cis-scans">CIS Scans</a><button aria-label="Toggle the collapsible sidebar category &#x27;CIS Scans&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/istio">Istio</a><button aria-label="Toggle the collapsible sidebar category &#x27;Istio&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/cluster-logging">Logging</a><button aria-label="Toggle the collapsible sidebar category &#x27;Logging&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/cluster-alerts">Alerting</a><button aria-label="Toggle the collapsible sidebar category &#x27;Alerting&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="menu__link menu__link--sublist menu__link--active" aria-current="page" aria-expanded="true" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/cluster-monitoring">Monitoring</a><button aria-label="Toggle the collapsible sidebar category &#x27;Monitoring&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/explanations/integrations-in-rancher/cluster-monitoring/cluster-metrics">Cluster Metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/explanations/integrations-in-rancher/cluster-monitoring/custom-metrics">Prometheus Custom Metrics Adapter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/explanations/integrations-in-rancher/cluster-monitoring/expression">Prometheus Expressions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/explanations/integrations-in-rancher/cluster-monitoring/project-monitoring">Project Monitoring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/explanations/integrations-in-rancher/cluster-monitoring/prometheus">Prometheus Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/explanations/integrations-in-rancher/cluster-monitoring/viewing-metrics">Viewing Metrics</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/explanations/integrations-in-rancher/opa-gatekeeper">OPA Gatekeeper</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/explanations/integrations-in-rancher/notifiers">Notifiers</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/v2.0-v2.4/faq">FAQ</a><button aria-label="Toggle the collapsible sidebar category &#x27;FAQ&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/v2.0-v2.4/troubleshooting">Troubleshooting</a><button aria-label="Toggle the collapsible sidebar category &#x27;Troubleshooting&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v2.0-v2.4/contribute-to-rancher">Contributing to Rancher</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Rancher Manager<!-- --> <b>v2.0-v2.4</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/">latest version</a></b> (<!-- -->v2.6<!-- -->).</div></div><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/v2.0-v2.4/explanations"><span itemprop="name">Explanations</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/v2.0-v2.4/pages-for-subheaders/integrations-in-rancher"><span itemprop="name">Integrations in Rancher</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Monitoring</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v2.0-v2.4</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Integrating Rancher and Prometheus for Cluster Monitoring</h1></header><p><em>Available as of v2.2.0</em></p><p>Using Rancher, you can monitor the state and processes of your cluster nodes, Kubernetes components, and software deployments through integration with <a href="https://prometheus.io/" target="_blank" rel="noopener noreferrer">Prometheus</a>, a leading open-source monitoring solution.</p><p>This section covers the following topics:</p><ul><li><a href="#about-prometheus">About Prometheus</a></li><li><a href="#monitoring-scope">Monitoring scope</a></li><li><a href="#enabling-cluster-monitoring">Enabling cluster monitoring</a></li><li><a href="#resource-consumption">Resource consumption</a><ul><li><a href="#resource-consumption-of-prometheus-pods">Resource consumption of Prometheus pods</a></li><li><a href="#resource-consumption-of-other-pods">Resource consumption of other pods</a></li></ul></li></ul><h1>About Prometheus</h1><p>Prometheus provides a <em>time series</em> of your data, which is, according to <a href="https://prometheus.io/docs/concepts/data_model/" target="_blank" rel="noopener noreferrer">Prometheus documentation</a>:</p><p>You can configure these services to collect logs at either the cluster level or the project level. This page describes how to enable monitoring for a cluster. For details on enabling monitoring for a project, refer to the <a href="/v2.0-v2.4/explanations/integrations-in-rancher/cluster-monitoring/project-monitoring">project administration section</a>.</p><blockquote><p>A stream of timestamped values belonging to the same metric and the same set of labeled dimensions, along with comprehensive statistics and metrics of the monitored cluster.</p></blockquote><p>In other words, Prometheus lets you view metrics from your different Rancher and Kubernetes objects. Using timestamps, Prometheus lets you query and view these metrics in easy-to-read graphs and visuals, either through the Rancher UI or <a href="https://grafana.com/" target="_blank" rel="noopener noreferrer">Grafana</a>, which is an analytics viewing platform deployed along with Prometheus.</p><p>By viewing data that Prometheus scrapes from your cluster control plane, nodes, and deployments, you can stay on top of everything happening in your cluster. You can then use these analytics to better run your organization: stop system emergencies before they start, develop maintenance strategies, restore crashed servers, etc.</p><p>Multi-tenancy support in terms of cluster-only and project-only Prometheus instances are also supported.</p><h1>Monitoring Scope</h1><p>Using Prometheus, you can monitor Rancher at both the cluster level and <a href="/v2.0-v2.4/explanations/integrations-in-rancher/cluster-monitoring/project-monitoring">project level</a>. For each cluster and project that is enabled for monitoring, Rancher deploys a Prometheus server.</p><ul><li><p>Cluster monitoring allows you to view the health of your Kubernetes cluster. Prometheus collects metrics from the cluster components below, which you can view in graphs and charts.</p><ul><li>Kubernetes control plane</li><li>etcd database</li><li>All nodes (including workers)</li></ul></li><li><p><a href="/v2.0-v2.4/explanations/integrations-in-rancher/cluster-monitoring/project-monitoring">Project monitoring</a> allows you to view the state of pods running in a given project. Prometheus collects metrics from the project&#x27;s deployed HTTP and TCP/UDP workloads.</p></li></ul><h1>Enabling Cluster Monitoring</h1><p>As an <a href="/v2.0-v2.4/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/manage-role-based-access-control-rbac/global-permissions">administrator</a> or <a href="/v2.0-v2.4/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/manage-role-based-access-control-rbac/cluster-and-project-roles#cluster-roles">cluster owner</a>, you can configure Rancher to deploy Prometheus to monitor your Kubernetes cluster.</p><blockquote><p><strong>Prerequisites:</strong> The following TCP ports need to be opened for metrics scraping:</p><table><thead><tr><th>Port</th><th>Node type</th><th>Component</th></tr></thead><tbody><tr><td>9796</td><td>Worker</td><td>Node exporter</td></tr><tr><td>10254</td><td>Worker</td><td>Nginx Ingress Controller</td></tr><tr><td>10250</td><td>Worker/Controlplane</td><td>Kubelet</td></tr><tr><td>10251</td><td>Controlplane</td><td>Kube scheduler</td></tr><tr><td>10252</td><td>Controlplane</td><td>Kube controller manager</td></tr><tr><td>2379</td><td>Etcd</td><td>Etcd server</td></tr></tbody></table></blockquote><blockquote><p>Monitoring V1 requires a Kubernetes verison less than or equal to v1.20.x. To install monitoring on Kubernetes v1.21+, you will need to <a href="/v2.5/how-to-guides/advanced-user-guides/monitoring-alerting-guides/migrate-to-rancher-v2.5+-monitoring">migrate to Monitoring V2.</a></p></blockquote><ol><li><p>From the <strong>Global</strong> view, navigate to the cluster that you want to configure cluster monitoring.</p></li><li><p>Select <strong>Tools &gt; Monitoring</strong> in the navigation bar.</p></li><li><p>Select <strong>Enable</strong> to show the <a href="/v2.0-v2.4/explanations/integrations-in-rancher/cluster-monitoring/prometheus">Prometheus configuration options</a>. Review the <a href="#resource-consumption">resource consumption recommendations</a> to ensure you have enough resources for Prometheus and on your worker nodes to enable monitoring. Enter in your desired configuration options.</p></li><li><p>Click <strong>Save</strong>.</p></li></ol><p><strong>Result:</strong> The Prometheus server will be deployed as well as two monitoring applications. The two monitoring applications, <code>cluster-monitoring</code> and <code>monitoring-operator</code>, are added as an <a href="/v2.0-v2.4/pages-for-subheaders/helm-charts-in-rancher">application</a> to the cluster&#x27;s <code>system</code> project. After the applications are <code>active</code>, you can start viewing <a href="/v2.0-v2.4/explanations/integrations-in-rancher/cluster-monitoring/cluster-metrics">cluster metrics</a> through the Rancher dashboard or directly from Grafana.</p><blockquote><p>The default username and password for the Grafana instance will be <code>admin/admin</code>. However, Grafana dashboards are served via the Rancher authentication proxy, so only users who are currently authenticated into the Rancher server have access to the Grafana dashboard.</p></blockquote><h1>Resource Consumption</h1><p>When enabling cluster monitoring, you need to ensure your worker nodes and Prometheus pod have enough resources. The tables below provides a guide of how much resource consumption will be used. In larger deployments, it is strongly advised that the monitoring infrastructure be placed on dedicated nodes in the cluster.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="resource-consumption-of-prometheus-pods">Resource Consumption of Prometheus Pods<a class="hash-link" href="#resource-consumption-of-prometheus-pods" title="Direct link to heading">​</a></h3><p>This table is the resource consumption of the Prometheus pod, which is based on the number of all the nodes in the cluster. The count of nodes includes the worker, control plane and etcd nodes. Total disk space allocation should be approximated by the <code>rate * retention</code> period set at the cluster level. When enabling cluster level monitoring, you should adjust the CPU and Memory limits and reservation.</p><table><thead><tr><th>Number of Cluster Nodes</th><th>CPU (milli CPU)</th><th>Memory</th><th>Disk</th></tr></thead><tbody><tr><td>5</td><td>500</td><td>650 MB</td><td>~1 GB/Day</td></tr><tr><td>50</td><td>2000</td><td>2 GB</td><td>~5 GB/Day</td></tr><tr><td>256</td><td>4000</td><td>6 GB</td><td>~18 GB/Day</td></tr></tbody></table><p>Additional pod resource requirements for cluster level monitoring.</p><table><thead><tr><th>Workload</th><th>Container</th><th>CPU - Request</th><th>Mem - Request</th><th>CPU - Limit</th><th>Mem - Limit</th><th>Configurable</th></tr></thead><tbody><tr><td>Prometheus</td><td>prometheus</td><td>750m</td><td>750Mi</td><td>1000m</td><td>1000Mi</td><td>Y</td></tr><tr><td></td><td>prometheus-proxy</td><td>50m</td><td>50Mi</td><td>100m</td><td>100Mi</td><td>Y</td></tr><tr><td></td><td>prometheus-auth</td><td>100m</td><td>100Mi</td><td>500m</td><td>200Mi</td><td>Y</td></tr><tr><td></td><td>prometheus-config-reloader</td><td>-</td><td>-</td><td>50m</td><td>50Mi</td><td>N</td></tr><tr><td></td><td>rules-configmap-reloader</td><td>-</td><td>-</td><td>100m</td><td>25Mi</td><td>N</td></tr><tr><td>Grafana</td><td>grafana-init-plugin-json-copy</td><td>50m</td><td>50Mi</td><td>50m</td><td>50Mi</td><td>Y</td></tr><tr><td></td><td>grafana-init-plugin-json-modify</td><td>50m</td><td>50Mi</td><td>50m</td><td>50Mi</td><td>Y</td></tr><tr><td></td><td>grafana</td><td>100m</td><td>100Mi</td><td>200m</td><td>200Mi</td><td>Y</td></tr><tr><td></td><td>grafana-proxy</td><td>50m</td><td>50Mi</td><td>100m</td><td>100Mi</td><td>Y</td></tr><tr><td>Kube-State Exporter</td><td>kube-state</td><td>100m</td><td>130Mi</td><td>100m</td><td>200Mi</td><td>Y</td></tr><tr><td>Node Exporter</td><td>exporter-node</td><td>200m</td><td>200Mi</td><td>200m</td><td>200Mi</td><td>Y</td></tr><tr><td>Operator</td><td>prometheus-operator</td><td>100m</td><td>50Mi</td><td>200m</td><td>100Mi</td><td>Y</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="resource-consumption-of-other-pods">Resource Consumption of Other Pods<a class="hash-link" href="#resource-consumption-of-other-pods" title="Direct link to heading">​</a></h3><p>Besides the Prometheus pod, there are components that are deployed that require additional resources on the worker nodes.</p><table><thead><tr><th>Pod</th><th>CPU (milli CPU)</th><th>Memory (MB)</th></tr></thead><tbody><tr><td>Node Exporter (Per Node)</td><td>100</td><td>30</td></tr><tr><td>Kube State Cluster Monitor</td><td>100</td><td>130</td></tr><tr><td>Grafana</td><td>100</td><td>150</td></tr><tr><td>Prometheus Cluster Monitoring Nginx</td><td>50</td><td>50</td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/rancher/rancher-docs/edit/main/versioned_docs/version-2.0-2.4/pages-for-subheaders/cluster-monitoring.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_eYIM" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vbeJ"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-09-08T22:35:34.000Z">9/8/2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/v2.0-v2.4/explanations/integrations-in-rancher/cluster-alerts/default-alerts"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Default Alerts for Cluster Monitoring</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/v2.0-v2.4/explanations/integrations-in-rancher/cluster-monitoring/cluster-metrics"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Cluster Metrics</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#resource-consumption-of-prometheus-pods" class="table-of-contents__link toc-highlight">Resource Consumption of Prometheus Pods</a></li><li><a href="#resource-consumption-of-other-pods" class="table-of-contents__link toc-highlight">Resource Consumption of Other Pods</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 SUSE Rancher. All Rights Reserved.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.217a7f9f.js"></script>
<script src="/assets/js/main.00d8b9dc.js"></script>
</body>
</html>