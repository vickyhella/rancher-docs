<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-2.0-2.4 plugin-docs plugin-id-default docs-doc-id-pages-for-subheaders/install-upgrade-on-a-kubernetes-cluster">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<link rel="search" type="application/opensearchdescription+xml" title="Rancher Manager" href="/opensearch.xml"><title data-rh="true">Install Rancher on a Kubernetes Cluster | Rancher Manager</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://docs.ranchermanager.rancher.io//v2.0-v2.4/pages-for-subheaders/install-upgrade-on-a-kubernetes-cluster"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="2.0-2.4"><meta data-rh="true" name="docusaurus_tag" content="docs-default-2.0-2.4"><meta data-rh="true" name="docsearch:version" content="2.0-2.4"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-2.0-2.4"><meta data-rh="true" property="og:title" content="Install Rancher on a Kubernetes Cluster | Rancher Manager"><meta data-rh="true" name="description" content="Learn how to install Rancher in development and production environments. Read about single node and high availability installation"><meta data-rh="true" property="og:description" content="Learn how to install Rancher in development and production environments. Read about single node and high availability installation"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="http://docs.ranchermanager.rancher.io//v2.0-v2.4/pages-for-subheaders/install-upgrade-on-a-kubernetes-cluster"><link data-rh="true" rel="alternate" href="http://docs.ranchermanager.rancher.io//v2.0-v2.4/pages-for-subheaders/install-upgrade-on-a-kubernetes-cluster" hreflang="en"><link data-rh="true" rel="alternate" href="http://docs.ranchermanager.rancher.io//v2.0-v2.4/pages-for-subheaders/install-upgrade-on-a-kubernetes-cluster" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://30NEY6C9UY-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.31d3122a.css">
<link rel="preload" href="/assets/js/runtime~main.d2604d48.js" as="script">
<link rel="preload" href="/assets/js/main.aa78001f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/rancher-logo-horiz-color.svg" alt="logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/rancher-logo-horiz-color.svg" alt="logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><div class="navbar__item dropdown dropdown--hoverable"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/v2.0-v2.4">v2.0-v2.4</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/pages-for-subheaders/install-upgrade-on-a-kubernetes-cluster">v2.6</a></li><li><a class="dropdown__link" href="/v2.5/pages-for-subheaders/install-upgrade-on-a-kubernetes-cluster">v2.5</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/v2.0-v2.4/pages-for-subheaders/install-upgrade-on-a-kubernetes-cluster">v2.0-v2.4</a></li><li><a class="dropdown__link" href="/versions">All versions</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__docs navbar__link--active" href="/v2.0-v2.4">Docs</a><a href="https://github.com/rancher/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__github btn btn-secondary icon-github">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v2.0-v2.4">Rancher 2.0-2.4</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/v2.0-v2.4/getting-started">Getting Started</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/introduction">Introduction</a><button aria-label="Toggle the collapsible sidebar category &#x27;Introduction&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/quick-start-guides">Quick Start Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Quick Start Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/installation-and-upgrade">Installation and Upgrade</a><button aria-label="Toggle the collapsible sidebar category &#x27;Installation and Upgrade&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/installation-requirements">Installation Requirements</a><button aria-label="Toggle the collapsible sidebar category &#x27;Installation Requirements&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="menu__link menu__link--sublist menu__link--active" aria-current="page" aria-expanded="true" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/install-upgrade-on-a-kubernetes-cluster">Install/Upgrade on a Kubernetes Cluster</a><button aria-label="Toggle the collapsible sidebar category &#x27;Install/Upgrade on a Kubernetes Cluster&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/getting-started/installation-and-upgrade/install-upgrade-on-a-kubernetes-cluster/rollbacks">Rollbacks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/getting-started/installation-and-upgrade/install-upgrade-on-a-kubernetes-cluster/troubleshooting">Troubleshooting the Rancher Server Kubernetes Cluster</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/upgrades">Upgrades</a><button aria-label="Toggle the collapsible sidebar category &#x27;Upgrades&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/other-installation-methods">Other Installation Methods</a><button aria-label="Toggle the collapsible sidebar category &#x27;Other Installation Methods&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/resources">Resources</a><button aria-label="Toggle the collapsible sidebar category &#x27;Resources&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/getting-started/installation-and-upgrade/upgrade-and-roll-back-kubernetes">Upgrading and Rolling Back Kubernetes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/getting-started/installation-and-upgrade/upgrade-kubernetes-without-upgrading-rancher">Upgrading Kubernetes without Upgrading Rancher</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/advanced-options">Advanced Options</a><button aria-label="Toggle the collapsible sidebar category &#x27;Advanced Options&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/v2.0-v2.4/how-to-guides">How-to Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;How-to Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/v2.0-v2.4/reference-guides">Reference Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Reference Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/v2.0-v2.4/explanations">Explanations</a><button aria-label="Toggle the collapsible sidebar category &#x27;Explanations&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/v2.0-v2.4/faq">FAQ</a><button aria-label="Toggle the collapsible sidebar category &#x27;FAQ&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/v2.0-v2.4/troubleshooting">Troubleshooting</a><button aria-label="Toggle the collapsible sidebar category &#x27;Troubleshooting&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v2.0-v2.4/contribute-to-rancher">Contributing to Rancher</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Rancher Manager<!-- --> <b>v2.0-v2.4</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/pages-for-subheaders/install-upgrade-on-a-kubernetes-cluster">latest version</a></b> (<!-- -->v2.6<!-- -->).</div></div><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/v2.0-v2.4/getting-started"><span itemprop="name">Getting Started</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/v2.0-v2.4/pages-for-subheaders/installation-and-upgrade"><span itemprop="name">Installation and Upgrade</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Install/Upgrade on a Kubernetes Cluster</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v2.0-v2.4</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Prerequisite</h1><p>Set up the Rancher server&#x27;s local Kubernetes cluster.</p><p>The cluster requirements depend on the Rancher version:</p><ul><li><strong>In Rancher v2.4.x,</strong> Rancher needs to be installed on a K3s Kubernetes cluster or an RKE Kubernetes cluster.</li><li><strong>In Rancher before v2.4,</strong> Rancher needs to be installed on an RKE Kubernetes cluster.</li></ul><p>For the tutorial to install an RKE Kubernetes cluster, refer to <a href="/v2.0-v2.4/how-to-guides/new-user-guides/kubernetes-cluster-setup/rke1-for-rancher">this page.</a> For help setting up the infrastructure for a high-availability RKE cluster, refer to <a href="/v2.0-v2.4/how-to-guides/new-user-guides/infrastructure-setup/ha-rke1-kubernetes-cluster">this page.</a></p><p>For the tutorial to install a K3s Kubernetes cluster, refer to <a href="/v2.0-v2.4/how-to-guides/new-user-guides/kubernetes-cluster-setup/k3s-for-rancher">this page.</a> For help setting up the infrastructure for a high-availability K3s cluster, refer to <a href="/v2.0-v2.4/how-to-guides/new-user-guides/infrastructure-setup/ha-k3s-kubernetes-cluster">this page.</a></p><h1>Install the Rancher Helm Chart</h1><p>Rancher is installed using the Helm package manager for Kubernetes. Helm charts provide templating syntax for Kubernetes YAML manifest documents.</p><p>With Helm, we can create configurable deployments instead of just using static files. For more information about creating your own catalog of deployments, check out the docs at <a href="https://helm.sh/" target="_blank" rel="noopener noreferrer">https://helm.sh/</a>.</p><p>For systems without direct internet access, see <a href="/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/air-gap-helm2/install-rancher">Air Gap: Kubernetes install</a>.</p><p>To choose a Rancher version to install, refer to <a href="/v2.0-v2.4/getting-started/installation-and-upgrade/resources/choose-a-rancher-version">Choosing a Rancher Version.</a></p><p>To choose a version of Helm to install Rancher with, refer to the <a href="/v2.0-v2.4/getting-started/installation-and-upgrade/resources/helm-version-requirements">Helm version requirements</a></p><blockquote><p><strong>Note:</strong> The installation instructions assume you are using Helm 3. For migration of installs started with Helm 2, refer to the official <a href="https://helm.sh/blog/migrate-from-helm-v2-to-helm-v3/" target="_blank" rel="noopener noreferrer">Helm 2 to 3 migration docs.</a> This <a href="/v2.0-v2.4/getting-started/installation-and-upgrade/resources/helm-version-requirements">section</a> provides a copy of the older installation instructions for Rancher installed on an RKE Kubernetes cluster with Helm 2, and it is intended to be used if upgrading to Helm 3 is not feasible.</p></blockquote><p>To set up Rancher,</p><ol><li><a href="#1-install-the-required-cli-tools">Install the required CLI tools</a></li><li><a href="#2-add-the-helm-chart-repository">Add the Helm chart repository</a></li><li><a href="#3-create-a-namespace-for-rancher">Create a namespace for Rancher</a></li><li><a href="#4-choose-your-ssl-configuration">Choose your SSL configuration</a></li><li><a href="#5-install-cert-manager">Install cert-manager</a> (unless you are bringing your own certificates, or TLS will be terminated on a load balancer)</li><li><a href="#6-install-rancher-with-helm-and-your-chosen-certificate-option">Install Rancher with Helm and your chosen certificate option</a></li><li><a href="#7-verify-that-the-rancher-server-is-successfully-deployed">Verify that the Rancher server is successfully deployed</a></li><li><a href="#8-save-your-options">Save your options</a></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-install-the-required-cli-tools">1. Install the Required CLI Tools<a class="hash-link" href="#1-install-the-required-cli-tools" title="Direct link to heading">​</a></h3><p>The following CLI tools are required for setting up the Kubernetes cluster. Please make sure these tools are installed and available in your <code>$PATH</code>.</p><p>Refer to the <a href="https://helm.sh/docs/intro/install/" target="_blank" rel="noopener noreferrer">instructions provided by the Helm project</a> for your specific platform.</p><ul><li><a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/#install-kubectl" target="_blank" rel="noopener noreferrer">kubectl</a> - Kubernetes command-line tool.</li><li><a href="https://docs.helm.sh/using_helm/#installing-helm" target="_blank" rel="noopener noreferrer">helm</a> - Package management for Kubernetes. Refer to the <a href="/v2.0-v2.4/getting-started/installation-and-upgrade/resources/helm-version-requirements">Helm version requirements</a> to choose a version of Helm to install Rancher.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-add-the-helm-chart-repository">2. Add the Helm Chart Repository<a class="hash-link" href="#2-add-the-helm-chart-repository" title="Direct link to heading">​</a></h3><p>Use <code>helm repo add</code> command to add the Helm chart repository that contains charts to install Rancher. For more information about the repository choices and which is best for your use case, see <a href="/v2.0-v2.4/reference-guides/installation-references/helm-chart-options#helm-chart-repositories">Choosing a Version of Rancher</a>.</p><ul><li>Latest: Recommended for trying out the newest features<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm repo add rancher-latest https://releases.rancher.com/server-charts/latest</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>Stable: Recommended for production environments<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm repo add rancher-stable https://releases.rancher.com/server-charts/stable</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>Alpha: Experimental preview of upcoming releases.<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm repo add rancher-stable https://releases.rancher.com/server-charts/stable</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>  Note: Upgrades are not supported to, from, or between Alphas.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-create-a-namespace-for-rancher">3. Create a Namespace for Rancher<a class="hash-link" href="#3-create-a-namespace-for-rancher" title="Direct link to heading">​</a></h3><p>We&#x27;ll need to define a Kubernetes namespace where the resources created by the Chart should be installed. This should always be <code>cattle-system</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl create namespace cattle-system</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-choose-your-ssl-configuration">4. Choose your SSL Configuration<a class="hash-link" href="#4-choose-your-ssl-configuration" title="Direct link to heading">​</a></h3><p>The Rancher management server is designed to be secure by default and requires SSL/TLS configuration.</p><blockquote><p><strong>Note:</strong> If you want terminate SSL/TLS externally, see <a href="/v2.0-v2.4/reference-guides/installation-references/helm-chart-options#external-tls-termination">TLS termination on an External Load Balancer</a>.</p></blockquote><p>There are three recommended options for the source of the certificate used for TLS termination at the Rancher server:</p><ul><li><strong>Rancher-generated TLS certificate:</strong> In this case, you will need to install <code>cert-manager</code> into the cluster. Rancher utilizes <code>cert-manager</code> to issue and maintain its certificates. Rancher will generate a CA certificate of its own, and sign a cert using that CA. <code>cert-manager</code> is then responsible for managing that certificate.</li><li><strong>Let&#x27;s Encrypt:</strong> The Let&#x27;s Encrypt option also uses <code>cert-manager</code>. However, in this case, cert-manager is combined with a special Issuer for Let&#x27;s Encrypt that performs all actions (including request and validation) necessary for getting a Let&#x27;s Encrypt issued cert. This configuration uses HTTP validation (<code>HTTP-01</code>), so the load balancer must have a public DNS record and be accessible from the internet.</li><li><strong>Bring your own certificate:</strong> This option allows you to bring your own public- or private-CA signed certificate. Rancher will use that certificate to secure websocket and HTTPS traffic. In this case, you must upload this certificate (and associated key) as PEM-encoded files with the name <code>tls.crt</code> and <code>tls.key</code>. If you are using a private CA, you must also upload that certificate. This is due to the fact that this private CA may not be trusted by your nodes. Rancher will take that CA certificate, and generate a checksum from it, which the various Rancher components will use to validate their connection to Rancher.</li></ul><table><thead><tr><th>Configuration</th><th>Helm Chart Option</th><th>Requires cert-manager</th></tr></thead><tbody><tr><td>Rancher Generated Certificates (Default)</td><td><code>ingress.tls.source=rancher</code></td><td><a href="#5-install-cert-manager">yes</a></td></tr><tr><td>Let’s Encrypt</td><td><code>ingress.tls.source=letsEncrypt</code></td><td><a href="#5-install-cert-manager">yes</a></td></tr><tr><td>Certificates from Files</td><td><code>ingress.tls.source=secret</code></td><td>no</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-install-cert-manager">5. Install cert-manager<a class="hash-link" href="#5-install-cert-manager" title="Direct link to heading">​</a></h3><blockquote><p>You should skip this step if you are bringing your own certificate files (option <code>ingress.tls.source=secret</code>), or if you use <a href="/v2.0-v2.4/reference-guides/installation-references/helm-chart-options#external-tls-termination">TLS termination on an external load balancer</a>.</p></blockquote><p>This step is only required to use certificates issued by Rancher&#x27;s generated CA (<code>ingress.tls.source=rancher</code>) or to request Let&#x27;s Encrypt issued certificates (<code>ingress.tls.source=letsEncrypt</code>).</p><details id="cert-manager" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Click to Expand</summary><div><div class="collapsibleContent_i85q"><blockquote><p><strong>Important:</strong> Recent changes to cert-manager require an upgrade. If you are upgrading Rancher and using a version of cert-manager older than v0.11.0, please see our <a href="/v2.0-v2.4/getting-started/installation-and-upgrade/resources/upgrade-cert-manager">upgrade documentation</a>.</p></blockquote><p>These instructions are adapted from the <a href="https://cert-manager.io/docs/installation/kubernetes/#installing-with-helm" target="_blank" rel="noopener noreferrer">official cert-manager documentation</a>.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Install the CustomResourceDefinition resources separately</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl apply --validate=false -f https://github.com/jetstack/cert-manager/releases/download/v1.0.4/cert-manager.crds.yaml</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># **Important:**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># If you are running Kubernetes v1.15 or below, you</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># will need to add the `--validate=false` flag to your</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># kubectl apply command, or else you will receive a</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># validation error relating to the</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># x-kubernetes-preserve-unknown-fields field in</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># cert-manager’s CustomResourceDefinition resources.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># This is a benign error and occurs due to the way kubectl</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># performs resource validation.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Create the namespace for cert-manager</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl create namespace cert-manager</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Add the Jetstack Helm repository</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm repo add jetstack https://charts.jetstack.io</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Update your local Helm chart repository cache</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm repo update</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Install the cert-manager Helm chart</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm install \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  cert-manager jetstack/cert-manager \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --namespace cert-manager \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --version v1.0.4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once you’ve installed cert-manager, you can verify it is deployed correctly by checking the cert-manager namespace for running pods:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get pods --namespace cert-manager</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                                       READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cert-manager-5c6866597-zw7kh               1/1     Running   0          2m</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cert-manager-cainjector-577f6d9fd7-tr77l   1/1     Running   0          2m</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cert-manager-webhook-787858fcdb-nlzsq      1/1     Running   0          2m</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="6-install-rancher-with-helm-and-your-chosen-certificate-option">6. Install Rancher with Helm and Your Chosen Certificate Option<a class="hash-link" href="#6-install-rancher-with-helm-and-your-chosen-certificate-option" title="Direct link to heading">​</a></h3><p>The exact command to install Rancher differs depending on the certificate configuration.</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Rancher-generated Certificates</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Let&#x27;s Encrypt</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Certificates from Files</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p>The default is for Rancher to generate a CA and uses <code>cert-manager</code> to issue the certificate for access to the Rancher server interface.</p><p>Because <code>rancher</code> is the default option for <code>ingress.tls.source</code>, we are not specifying <code>ingress.tls.source</code> when running the <code>helm install</code> command.</p><ul><li>Set the <code>hostname</code> to the DNS name you pointed at your load balancer.</li><li>If you are installing an alpha version, Helm requires adding the <code>--devel</code> option to the command.</li><li>To install a specific Rancher version, use the <code>--version</code> flag, example: <code>--version 2.3.6</code></li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm install rancher rancher-&lt;CHART_REPO&gt;/rancher \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --namespace cattle-system \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --set hostname=rancher.my.org</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Wait for Rancher to be rolled out:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl -n cattle-system rollout status deploy/rancher</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Waiting for deployment &quot;rancher&quot; rollout to finish: 0 of 3 updated replicas are available...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">deployment &quot;rancher&quot; successfully rolled out</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>This option uses <code>cert-manager</code> to automatically request and renew <a href="https://letsencrypt.org/" target="_blank" rel="noopener noreferrer">Let&#x27;s Encrypt</a> certificates. This is a free service that provides you with a valid certificate as Let&#x27;s Encrypt is a trusted CA.</p><p>In the following command,</p><ul><li><code>hostname</code> is set to the public DNS record,</li><li><code>ingress.tls.source</code> is set to <code>letsEncrypt</code></li><li><code>letsEncrypt.email</code> is set to the email address used for communication about your certificate (for example, expiry notices)</li><li>If you are installing an alpha version, Helm requires adding the <code>--devel</code> option to the command.</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm install rancher rancher-&lt;CHART_REPO&gt;/rancher \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --namespace cattle-system \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --set hostname=rancher.my.org \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --set ingress.tls.source=letsEncrypt \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --set letsEncrypt.email=me@example.org \</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Wait for Rancher to be rolled out:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl -n cattle-system rollout status deploy/rancher</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Waiting for deployment &quot;rancher&quot; rollout to finish: 0 of 3 updated replicas are available...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">deployment &quot;rancher&quot; successfully rolled out</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>In this option, Kubernetes secrets are created from your own certificates for Rancher to use.</p><p>When you run this command, the <code>hostname</code> option must match the <code>Common Name</code> or a <code>Subject Alternative Names</code> entry in the server certificate or the Ingress controller will fail to configure correctly.</p><p>Although an entry in the <code>Subject Alternative Names</code> is technically required, having a matching <code>Common Name</code> maximizes compatibility with older browsers and applications.</p><blockquote><p>If you want to check if your certificates are correct, see <a href="/v2.0-v2.4/faq/technical-items#how-do-i-check-common-name-and-subject-alternative-names-in-my-server-certificate">How do I check Common Name and Subject Alternative Names in my server certificate?</a></p></blockquote><ul><li>Set the <code>hostname</code>.</li><li>Set <code>ingress.tls.source</code> to <code>secret</code>.</li><li>If you are installing an alpha version, Helm requires adding the <code>--devel</code> option to the command.</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm install rancher rancher-&lt;CHART_REPO&gt;/rancher \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --namespace cattle-system \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --set hostname=rancher.my.org \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --set ingress.tls.source=secret</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you are using a Private CA signed certificate , add <code>--set privateCA=true</code> to the command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm install rancher rancher-&lt;CHART_REPO&gt;/rancher \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --namespace cattle-system \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --set hostname=rancher.my.org \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --set ingress.tls.source=secret \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --set privateCA=true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now that Rancher is deployed, see <a href="/v2.0-v2.4/getting-started/installation-and-upgrade/resources/add-tls-secrets">Adding TLS Secrets</a> to publish the certificate files so Rancher and the Ingress controller can use them.</p></div></div></div><p>The Rancher chart configuration has many options for customizing the installation to suit your specific environment. Here are some common advanced scenarios.</p><ul><li><a href="/v2.0-v2.4/reference-guides/installation-references/helm-chart-options#http-proxy">HTTP Proxy</a></li><li><a href="/v2.0-v2.4/reference-guides/installation-references/helm-chart-options#private-registry-and-air-gap-installs">Private Docker Image Registry</a></li><li><a href="/v2.0-v2.4/reference-guides/installation-references/helm-chart-options#external-tls-termination">TLS Termination on an External Load Balancer</a></li></ul><p>See the <a href="/v2.0-v2.4/reference-guides/installation-references/helm-chart-options">Chart Options</a> for the full list of options.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="7-verify-that-the-rancher-server-is-successfully-deployed">7. Verify that the Rancher Server is Successfully Deployed<a class="hash-link" href="#7-verify-that-the-rancher-server-is-successfully-deployed" title="Direct link to heading">​</a></h3><p>After adding the secrets, check if Rancher was rolled out successfully:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl -n cattle-system rollout status deploy/rancher</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Waiting for deployment &quot;rancher&quot; rollout to finish: 0 of 3 updated replicas are available...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">deployment &quot;rancher&quot; successfully rolled out</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you see the following error: <code>error: deployment &quot;rancher&quot; exceeded its progress deadline</code>, you can check the status of the deployment by running the following command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl -n cattle-system get deploy rancher</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">NAME      DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">rancher   3         3         3            3           3m</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It should show the same count for <code>DESIRED</code> and <code>AVAILABLE</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="8-save-your-options">8. Save Your Options<a class="hash-link" href="#8-save-your-options" title="Direct link to heading">​</a></h3><p>Make sure you save the <code>--set</code> options you used. You will need to use the same options when you upgrade Rancher to new versions with Helm.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="finishing-up">Finishing Up<a class="hash-link" href="#finishing-up" title="Direct link to heading">​</a></h3><p>That&#x27;s it. You should have a functional Rancher server.</p><p>In a web browser, go to the DNS name that forwards traffic to your load balancer. Then you should be greeted by the colorful login page.</p><p>Doesn&#x27;t work? Take a look at the <a href="/v2.0-v2.4/getting-started/installation-and-upgrade/install-upgrade-on-a-kubernetes-cluster/troubleshooting">Troubleshooting</a> Page</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="optional-next-steps">Optional Next Steps<a class="hash-link" href="#optional-next-steps" title="Direct link to heading">​</a></h3><p>Enable the Enterprise Cluster Manager.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/rancher/rancher-docs/edit/main/versioned_docs/version-2.0-2.4/pages-for-subheaders/install-upgrade-on-a-kubernetes-cluster.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_eYIM" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vbeJ"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-09-10T07:31:45.000Z">9/10/2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/v2.0-v2.4/getting-started/installation-and-upgrade/installation-requirements/port-requirements"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Port Requirements</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/v2.0-v2.4/getting-started/installation-and-upgrade/install-upgrade-on-a-kubernetes-cluster/rollbacks"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Rollbacks</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-install-the-required-cli-tools" class="table-of-contents__link toc-highlight">1. Install the Required CLI Tools</a></li><li><a href="#2-add-the-helm-chart-repository" class="table-of-contents__link toc-highlight">2. Add the Helm Chart Repository</a></li><li><a href="#3-create-a-namespace-for-rancher" class="table-of-contents__link toc-highlight">3. Create a Namespace for Rancher</a></li><li><a href="#4-choose-your-ssl-configuration" class="table-of-contents__link toc-highlight">4. Choose your SSL Configuration</a></li><li><a href="#5-install-cert-manager" class="table-of-contents__link toc-highlight">5. Install cert-manager</a></li><li><a href="#6-install-rancher-with-helm-and-your-chosen-certificate-option" class="table-of-contents__link toc-highlight">6. Install Rancher with Helm and Your Chosen Certificate Option</a></li><li><a href="#7-verify-that-the-rancher-server-is-successfully-deployed" class="table-of-contents__link toc-highlight">7. Verify that the Rancher Server is Successfully Deployed</a></li><li><a href="#8-save-your-options" class="table-of-contents__link toc-highlight">8. Save Your Options</a></li><li><a href="#finishing-up" class="table-of-contents__link toc-highlight">Finishing Up</a></li><li><a href="#optional-next-steps" class="table-of-contents__link toc-highlight">Optional Next Steps</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 SUSE Rancher. All Rights Reserved.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.d2604d48.js"></script>
<script src="/assets/js/main.aa78001f.js"></script>
</body>
</html>