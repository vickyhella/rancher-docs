<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-2.0-2.4 plugin-docs plugin-id-default docs-doc-id-getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/air-gap-helm2/install-rancher">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<link rel="search" type="application/opensearchdescription+xml" title="Rancher Manager" href="/opensearch.xml"><title data-rh="true">4. Install Rancher | Rancher Manager</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://docs.ranchermanager.rancher.io//v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/air-gap-helm2/install-rancher"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="2.0-2.4"><meta data-rh="true" name="docusaurus_tag" content="docs-default-2.0-2.4"><meta data-rh="true" name="docsearch:version" content="2.0-2.4"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-2.0-2.4"><meta data-rh="true" property="og:title" content="4. Install Rancher | Rancher Manager"><meta data-rh="true" name="description" content="This section is about how to deploy Rancher for your air gapped environment. An air gapped environment could be where Rancher server will be installed offline, behind a firewall, or behind a proxy. There are tabs for either a high availability (recommended) or a Docker installation."><meta data-rh="true" property="og:description" content="This section is about how to deploy Rancher for your air gapped environment. An air gapped environment could be where Rancher server will be installed offline, behind a firewall, or behind a proxy. There are tabs for either a high availability (recommended) or a Docker installation."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="http://docs.ranchermanager.rancher.io//v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/air-gap-helm2/install-rancher"><link data-rh="true" rel="alternate" href="http://docs.ranchermanager.rancher.io//v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/air-gap-helm2/install-rancher" hreflang="en"><link data-rh="true" rel="alternate" href="http://docs.ranchermanager.rancher.io//v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/air-gap-helm2/install-rancher" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://30NEY6C9UY-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.31d3122a.css">
<link rel="preload" href="/assets/js/runtime~main.d2604d48.js" as="script">
<link rel="preload" href="/assets/js/main.aa78001f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/rancher-logo-horiz-color.svg" alt="logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/rancher-logo-horiz-color.svg" alt="logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><div class="navbar__item dropdown dropdown--hoverable"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/v2.0-v2.4">v2.0-v2.4</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/">v2.6</a></li><li><a class="dropdown__link" href="/v2.5">v2.5</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/air-gap-helm2/install-rancher">v2.0-v2.4</a></li><li><a class="dropdown__link" href="/versions">All versions</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__docs navbar__link--active" href="/v2.0-v2.4">Docs</a><a href="https://github.com/rancher/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__github btn btn-secondary icon-github">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v2.0-v2.4">Rancher 2.0-2.4</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/v2.0-v2.4/getting-started">Getting Started</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/introduction">Introduction</a><button aria-label="Toggle the collapsible sidebar category &#x27;Introduction&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/quick-start-guides">Quick Start Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Quick Start Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/installation-and-upgrade">Installation and Upgrade</a><button aria-label="Toggle the collapsible sidebar category &#x27;Installation and Upgrade&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/installation-requirements">Installation Requirements</a><button aria-label="Toggle the collapsible sidebar category &#x27;Installation Requirements&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/install-upgrade-on-a-kubernetes-cluster">Install/Upgrade on a Kubernetes Cluster</a><button aria-label="Toggle the collapsible sidebar category &#x27;Install/Upgrade on a Kubernetes Cluster&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/other-installation-methods">Other Installation Methods</a><button aria-label="Toggle the collapsible sidebar category &#x27;Other Installation Methods&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/resources">Resources</a><button aria-label="Toggle the collapsible sidebar category &#x27;Resources&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/getting-started/installation-and-upgrade/upgrade-and-roll-back-kubernetes">Upgrading and Rolling Back Kubernetes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/getting-started/installation-and-upgrade/upgrade-kubernetes-without-upgrading-rancher">Upgrading Kubernetes without Upgrading Rancher</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/advanced-options">Advanced Options</a><button aria-label="Toggle the collapsible sidebar category &#x27;Advanced Options&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/enable-experimental-features">Enable Experimental Features</a><button aria-label="Toggle the collapsible sidebar category &#x27;Enable Experimental Features&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/helm2">Advanced Use Cases</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/helm2">Kubernetes Installation Using Helm 2</a><button aria-label="Toggle the collapsible sidebar category &#x27;Kubernetes Installation Using Helm 2&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/air-gap-helm2">Installing Rancher in an Air Gapped Environment with Helm 2</a><button aria-label="Toggle the collapsible sidebar category &#x27;Installing Rancher in an Air Gapped Environment with Helm 2&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/air-gap-helm2/prepare-nodes">1. Prepare your Node(s)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/air-gap-helm2/populate-private-registry">2. Collect and Publish Images to your Private Registry</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/air-gap-helm2/launch-kubernetes">3. Install Kubernetes with RKE (Kubernetes Installs Only)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/air-gap-helm2/install-rancher">4. Install Rancher</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/open-ports-with-firewalld">Opening Ports with firewalld</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/tune-etcd-for-large-installs">Tuning etcd for Large Installations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/enable-api-audit-log">Enabling the API Audit Log to Record System Events</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/cluster-yml">cluster.yml Templates for RKE add-on installs</a><button aria-label="Toggle the collapsible sidebar category &#x27;cluster.yml Templates for RKE add-on installs&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/configure-layer-7-nginx-load-balancer">Docker Install with TLS Termination at Layer-7 NGINX Load Balancer</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.0-v2.4/pages-for-subheaders/rke-add-on">RKE Add-On</a><button aria-label="Toggle the collapsible sidebar category &#x27;RKE Add-On&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/v2.0-v2.4/how-to-guides">How-to Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;How-to Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/v2.0-v2.4/reference-guides">Reference Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Reference Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/v2.0-v2.4/explanations">Explanations</a><button aria-label="Toggle the collapsible sidebar category &#x27;Explanations&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/v2.0-v2.4/faq">FAQ</a><button aria-label="Toggle the collapsible sidebar category &#x27;FAQ&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/v2.0-v2.4/troubleshooting">Troubleshooting</a><button aria-label="Toggle the collapsible sidebar category &#x27;Troubleshooting&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v2.0-v2.4/contribute-to-rancher">Contributing to Rancher</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Rancher Manager<!-- --> <b>v2.0-v2.4</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/">latest version</a></b> (<!-- -->v2.6<!-- -->).</div></div><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/v2.0-v2.4/getting-started"><span itemprop="name">Getting Started</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/v2.0-v2.4/pages-for-subheaders/installation-and-upgrade"><span itemprop="name">Installation and Upgrade</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/v2.0-v2.4/pages-for-subheaders/advanced-options"><span itemprop="name">Advanced Options</span></a><meta itemprop="position" content="3"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Advanced Use Cases</span><meta itemprop="position" content="4"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/v2.0-v2.4/pages-for-subheaders/air-gap-helm2"><span itemprop="name">Installing Rancher in an Air Gapped Environment with Helm 2</span></a><meta itemprop="position" content="5"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">4. Install Rancher</span><meta itemprop="position" content="6"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v2.0-v2.4</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>4. Install Rancher</h1></header><p>This section is about how to deploy Rancher for your air gapped environment. An air gapped environment could be where Rancher server will be installed offline, behind a firewall, or behind a proxy. There are <em>tabs</em> for either a high availability (recommended) or a Docker installation.</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Kubernetes Install (Recommended)</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Docker Install</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p>Rancher recommends installing Rancher on a Kubernetes cluster. A highly available Kubernetes Installation is comprised of three nodes running the Rancher server components on a Kubernetes cluster. The persistence layer (etcd) is also replicated on these three nodes, providing redundancy and data duplication in case one of the nodes fails.</p><p>This section describes installing Rancher in five parts:</p><ul><li><a href="#a-add-the-helm-chart-repository">A. Add the Helm Chart Repository</a></li><li><a href="#b-choose-your-ssl-configuration">B. Choose your SSL Configuration</a></li><li><a href="#c-render-the-rancher-helm-template">C. Render the Rancher Helm Template</a></li><li><a href="#d-install-rancher">D. Install Rancher</a></li><li><a href="#e-for-rancher-versions-before-v2-3-0-configure-system-charts">E. For Rancher versions before v2.3.0, Configure System Charts</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-add-the-helm-chart-repository">A. Add the Helm Chart Repository<a class="hash-link" href="#a-add-the-helm-chart-repository" title="Direct link to heading">​</a></h3><p>From a system that has access to the internet, fetch the latest Helm chart and copy the resulting manifests to a system that has access to the Rancher server cluster.</p><ol><li><p>If you haven&#x27;t already, initialize <code>helm</code> locally on a workstation that has internet access. Note: Refer to the <a href="/v2.0-v2.4/getting-started/installation-and-upgrade/resources/choose-a-rancher-version">Helm version requirements</a> to choose a version of Helm to install Rancher.</p><div class="language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm init -c</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Use <code>helm repo add</code> command to add the Helm chart repository that contains charts to install Rancher. For more information about the repository choices and which is best for your use case, see <a href="/v2.0-v2.4/getting-started/installation-and-upgrade/resources/choose-a-rancher-version">Choosing a Version of Rancher</a>.</p><ul><li>Latest: Recommended for trying out the newest features<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm repo add rancher-latest https://releases.rancher.com/server-charts/latest</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>Stable: Recommended for production environments<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm repo add rancher-stable https://releases.rancher.com/server-charts/stable</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>Alpha: Experimental preview of upcoming releases.<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm repo add rancher-stable https://releases.rancher.com/server-charts/stable</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>  Note: Upgrades are not supported to, from, or between Alphas.</li></ul></li><li><p>Fetch the latest Rancher chart. This will pull down the chart and save it in the current directory as a <code>.tgz</code> file.</p></li></ol><div class="language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm fetch rancher-&lt;CHART_REPO&gt;/rancher</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>Want additional options? See the Rancher <a href="/v2.0-v2.4/reference-guides/installation-references/helm-chart-options">Helm chart options</a>.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="b-choose-your-ssl-configuration">B. Choose your SSL Configuration<a class="hash-link" href="#b-choose-your-ssl-configuration" title="Direct link to heading">​</a></h3><p>Rancher Server is designed to be secure by default and requires SSL/TLS configuration.</p><p>When Rancher is installed on an air gapped Kubernetes cluster, there are two recommended options for the source of the certificate.</p><blockquote><p><strong>Note:</strong> If you want terminate SSL/TLS externally, see <a href="/v2.0-v2.4/reference-guides/installation-references/helm-chart-options#external-tls-termination">TLS termination on an External Load Balancer</a>.</p></blockquote><table><thead><tr><th>Configuration</th><th>Chart option</th><th>Description</th><th>Requires cert-manager</th></tr></thead><tbody><tr><td>Rancher Generated Self-Signed Certificates</td><td><code>ingress.tls.source=rancher</code></td><td>Use certificates issued by Rancher&#x27;s generated CA (self signed)<br> This is the <strong>default</strong> and does not need to be added when rendering the Helm template.</td><td>yes</td></tr><tr><td>Certificates from Files</td><td><code>ingress.tls.source=secret</code></td><td>Use your own certificate files by creating Kubernetes Secret(s). <br> This option must be passed when rendering the Rancher Helm template.</td><td>no</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="c-render-the-rancher-helm-template">C. Render the Rancher Helm Template<a class="hash-link" href="#c-render-the-rancher-helm-template" title="Direct link to heading">​</a></h3><p>When setting up the Rancher Helm template, there are several options in the Helm chart that are designed specifically for air gap installations.</p><table><thead><tr><th>Chart Option</th><th>Chart Value</th><th>Description</th></tr></thead><tbody><tr><td><code>certmanager.version</code></td><td><code>&lt;version&gt;</code></td><td>Configure proper Rancher TLS issuer depending of running cert-manager version.</td></tr><tr><td><code>systemDefaultRegistry</code></td><td><code>&lt;REGISTRY.YOURDOMAIN.COM:PORT&gt;</code></td><td>Configure Rancher server to always pull from your private registry when provisioning clusters.</td></tr><tr><td><code>useBundledSystemChart</code></td><td><code>true</code></td><td>Configure Rancher server to use the packaged copy of Helm system charts. The <a href="https://github.com/rancher/system-charts" target="_blank" rel="noopener noreferrer">system charts</a> repository contains all the catalog items required for features such as monitoring, logging, alerting and global DNS. These <a href="https://github.com/rancher/system-charts" target="_blank" rel="noopener noreferrer">Helm charts</a> are located in GitHub, but since you are in an air gapped environment, using the charts that are bundled within Rancher is much easier than setting up a Git mirror. <em>Available as of v2.3.0</em></td></tr></tbody></table><p>Based on the choice your made in <a href="#b-choose-your-ssl-configuration">B. Choose your SSL Configuration</a>, complete one of the procedures below.</p><details id="self-signed" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Option A-Default Self-Signed Certificate</summary><div><div class="collapsibleContent_i85q"><p>By default, Rancher generates a CA and uses cert-manager to issue the certificate for access to the Rancher server interface.</p><blockquote><p><strong>Note:</strong>
Recent changes to cert-manager require an upgrade. If you are upgrading Rancher and using a version of cert-manager older than v0.11.0, please see our <a href="/v2.0-v2.4/getting-started/installation-and-upgrade/resources/upgrade-cert-manager">upgrade cert-manager documentation</a>.</p></blockquote><ol><li><p>From a system connected to the internet, add the cert-manager repo to Helm.</p><div class="language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm repo add jetstack https://charts.jetstack.io</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm repo update</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Fetch the latest cert-manager chart available from the <a href="https://hub.helm.sh/charts/jetstack/cert-manager" target="_blank" rel="noopener noreferrer">Helm chart repository</a>.</p><div class="language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm fetch jetstack/cert-manager --version v0.14.2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Render the cert manager template with the options you would like to use to install the chart. Remember to set the <code>image.repository</code> option to pull the image from your private registry. This will create a <code>cert-manager</code> directory with the Kubernetes manifest files.</p><div class="language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm template ./cert-manager-v0.14.2.tgz --output-dir . \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --name cert-manager --namespace cert-manager \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --set image.repository=&lt;REGISTRY.YOURDOMAIN.COM:PORT&gt;/quay.io/jetstack/cert-manager-controller</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --set webhook.image.repository=&lt;REGISTRY.YOURDOMAIN.COM:PORT&gt;/quay.io/jetstack/cert-manager-webhook</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --set cainjector.image.repository=&lt;REGISTRY.YOURDOMAIN.COM:PORT&gt;/quay.io/jetstack/cert-manager-cainjector</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Download the required CRD file for cert-manager</p><div class="language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl -L -o cert-manager/cert-manager-crd.yaml https://raw.githubusercontent.com/jetstack/cert-manager/release-0.14/deploy/manifests/00-crds.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Render the Rancher template, declaring your chosen options. Use the reference table below to replace each placeholder. Rancher needs to be configured to use the private registry in order to provision any Rancher launched Kubernetes clusters or Rancher tools.</p></li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Placeholder | Description</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">------------|-------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`&lt;VERSION&gt;` | The version number of the output tarball.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`&lt;RANCHER.YOURDOMAIN.COM&gt;` | The DNS name you pointed at your load balancer.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`&lt;REGISTRY.YOURDOMAIN.COM:PORT&gt;` | The DNS name for your private registry.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`&lt;CERTMANAGER_VERSION&gt;` | Cert-manager version running on k8s cluster.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ```plain</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm template ./rancher-&lt;VERSION&gt;.tgz --output-dir . \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> --name rancher \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> --namespace cattle-system \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> --set hostname=&lt;RANCHER.YOURDOMAIN.COM&gt; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> --set certmanager.version=&lt;CERTMANAGER_VERSION&gt; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> --set rancherImage=&lt;REGISTRY.YOURDOMAIN.COM:PORT&gt;/rancher/rancher \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> --set systemDefaultRegistry=&lt;REGISTRY.YOURDOMAIN.COM:PORT&gt; \ # Available as of v2.2.0, set a default private registry to be used in Rancher</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> --set useBundledSystemChart=true # Available as of v2.3.0, use the packaged Rancher system charts</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/details&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;details id=&quot;secret&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;summary&gt;Option B: Certificates From Files using Kubernetes Secrets&lt;/summary&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Create Kubernetes secrets from your own certificates for Rancher to use. The common name for the cert will need to match the `hostname` option in the command below, or the ingress controller will fail to provision the site for Rancher.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Render the Rancher template, declaring your chosen options. Use the reference table below to replace each placeholder. Rancher needs to be configured to use the private registry in order to provision any Rancher launched Kubernetes clusters or Rancher tools.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| Placeholder                      | Description                                     |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| -------------------------------- | ----------------------------------------------- |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| `&lt;VERSION&gt;`                      | The version number of the output tarball.       |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| `&lt;RANCHER.YOURDOMAIN.COM&gt;`       | The DNS name you pointed at your load balancer. |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| `&lt;REGISTRY.YOURDOMAIN.COM:PORT&gt;` | The DNS name for your private registry.         |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```plain</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   helm template ./rancher-&lt;VERSION&gt;.tgz --output-dir . \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --name rancher \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --namespace cattle-system \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --set hostname=&lt;RANCHER.YOURDOMAIN.COM&gt; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --set rancherImage=&lt;REGISTRY.YOURDOMAIN.COM:PORT&gt;/rancher/rancher \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --set ingress.tls.source=secret \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --set systemDefaultRegistry=&lt;REGISTRY.YOURDOMAIN.COM:PORT&gt; \ # Available as of v2.2.0, set a default private registry to be used in Rancher</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --set useBundledSystemChart=true # Available as of v2.3.0, use the packaged Rancher system charts</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you are using a Private CA signed cert, add <code>--set privateCA=true</code> following <code>--set ingress.tls.source=secret</code>:</p><div class="language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   helm template ./rancher-&lt;VERSION&gt;.tgz --output-dir . \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --name rancher \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --namespace cattle-system \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --set hostname=&lt;RANCHER.YOURDOMAIN.COM&gt; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --set rancherImage=&lt;REGISTRY.YOURDOMAIN.COM:PORT&gt;/rancher/rancher \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --set ingress.tls.source=secret \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --set privateCA=true \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --set systemDefaultRegistry=&lt;REGISTRY.YOURDOMAIN.COM:PORT&gt; \ # Available as of v2.2.0, set a default private registry to be used in Rancher</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --set useBundledSystemChart=true # Available as of v2.3.0, use the packaged Rancher system charts</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then refer to <a href="/v2.0-v2.4/getting-started/installation-and-upgrade/resources/add-tls-secrets">Adding TLS Secrets</a> to publish the certificate files so Rancher and the ingress controller can use them.</p></div></div></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="d-install-rancher">D. Install Rancher<a class="hash-link" href="#d-install-rancher" title="Direct link to heading">​</a></h3><p>Copy the rendered manifest directories to a system that has access to the Rancher server cluster to complete installation.</p><p>Use <code>kubectl</code> to create namespaces and apply the rendered manifests.</p><p>If you choose to use self-signed certificates in <a href="#b-choose-your-ssl-configuration">B. Choose your SSL Configuration</a>, install cert-manager.</p><details id="install-cert-manager" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Self-Signed Certificate Installs - Install Cert-manager</summary><div><div class="collapsibleContent_i85q"><p>If you are using self-signed certificates, install cert-manager:</p><ol><li>Create the namespace for cert-manager.</li></ol><div class="language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl create namespace cert-manager</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol><li>Create the cert-manager CustomResourceDefinitions (CRDs).</li></ol><div class="language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl apply -f cert-manager/cert-manager-crd.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p><strong>Important:</strong>
If you are running Kubernetes v1.15 or below, you will need to add the `--validate=false flag to your kubectl apply command above else you will receive a validation error relating to the x-kubernetes-preserve-unknown-fields field in cert-manager’s CustomResourceDefinition resources. This is a benign error and occurs due to the way kubectl performs resource validation.</p></blockquote><ol><li>Launch cert-manager.</li></ol><div class="language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl apply -R -f ./cert-manager</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><p>Install Rancher:</p><div class="language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl create namespace cattle-system</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl -n cattle-system apply -R -f ./rancher</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Step Result:</strong> If you are installing Rancher v2.3.0+, the installation is complete.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="e-for-rancher-versions-before-v230-configure-system-charts">E. For Rancher versions before v2.3.0, Configure System Charts<a class="hash-link" href="#e-for-rancher-versions-before-v230-configure-system-charts" title="Direct link to heading">​</a></h3><p>If you are installing Rancher versions before v2.3.0, you will not be able to use the packaged system charts. Since the Rancher system charts are hosted in Github, an air gapped installation will not be able to access these charts. Therefore, you must <a href="/v2.0-v2.4/getting-started/installation-and-upgrade/resources/local-system-charts">configure the Rancher system charts</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="additional-resources">Additional Resources<a class="hash-link" href="#additional-resources" title="Direct link to heading">​</a></h3><p>These resources could be helpful when installing Rancher:</p><ul><li><a href="/v2.0-v2.4/reference-guides/installation-references/helm-chart-options">Rancher Helm chart options</a></li><li><a href="/v2.0-v2.4/getting-started/installation-and-upgrade/resources/add-tls-secrets">Adding TLS secrets</a></li><li><a href="/v2.0-v2.4/getting-started/installation-and-upgrade/install-upgrade-on-a-kubernetes-cluster/troubleshooting">Troubleshooting Rancher Kubernetes Installations</a></li></ul></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>The Docker installation is for Rancher users that are wanting to <strong>test</strong> out Rancher. Instead of running on a Kubernetes cluster, you install the Rancher server component on a single node using a <code>docker run</code> command. Since there is only one node and a single Docker container, if the node goes down, there is no copy of the etcd data available on other nodes and you will lose all the data of your Rancher server. <strong>Important: If you install Rancher following the Docker installation guide, there is no upgrade path to transition your Docker installation to a Kubernetes Installation.</strong> Instead of running the single node installation, you have the option to follow the Kubernetes Install guide, but only use one node to install Rancher. Afterwards, you can scale up the etcd nodes in your Kubernetes cluster to make it a Kubernetes Installation.</p><p>For security purposes, SSL (Secure Sockets Layer) is required when using Rancher. SSL secures all Rancher network communication, like when you login or interact with a cluster.</p><table><thead><tr><th>Environment Variable Key</th><th>Environment Variable Value</th><th>Description</th></tr></thead><tbody><tr><td><code>CATTLE_SYSTEM_DEFAULT_REGISTRY</code></td><td><code>&lt;REGISTRY.YOURDOMAIN.COM:PORT&gt;</code></td><td>Configure Rancher server to always pull from your private registry when provisioning clusters.</td></tr><tr><td><code>CATTLE_SYSTEM_CATALOG</code></td><td><code>bundled</code></td><td>Configure Rancher server to use the packaged copy of Helm system charts. The <a href="https://github.com/rancher/system-charts" target="_blank" rel="noopener noreferrer">system charts</a> repository contains all the catalog items required for features such as monitoring, logging, alerting and global DNS. These <a href="https://github.com/rancher/system-charts" target="_blank" rel="noopener noreferrer">Helm charts</a> are located in GitHub, but since you are in an air gapped environment, using the charts that are bundled within Rancher is much easier than setting up a Git mirror. <em>Available as of v2.3.0</em></td></tr></tbody></table><blockquote><p><strong>Do you want to...</strong></p><ul><li>Configure custom CA root certificate to access your services? See <a href="/v2.0-v2.4/reference-guides/installation-references/helm-chart-options#additional-trusted-cas">Custom CA root certificate</a>.</li><li>Record all transactions with the Rancher API? See <a href="/v2.0-v2.4/reference-guides/single-node-rancher-in-docker/advanced-options#api-audit-log">API Auditing</a>.</li></ul></blockquote><ul><li>For Rancher before v2.3.0, you will need to mirror the <code>system-charts</code> repository to a location in your network that Rancher can reach. Then, after Rancher is installed, you will need to configure Rancher to use that repository. For details, refer to the documentation on <a href="/v2.0-v2.4/getting-started/installation-and-upgrade/resources/local-system-charts">setting up the system charts for Rancher before v2.3.0.</a></li></ul><p>Choose from the following options:</p><details id="option-a" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Option A-Default Self-Signed Certificate</summary><div><div class="collapsibleContent_i85q"><p>If you are installing Rancher in a development or testing environment where identity verification isn&#x27;t a concern, install Rancher using the self-signed certificate that it generates. This installation option omits the hassle of generating a certificate yourself.</p><p>Log into your Linux host, and then run the installation command below. When entering the command, use the table below to replace each placeholder.</p><table><thead><tr><th>Placeholder</th><th>Description</th></tr></thead><tbody><tr><td><code>&lt;REGISTRY.YOURDOMAIN.COM:PORT&gt;</code></td><td>Your private registry URL and port.</td></tr><tr><td><code>&lt;RANCHER_VERSION_TAG&gt;</code></td><td>The release tag of the <a href="/v2.0-v2.4/getting-started/installation-and-upgrade/resources/choose-a-rancher-version">Rancher version</a> that you want to install.</td></tr></tbody></table><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker run -d --restart=unless-stopped \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -p 80:80 -p 443:443 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -e CATTLE_SYSTEM_DEFAULT_REGISTRY=&lt;REGISTRY.YOURDOMAIN.COM:PORT&gt; \ # Set a default private registry to be used in Rancher</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -e CATTLE_SYSTEM_CATALOG=bundled \ #Available as of v2.3.0, use the packaged Rancher system charts</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;REGISTRY.YOURDOMAIN.COM:PORT&gt;/rancher/rancher:&lt;RANCHER_VERSION_TAG&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><details id="option-b" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Option B-Bring Your Own Certificate: Self-Signed</summary><div><div class="collapsibleContent_i85q"><p>In development or testing environments where your team will access your Rancher server, create a self-signed certificate for use with your install so that your team can verify they&#x27;re connecting to your instance of Rancher.</p><blockquote><p><strong>Prerequisites:</strong>
From a computer with an internet connection, create a self-signed certificate using <a href="https://www.openssl.org/" target="_blank" rel="noopener noreferrer">OpenSSL</a> or another method of your choice.</p><ul><li>The certificate files must be in PEM format.</li><li>In your certificate file, include all intermediate certificates in the chain. Order your certificates with your certificate first, followed by the intermediates. For an example, see <a href="/v2.0-v2.4/getting-started/installation-and-upgrade/other-installation-methods/rancher-on-a-single-node-with-docker/certificate-troubleshooting">Certificate Troubleshooting.</a></li></ul></blockquote><p>After creating your certificate, log into your Linux host, and then run the installation command below. When entering the command, use the table below to replace each placeholder. Use the <code>-v</code> flag and provide the path to your certificates to mount them in your container.</p><table><thead><tr><th>Placeholder</th><th>Description</th></tr></thead><tbody><tr><td><code>&lt;CERT_DIRECTORY&gt;</code></td><td>The path to the directory containing your certificate files.</td></tr><tr><td><code>&lt;FULL_CHAIN.pem&gt;</code></td><td>The path to your full certificate chain.</td></tr><tr><td><code>&lt;PRIVATE_KEY.pem&gt;</code></td><td>The path to the private key for your certificate.</td></tr><tr><td><code>&lt;CA_CERTS&gt;</code></td><td>The path to the certificate authority&#x27;s certificate.</td></tr><tr><td><code>&lt;REGISTRY.YOURDOMAIN.COM:PORT&gt;</code></td><td>Your private registry URL and port.</td></tr><tr><td><code>&lt;RANCHER_VERSION_TAG&gt;</code></td><td>The release tag of the <a href="/v2.0-v2.4/getting-started/installation-and-upgrade/resources/choose-a-rancher-version">Rancher version</a> that you want to install.</td></tr></tbody></table><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker run -d --restart=unless-stopped \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -p 80:80 -p 443:443 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -v /&lt;CERT_DIRECTORY&gt;/&lt;FULL_CHAIN.pem&gt;:/etc/rancher/ssl/cert.pem \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -v /&lt;CERT_DIRECTORY&gt;/&lt;PRIVATE_KEY.pem&gt;:/etc/rancher/ssl/key.pem \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -v /&lt;CERT_DIRECTORY&gt;/&lt;CA_CERTS.pem&gt;:/etc/rancher/ssl/cacerts.pem \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -e CATTLE_SYSTEM_DEFAULT_REGISTRY=&lt;REGISTRY.YOURDOMAIN.COM:PORT&gt; \ # Set a default private registry to be used in Rancher</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -e CATTLE_SYSTEM_CATALOG=bundled \ #Available as of v2.3.0, use the packaged Rancher system charts</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;REGISTRY.YOURDOMAIN.COM:PORT&gt;/rancher/rancher:&lt;RANCHER_VERSION_TAG&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><details id="option-c" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Option C-Bring Your Own Certificate: Signed by Recognized CA</summary><div><div class="collapsibleContent_i85q"><p>In development or testing environments where you&#x27;re exposing an app publicly, use a certificate signed by a recognized CA so that your user base doesn&#x27;t encounter security warnings.</p><blockquote><p><strong>Prerequisite:</strong> The certificate files must be in PEM format.</p></blockquote><p>After obtaining your certificate, log into your Linux host, and then run the installation command below. When entering the command, use the table below to replace each placeholder. Because your certificate is signed by a recognized CA, mounting an additional CA certificate file is unnecessary.</p><table><thead><tr><th>Placeholder</th><th>Description</th></tr></thead><tbody><tr><td><code>&lt;CERT_DIRECTORY&gt;</code></td><td>The path to the directory containing your certificate files.</td></tr><tr><td><code>&lt;FULL_CHAIN.pem&gt;</code></td><td>The path to your full certificate chain.</td></tr><tr><td><code>&lt;PRIVATE_KEY.pem&gt;</code></td><td>The path to the private key for your certificate.</td></tr><tr><td><code>&lt;REGISTRY.YOURDOMAIN.COM:PORT&gt;</code></td><td>Your private registry URL and port.</td></tr><tr><td><code>&lt;RANCHER_VERSION_TAG&gt;</code></td><td>The release tag of the <a href="/v2.0-v2.4/getting-started/installation-and-upgrade/resources/choose-a-rancher-version">Rancher version</a> that you want to install.</td></tr></tbody></table><blockquote><p><strong>Note:</strong> Use the <code>--no-cacerts</code> as argument to the container to disable the default CA certificate generated by Rancher.</p></blockquote><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker run -d --restart=unless-stopped \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -p 80:80 -p 443:443 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --no-cacerts \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -v /&lt;CERT_DIRECTORY&gt;/&lt;FULL_CHAIN.pem&gt;:/etc/rancher/ssl/cert.pem \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -v /&lt;CERT_DIRECTORY&gt;/&lt;PRIVATE_KEY.pem&gt;:/etc/rancher/ssl/key.pem \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -e CATTLE_SYSTEM_DEFAULT_REGISTRY=&lt;REGISTRY.YOURDOMAIN.COM:PORT&gt; \ # Set a default private registry to be used in Rancher</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -e CATTLE_SYSTEM_CATALOG=bundled \ #Available as of v2.3.0, use the packaged Rancher system charts</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;REGISTRY.YOURDOMAIN.COM:PORT&gt;/rancher/rancher:&lt;RANCHER_VERSION_TAG&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><p>If you are installing Rancher v2.3.0+, the installation is complete.</p><p>If you are installing Rancher versions before v2.3.0, you will not be able to use the packaged system charts. Since the Rancher system charts are hosted in Github, an air gapped installation will not be able to access these charts. Therefore, you must <a href="/v2.0-v2.4/getting-started/installation-and-upgrade/resources/local-system-charts">configure the Rancher system charts</a>.</p></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/rancher/rancher-docs/edit/main/versioned_docs/version-2.0-2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/air-gap-helm2/install-rancher.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_eYIM" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vbeJ"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-09-10T07:31:45.000Z">9/10/2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/air-gap-helm2/launch-kubernetes"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">3. Install Kubernetes with RKE (Kubernetes Installs Only)</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/open-ports-with-firewalld"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Opening Ports with firewalld</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#a-add-the-helm-chart-repository" class="table-of-contents__link toc-highlight">A. Add the Helm Chart Repository</a></li><li><a href="#b-choose-your-ssl-configuration" class="table-of-contents__link toc-highlight">B. Choose your SSL Configuration</a></li><li><a href="#c-render-the-rancher-helm-template" class="table-of-contents__link toc-highlight">C. Render the Rancher Helm Template</a></li><li><a href="#d-install-rancher" class="table-of-contents__link toc-highlight">D. Install Rancher</a></li><li><a href="#e-for-rancher-versions-before-v230-configure-system-charts" class="table-of-contents__link toc-highlight">E. For Rancher versions before v2.3.0, Configure System Charts</a></li><li><a href="#additional-resources" class="table-of-contents__link toc-highlight">Additional Resources</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 SUSE Rancher. All Rights Reserved.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.d2604d48.js"></script>
<script src="/assets/js/main.aa78001f.js"></script>
</body>
</html>