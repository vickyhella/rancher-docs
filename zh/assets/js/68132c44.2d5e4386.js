"use strict";(self.webpackChunkrancher_docs=self.webpackChunkrancher_docs||[]).push([[98905],{3905:function(e,t,o){o.d(t,{Zo:function(){return u},kt:function(){return h}});var n=o(67294);function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function r(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function s(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function l(e,t){if(null==e)return{};var o,n,a=function(e,t){if(null==e)return{};var o,n,a={},r=Object.keys(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||(a[o]=e[o]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}var i=n.createContext({}),c=function(e){var t=n.useContext(i),o=t;return e&&(o="function"==typeof e?e(t):s(s({},t),e)),o},u=function(e){var t=c(e.components);return n.createElement(i.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var o=e.components,a=e.mdxType,r=e.originalType,i=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=c(o),h=a,m=p["".concat(i,".").concat(h)]||p[h]||d[h]||r;return o?n.createElement(m,s(s({ref:t},u),{},{components:o})):n.createElement(m,s({ref:t},u))}));function h(e,t){var o=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=o.length,s=new Array(r);s[0]=p;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l.mdxType="string"==typeof e?e:a,s[1]=l;for(var c=2;c<r;c++)s[c]=o[c];return n.createElement.apply(null,s)}return n.createElement.apply(null,o)}p.displayName="MDXCreateElement"},85162:function(e,t,o){o.d(t,{Z:function(){return s}});var n=o(67294),a=o(86010),r="tabItem_Ymn6";function s(e){var t=e.children,o=e.hidden,s=e.className;return n.createElement("div",{role:"tabpanel",className:(0,a.Z)(r,s),hidden:o},t)}},65488:function(e,t,o){o.d(t,{Z:function(){return h}});var n=o(87462),a=o(67294),r=o(86010),s=o(72389),l=o(67392),i=o(7094),c=o(12466),u="tabList__CuJ",d="tabItem_LNqP";function p(e){var t,o,s=e.lazy,p=e.block,h=e.defaultValue,m=e.values,g=e.groupId,k=e.className,f=a.Children.map(e.children,(function(e){if((0,a.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),b=null!=m?m:f.map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes}})),v=(0,l.l)(b,(function(e,t){return e.value===t.value}));if(v.length>0)throw new Error('Docusaurus error: Duplicate values "'+v.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var y=null===h?h:null!=(t=null!=h?h:null==(o=f.find((function(e){return e.props.default})))?void 0:o.props.value)?t:f[0].props.value;if(null!==y&&!b.some((function(e){return e.value===y})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+y+'" but none of its children has the corresponding value. Available values are: '+b.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var w=(0,i.U)(),N=w.tabGroupChoices,S=w.setTabGroupChoices,C=(0,a.useState)(y),P=C[0],T=C[1],A=[],I=(0,c.o5)().blockElementScrollPositionUntilNextRender;if(null!=g){var M=N[g];null!=M&&M!==P&&b.some((function(e){return e.value===M}))&&T(M)}var z=function(e){var t=e.currentTarget,o=A.indexOf(t),n=b[o].value;n!==P&&(I(t),T(n),null!=g&&S(g,String(n)))},_=function(e){var t,o=null;switch(e.key){case"ArrowRight":var n,a=A.indexOf(e.currentTarget)+1;o=null!=(n=A[a])?n:A[0];break;case"ArrowLeft":var r,s=A.indexOf(e.currentTarget)-1;o=null!=(r=A[s])?r:A[A.length-1]}null==(t=o)||t.focus()};return a.createElement("div",{className:(0,r.Z)("tabs-container",u)},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":p},k)},b.map((function(e){var t=e.value,o=e.label,s=e.attributes;return a.createElement("li",(0,n.Z)({role:"tab",tabIndex:P===t?0:-1,"aria-selected":P===t,key:t,ref:function(e){return A.push(e)},onKeyDown:_,onFocus:z,onClick:z},s,{className:(0,r.Z)("tabs__item",d,null==s?void 0:s.className,{"tabs__item--active":P===t})}),null!=o?o:t)}))),s?(0,a.cloneElement)(f.filter((function(e){return e.props.value===P}))[0],{className:"margin-top--md"}):a.createElement("div",{className:"margin-top--md"},f.map((function(e,t){return(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==P})}))))}function h(e){var t=(0,s.Z)();return a.createElement(p,(0,n.Z)({key:String(t)},e))}},33128:function(e,t,o){o.r(t),o.d(t,{assets:function(){return p},contentTitle:function(){return u},default:function(){return g},frontMatter:function(){return c},metadata:function(){return d},toc:function(){return h}});var n=o(87462),a=o(63366),r=(o(67294),o(3905)),s=o(65488),l=o(85162),i=["components"],c={title:"GKE Cluster Configuration Reference"},u=void 0,d={unversionedId:"pages-for-subheaders/gke-cluster-configuration",id:"version-2.5/pages-for-subheaders/gke-cluster-configuration",title:"GKE Cluster Configuration Reference",description:"- We now support private GKE clusters. Note: This advanced setup can require more steps during the cluster provisioning process. For details, see this section.",source:"@site/versioned_docs/version-2.5/pages-for-subheaders/gke-cluster-configuration.md",sourceDirName:"pages-for-subheaders",slug:"/pages-for-subheaders/gke-cluster-configuration",permalink:"/zh/v2.5/pages-for-subheaders/gke-cluster-configuration",draft:!1,editUrl:"https://github.com/rancher/rancher-docs/edit/main/versioned_docs/version-2.5/pages-for-subheaders/gke-cluster-configuration.md",tags:[],version:"2.5",lastUpdatedAt:1663953084,formattedLastUpdatedAt:"2022/9/23",frontMatter:{title:"GKE Cluster Configuration Reference"},sidebar:"tutorialSidebar",previous:{title:"EKS Cluster Configuration Reference",permalink:"/zh/v2.5/reference-guides/cluster-configuration/rancher-server-configuration/eks-cluster-configuration"},next:{title:"Private Clusters",permalink:"/zh/v2.5/reference-guides/cluster-configuration/rancher-server-configuration/gke-cluster-configuration/gke-private-clusters"}},p={},h=[{value:"Kubernetes Version",id:"kubernetes-version",level:3},{value:"Container Address Range",id:"container-address-range",level:3},{value:"Network",id:"network",level:3},{value:"Node Subnet / Subnet",id:"node-subnet--subnet",level:3},{value:"Subnetwork Name",id:"subnetwork-name",level:3},{value:"Ip Aliases",id:"ip-aliases",level:3},{value:"Network Policy",id:"network-policy",level:3},{value:"Node Ipv4 CIDR Block",id:"node-ipv4-cidr-block",level:3},{value:"Cluster Secondary Range Name",id:"cluster-secondary-range-name",level:3},{value:"Cluster Pod Address Range",id:"cluster-pod-address-range",level:3},{value:"Services Secondary Range Name",id:"services-secondary-range-name",level:3},{value:"Service Address Range",id:"service-address-range",level:3},{value:"Private Cluster",id:"private-cluster",level:3},{value:"Enable Private Endpoint",id:"enable-private-endpoint",level:3},{value:"Master IPV4 CIDR Block",id:"master-ipv4-cidr-block",level:3},{value:"Master Authorized Network",id:"master-authorized-network",level:3},{value:"Cluster Addons",id:"cluster-addons",level:3},{value:"Horizontal Pod Autoscaling",id:"horizontal-pod-autoscaling",level:4},{value:"HTTP (L7) Load Balancing",id:"http-l7-load-balancing",level:4},{value:"Network Policy Config (master only)",id:"network-policy-config-master-only",level:4},{value:"Cluster Features (Alpha Features)",id:"cluster-features-alpha-features",level:3},{value:"Logging Service",id:"logging-service",level:3},{value:"Monitoring Service",id:"monitoring-service",level:3},{value:"Maintenance Window",id:"maintenance-window",level:3},{value:"Kubernetes Version",id:"kubernetes-version-1",level:3},{value:"Image Type",id:"image-type",level:3},{value:"Machine Type",id:"machine-type",level:3},{value:"Root Disk Type",id:"root-disk-type",level:3},{value:"Local SSD Disks",id:"local-ssd-disks",level:3},{value:"Preemptible nodes (beta)",id:"preemptible-nodes-beta",level:3},{value:"Taints",id:"taints",level:3},{value:"Node Labels",id:"node-labels",level:3},{value:"Name",id:"name",level:3},{value:"Initial Node Count",id:"initial-node-count",level:3},{value:"Max Pod Per Node",id:"max-pod-per-node",level:3},{value:"Autoscaling",id:"autoscaling",level:3},{value:"Auto Repair",id:"auto-repair",level:3},{value:"Auto Upgrade",id:"auto-upgrade",level:3},{value:"Access Scopes",id:"access-scopes",level:3},{value:"Configuring the Refresh Interval",id:"configuring-the-refresh-interval",level:3},{value:"Location Type",id:"location-type",level:3},{value:"Zone",id:"zone",level:3},{value:"Additional Zones",id:"additional-zones",level:3},{value:"Kubernetes Version",id:"kubernetes-version-2",level:3},{value:"Container Address Range",id:"container-address-range-1",level:3},{value:"Alpha Features",id:"alpha-features",level:3},{value:"Legacy Authorization",id:"legacy-authorization",level:3},{value:"Stackdriver Logging",id:"stackdriver-logging",level:3},{value:"Stackdriver Monitoring",id:"stackdriver-monitoring",level:3},{value:"Kubernetes Dashboard",id:"kubernetes-dashboard",level:3},{value:"Http Load Balancing",id:"http-load-balancing",level:3},{value:"Horizontal Pod Autoscaling",id:"horizontal-pod-autoscaling-1",level:3},{value:"Maintenance Window",id:"maintenance-window-1",level:3},{value:"Network",id:"network-1",level:3},{value:"Node Subnet / Subnet",id:"node-subnet--subnet-1",level:3},{value:"Ip Aliases",id:"ip-aliases-1",level:3},{value:"Pod address range",id:"pod-address-range",level:3},{value:"Service address range",id:"service-address-range-1",level:3},{value:"Cluster Labels",id:"cluster-labels",level:3},{value:"Node Options",id:"node-options",level:2},{value:"Node Count",id:"node-count",level:3},{value:"Machine Type",id:"machine-type-1",level:3},{value:"Image Type",id:"image-type-1",level:3},{value:"Root Disk Type",id:"root-disk-type-1",level:3},{value:"Root Disk Size",id:"root-disk-size",level:3},{value:"Local SSD disks",id:"local-ssd-disks-1",level:3},{value:"Preemptible nodes (beta)",id:"preemptible-nodes-beta-1",level:3},{value:"Auto Upgrade",id:"auto-upgrade-1",level:3},{value:"Auto Repair",id:"auto-repair-1",level:3},{value:"Node Pool Autoscaling",id:"node-pool-autoscaling",level:3},{value:"Taints",id:"taints-1",level:3},{value:"Node Labels",id:"node-labels-1",level:3},{value:"Security Options",id:"security-options",level:2},{value:"Service Account",id:"service-account",level:3},{value:"Access Scopes",id:"access-scopes-1",level:3}],m={toc:h};function g(e){var t=e.components,o=(0,a.Z)(e,i);return(0,r.kt)("wrapper",(0,n.Z)({},m,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(s.Z,{mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"Rancher v2.5.8+",mdxType:"TabItem"},(0,r.kt)("h1",{id:"changes-in-v258"},"Changes in v2.5.8"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"We now support private GKE clusters. Note: This advanced setup can require more steps during the cluster provisioning process. For details, see ",(0,r.kt)("a",{parentName:"li",href:"/zh/v2.5/reference-guides/cluster-configuration/rancher-server-configuration/gke-cluster-configuration/gke-private-clusters"},"this section.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://cloud.google.com/vpc/docs/shared-vpc"},"Shared VPCs")," are now supported."),(0,r.kt)("li",{parentName:"ul"},"We now support more configuration options for Rancher managed GKE clusters:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Project"),(0,r.kt)("li",{parentName:"ul"},"Network policy"),(0,r.kt)("li",{parentName:"ul"},"Network policy config"),(0,r.kt)("li",{parentName:"ul"},"Node pools and node configuration options:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"More image types are available for the nodes"),(0,r.kt)("li",{parentName:"ul"},"The maximum number of pods per node can be configured"))),(0,r.kt)("li",{parentName:"ul"},"Node pools can be added while configuring the GKE cluster"))),(0,r.kt)("li",{parentName:"ul"},"When provisioning a GKE cluster, you can now use reusable cloud credentials instead of using a service account token directly to create the cluster.")),(0,r.kt)("h1",{id:"cluster-location"},"Cluster Location"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Value"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Location Type"),(0,r.kt)("td",{parentName:"tr",align:null},"Zonal or Regional. With GKE, you can create a cluster tailored to the availability requirements of your workload and your budget. By default, a cluster's nodes run in a single compute zone. When multiple zones are selected, the cluster's nodes will span multiple compute zones, while the controlplane is located in a single zone. Regional clusters increase the availability of the controlplane as well. For help choosing the type of cluster availability, refer to ",(0,r.kt)("a",{parentName:"td",href:"https://cloud.google.com/kubernetes-engine/docs/best-practices/scalability#choosing_a_regional_or_zonal_control_plane"},"these docs."))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Zone"),(0,r.kt)("td",{parentName:"tr",align:null},"Each region in Compute engine contains a number of zones. For more information about available regions and zones, refer to ",(0,r.kt)("a",{parentName:"td",href:"https://cloud.google.com/compute/docs/regions-zones#available"},"these docs."))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Additional Zones"),(0,r.kt)("td",{parentName:"tr",align:null},"For zonal clusters, you can select additional zones to create a ",(0,r.kt)("a",{parentName:"td",href:"https://cloud.google.com/kubernetes-engine/docs/concepts/types-of-clusters#multi-zonal_clusters"},"multi-zone cluster."))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Region"),(0,r.kt)("td",{parentName:"tr",align:null},"For ",(0,r.kt)("a",{parentName:"td",href:"https://cloud.google.com/kubernetes-engine/docs/concepts/types-of-clusters#regional_clusters"},"regional clusters,")," you can select a region. For more information about available regions and zones, refer to ",(0,r.kt)("a",{parentName:"td",href:"https://cloud.google.com/compute/docs/regions-zones#available"},"this section"),". The first part of each zone name is the name of the region.")))),(0,r.kt)("h1",{id:"cluster-options"},"Cluster Options"),(0,r.kt)("h3",{id:"kubernetes-version"},"Kubernetes Version"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: yes")),(0,r.kt)("p",null,"For more information on GKE Kubernetes versions, refer to ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/versioning"},"these docs.")),(0,r.kt)("h3",{id:"container-address-range"},"Container Address Range"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: no")),(0,r.kt)("p",null,"The IP address range for pods in the cluster. Must be a valid CIDR range, e.g. 10.42.0.0/16. If not specified, a random range is automatically chosen from 10.0.0.0/8 and will exclude ranges already allocated to VMs, other clusters, or routes. Automatically chosen ranges may conflict with reserved IP addresses, dynamic routes, or routes within VPCs peering with the cluster."),(0,r.kt)("h3",{id:"network"},"Network"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: no")),(0,r.kt)("p",null,"The Compute Engine Network that the cluster connects to. Routes and firewalls will be created using this network. If using ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/vpc/docs/shared-vpc"},"Shared VPCs"),", the VPC networks that are shared to your project will appear here. will be available to select in this field. For more information, refer to ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/vpc/docs/vpc#vpc_networks_and_subnets"},"this page"),"."),(0,r.kt)("h3",{id:"node-subnet--subnet"},"Node Subnet / Subnet"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: no")),(0,r.kt)("p",null,"The Compute Engine subnetwork that the cluster connects to. This subnetwork must belong to the network specified in the ",(0,r.kt)("strong",{parentName:"p"},"Network"),' field. Select an existing subnetwork, or select "Auto Create Subnetwork" to have one automatically created. If not using an existing network, ',(0,r.kt)("strong",{parentName:"p"},"Subnetwork Name")," is required to generate one. If using ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/vpc/docs/shared-vpc"},"Shared VPCs"),', the VPC subnets that are shared to your project will appear here. If using a Shared VPC network, you cannot select "Auto Create Subnetwork". For more information, refer to ',(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/vpc/docs/vpc#vpc_networks_and_subnets"},"this page.")),(0,r.kt)("h3",{id:"subnetwork-name"},"Subnetwork Name"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: no")),(0,r.kt)("p",null,'Automatically create a subnetwork with the provided name. Required if "Auto Create Subnetwork" is selected for ',(0,r.kt)("strong",{parentName:"p"},"Node Subnet")," or ",(0,r.kt)("strong",{parentName:"p"},"Subnet"),". For more information on subnetworks, refer to ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/vpc/docs/vpc#vpc_networks_and_subnets"},"this page.")),(0,r.kt)("h3",{id:"ip-aliases"},"Ip Aliases"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: no")),(0,r.kt)("p",null,"Enable ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/vpc/docs/alias-ip"},"alias IPs"),". This enables VPC-native traffic routing. Required if using ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/vpc/docs/shared-vpc"},"Shared VPCs"),"."),(0,r.kt)("h3",{id:"network-policy"},"Network Policy"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: yes")),(0,r.kt)("p",null,"Enable network policy enforcement on the cluster. A network policy defines the level of communication that can occur between pods and services in the cluster. For more information, refer to ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/docs/how-to/network-policy"},"this page.")),(0,r.kt)("h3",{id:"node-ipv4-cidr-block"},"Node Ipv4 CIDR Block"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: no")),(0,r.kt)("p",null,'The IP address range of the instance IPs in this cluster. Can be set if "Auto Create Subnetwork" is selected for ',(0,r.kt)("strong",{parentName:"p"},"Node Subnet")," or ",(0,r.kt)("strong",{parentName:"p"},"Subnet"),". Must be a valid CIDR range, e.g. 10.96.0.0/14. For more information on how to determine the IP address range, refer to ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/docs/concepts/alias-ips#cluster_sizing"},"this page.")),(0,r.kt)("h3",{id:"cluster-secondary-range-name"},"Cluster Secondary Range Name"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: no")),(0,r.kt)("p",null,"The name of an existing secondary range for Pod IP addresses. If selected, ",(0,r.kt)("strong",{parentName:"p"},"Cluster Pod Address Range")," will automatically be populated. Required if using a Shared VPC network."),(0,r.kt)("h3",{id:"cluster-pod-address-range"},"Cluster Pod Address Range"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: no")),(0,r.kt)("p",null,"The IP address range assigned to pods in the cluster. Must be a valid CIDR range, e.g. 10.96.0.0/11. If not provided, will be created automatically. Must be provided if using a Shared VPC network. For more information on how to determine the IP address range for your pods, refer to ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/docs/concepts/alias-ips#cluster_sizing_secondary_range_pods"},"this section.")),(0,r.kt)("h3",{id:"services-secondary-range-name"},"Services Secondary Range Name"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: no")),(0,r.kt)("p",null,"The name of an existing secondary range for service IP addresses. If selected, ",(0,r.kt)("strong",{parentName:"p"},"Service Address Range")," will be automatically populated. Required if using a Shared VPC network."),(0,r.kt)("h3",{id:"service-address-range"},"Service Address Range"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: no")),(0,r.kt)("p",null,"The address range assigned to the services in the cluster. Must be a valid CIDR range, e.g. 10.94.0.0/18. If not provided, will be created automatically. Must be provided if using a Shared VPC network. For more information on how to determine the IP address range for your services, refer to ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/docs/concepts/alias-ips#cluster_sizing_secondary_range_svcs"},"this section.")),(0,r.kt)("h3",{id:"private-cluster"},"Private Cluster"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: no")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Warning: private clusters require additional planning and configuration outside of Rancher. Refer to the ",(0,r.kt)("a",{parentName:"p",href:"/zh/v2.5/reference-guides/cluster-configuration/rancher-server-configuration/gke-cluster-configuration/gke-private-clusters"},"private cluster guide"),".")),(0,r.kt)("p",null,"Assign nodes only internal IP addresses. Private cluster nodes cannot access the public internet unless additional networking steps are taken in GCP."),(0,r.kt)("h3",{id:"enable-private-endpoint"},"Enable Private Endpoint"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Warning: private clusters require additional planning and configuration outside of Rancher. Refer to the ",(0,r.kt)("a",{parentName:"p",href:"/zh/v2.5/reference-guides/cluster-configuration/rancher-server-configuration/gke-cluster-configuration/gke-private-clusters"},"private cluster guide"),".")),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: no")),(0,r.kt)("p",null,"Locks down external access to the control plane endpoint. Only available if ",(0,r.kt)("strong",{parentName:"p"},"Private Cluster")," is also selected. If selected, and if Rancher does not have direct access to the Virtual Private Cloud network the cluster is running in, Rancher will provide a registration command to run on the cluster to enable Rancher to connect to it."),(0,r.kt)("h3",{id:"master-ipv4-cidr-block"},"Master IPV4 CIDR Block"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: no")),(0,r.kt)("p",null,"The IP range for the control plane VPC."),(0,r.kt)("h3",{id:"master-authorized-network"},"Master Authorized Network"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: yes")),(0,r.kt)("p",null,"Enable control plane authorized networks to block untrusted non-GCP source IPs from accessing the Kubernetes master through HTTPS. If selected, additional authorized networks may be added. If the cluster is created with a public endpoint, this option is useful for locking down access to the public endpoint to only certain networks, such as the network where your Rancher service is running. If the cluster only has a private endpoint, this setting is required."),(0,r.kt)("h1",{id:"additional-options"},"Additional Options"),(0,r.kt)("h3",{id:"cluster-addons"},"Cluster Addons"),(0,r.kt)("p",null,"Additional Kubernetes cluster components. For more information, refer to ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/docs/reference/rest/v1/projects.locations.clusters#Cluster.AddonsConfig"},"this page.")),(0,r.kt)("h4",{id:"horizontal-pod-autoscaling"},"Horizontal Pod Autoscaling"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: yes")),(0,r.kt)("p",null,"The Horizontal Pod Autoscaler changes the shape of your Kubernetes workload by automatically increasing or decreasing the number of Pods in response to the workload's CPU or memory consumption, or in response to custom metrics reported from within Kubernetes or external metrics from sources outside of your cluster. For more information, see ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/docs/concepts/horizontalpodautoscaler"},"this page.")),(0,r.kt)("h4",{id:"http-l7-load-balancing"},"HTTP (L7) Load Balancing"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: yes")),(0,r.kt)("p",null,"HTTP (L7) Load Balancing distributes HTTP and HTTPS traffic to backends hosted on GKE. For more information, refer to ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/docs/tutorials/http-balancer"},"this page.")),(0,r.kt)("h4",{id:"network-policy-config-master-only"},"Network Policy Config (master only)"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: yes")),(0,r.kt)("p",null,"Configuration for NetworkPolicy. This only tracks whether the addon is enabled or not on the master, it does not track whether network policy is enabled for the nodes."),(0,r.kt)("h3",{id:"cluster-features-alpha-features"},"Cluster Features (Alpha Features)"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: no")),(0,r.kt)("p",null,"Turns on all Kubernetes alpha API groups and features for the cluster. When enabled, the cluster cannot be upgraded and will be deleted automatically after 30 days. Alpha clusters are not recommended for production use as they are not covered by the GKE SLA. For more information, refer to ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/docs/concepts/alpha-clusters"},"this page.")),(0,r.kt)("h3",{id:"logging-service"},"Logging Service"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: yes")),(0,r.kt)("p",null,"The logging service the cluster uses to write logs. Use either ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/logging"},"Cloud Logging")," or no logging service in which case no logs are exported from the cluster."),(0,r.kt)("h3",{id:"monitoring-service"},"Monitoring Service"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: yes")),(0,r.kt)("p",null,"The monitoring service the cluster uses to write metrics. Use either ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/monitoring"},"Cloud Monitoring")," or monitoring service in which case no metrics are exported from the cluster."),(0,r.kt)("h3",{id:"maintenance-window"},"Maintenance Window"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: yes")),(0,r.kt)("p",null,"Set the start time for a 4 hour maintenance window. The time is specified in the UTC time zone using the HH:MM format. For more information, refer to ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/docs/concepts/maintenance-windows-and-exclusions"},"this page.")),(0,r.kt)("h1",{id:"node-pools"},"Node Pools"),(0,r.kt)("p",null,"In this section, enter details describing the configuration of each node in the node pool."),(0,r.kt)("h3",{id:"kubernetes-version-1"},"Kubernetes Version"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: yes")),(0,r.kt)("p",null,"The Kubernetes version for each node in the node pool. For more information on GKE Kubernetes versions, refer to ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/versioning"},"these docs.")),(0,r.kt)("h3",{id:"image-type"},"Image Type"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: yes")),(0,r.kt)("p",null,"The node operating system image. For more information for the node image options that GKE offers for each OS, refer to ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/docs/concepts/node-images#available_node_images"},"this page.")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},'Note: the default option is "Container-Optimized OS with Docker". The read-only filesystem on GCP\'s Container-Optimized OS is not compatible with the ',(0,r.kt)("a",{parentName:"p",href:"/zh/v2.0-v2.4/pages-for-subheaders/cluster-logging"},"legacy logging"),' implementation in Rancher. If you need to use the legacy logging feature, select "Ubuntu with Docker" or "Ubuntu with Containerd". The ',(0,r.kt)("a",{parentName:"p",href:"/zh/v2.5/pages-for-subheaders/logging"},"logging feature as of v2.5")," is compatible with the Container-Optimized OS image.")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},'Note: if selecting "Windows Long Term Service Channel" or "Windows Semi-Annual Channel" for the node pool image type, you must also add at least one Container-Optimized OS or Ubuntu node pool.')),(0,r.kt)("h3",{id:"machine-type"},"Machine Type"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: no")),(0,r.kt)("p",null,"The virtualized hardware resources available to node instances. For more information on Google Cloud machine types, refer to ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/compute/docs/machine-types#machine_types"},"this page.")),(0,r.kt)("h3",{id:"root-disk-type"},"Root Disk Type"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: no")),(0,r.kt)("p",null,"Standard persistent disks are backed by standard hard disk drives (HDD), while SSD persistent disks are backed by solid state drives (SSD). For more information, refer to ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/compute/docs/disks"},"this section.")),(0,r.kt)("h3",{id:"local-ssd-disks"},"Local SSD Disks"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: no")),(0,r.kt)("p",null,"Configure each node's local SSD disk storage in GB. Local SSDs are physically attached to the server that hosts your VM instance. Local SSDs have higher throughput and lower latency than standard persistent disks or SSD persistent disks. The data that you store on a local SSD persists only until the instance is stopped or deleted. For more information, see ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/compute/docs/disks#localssds"},"this section.")),(0,r.kt)("h3",{id:"preemptible-nodes-beta"},"Preemptible nodes (beta)"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: no")),(0,r.kt)("p",null,"Preemptible nodes, also called preemptible VMs, are Compute Engine VM instances that last a maximum of 24 hours in general, and provide no availability guarantees. For more information, see ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/docs/how-to/preemptible-vms"},"this page.")),(0,r.kt)("h3",{id:"taints"},"Taints"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: no")),(0,r.kt)("p",null,"When you apply a taint to a node, only Pods that tolerate the taint are allowed to run on the node. In a GKE cluster, you can apply a taint to a node pool, which applies the taint to all nodes in the pool."),(0,r.kt)("h3",{id:"node-labels"},"Node Labels"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: no")),(0,r.kt)("p",null,"You can apply labels to the node pool, which applies the labels to all nodes in the pool."),(0,r.kt)("p",null,"Invalid labels can prevent upgrades or can prevent Rancher from starting. For details on label syntax requirements, see the ",(0,r.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#syntax-and-character-set"},"Kubernetes documentation.")),(0,r.kt)("h1",{id:"group-details"},"Group Details"),(0,r.kt)("p",null,"In this section, enter details describing the node pool."),(0,r.kt)("h3",{id:"name"},"Name"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: no")),(0,r.kt)("p",null,"Enter a name for the node pool."),(0,r.kt)("h3",{id:"initial-node-count"},"Initial Node Count"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: yes")),(0,r.kt)("p",null,"Integer for the starting number of nodes in the node pool."),(0,r.kt)("h3",{id:"max-pod-per-node"},"Max Pod Per Node"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: no")),(0,r.kt)("p",null,"GKE has a hard limit of 110 Pods per node. For more information on the Kubernetes limits, see ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/docs/best-practices/scalability#dimension_limits"},"this section.")),(0,r.kt)("h3",{id:"autoscaling"},"Autoscaling"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: yes")),(0,r.kt)("p",null,"Node pool autoscaling dynamically creates or deletes nodes based on the demands of your workload. For more information, see ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/docs/concepts/cluster-autoscaler"},"this page.")),(0,r.kt)("h3",{id:"auto-repair"},"Auto Repair"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: yes")),(0,r.kt)("p",null,"GKE's node auto-repair feature helps you keep the nodes in your cluster in a healthy, running state. When enabled, GKE makes periodic checks on the health state of each node in your cluster. If a node fails consecutive health checks over an extended time period, GKE initiates a repair process for that node. For more information, see the section on ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/docs/how-to/node-auto-repair"},"auto-repairing nodes.")),(0,r.kt)("h3",{id:"auto-upgrade"},"Auto Upgrade"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: yes")),(0,r.kt)("p",null,"When enabled, the auto-upgrade feature keeps the nodes in your cluster up-to-date with the cluster control plane (master) version when your control plane is ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/upgrades#automatic_cp_upgrades"},"updated on your behalf.")," For more information about auto-upgrading nodes, see ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/docs/how-to/node-auto-upgrades"},"this page.")),(0,r.kt)("h3",{id:"access-scopes"},"Access Scopes"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mutable: no")),(0,r.kt)("p",null,"Access scopes are the legacy method of specifying permissions for your nodes."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Allow default access:")," The default access for new clusters is the ",(0,r.kt)("a",{parentName:"li",href:"https://cloud.google.com/compute/docs/access/service-accounts?hl=en_US#default_service_account"},"Compute Engine default service account.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Allow full access to all Cloud APIs:")," Generally, you can just set the cloud-platform access scope to allow full access to all Cloud APIs, then grant the service account only relevant IAM roles. The combination of access scopes granted to the virtual machine instance and the IAM roles granted to the service account determines the amount of access the service account has for that instance."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Set access for each API:")," Alternatively, you can choose to set specific scopes that permit access to the particular API methods that the service will call.")),(0,r.kt)("p",null,"For more information, see the ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/compute/docs/access/create-enable-service-accounts-for-instances"},"section about enabling service accounts for a VM.")),(0,r.kt)("h3",{id:"configuring-the-refresh-interval"},"Configuring the Refresh Interval"),(0,r.kt)("p",null,'The refresh interval can be configured through the setting "gke-refresh", which is an integer representing seconds.'),(0,r.kt)("p",null,"The default value is 300 seconds."),(0,r.kt)("p",null,"The syncing interval can be changed by running ",(0,r.kt)("inlineCode",{parentName:"p"},"kubectl edit setting gke-refresh"),"."),(0,r.kt)("p",null,"The shorter the refresh window, the less likely any race conditions will occur, but it does increase the likelihood of encountering request limits that may be in place for GCP APIs.")),(0,r.kt)(l.Z,{value:"Rancher before v2.5.8",mdxType:"TabItem"},(0,r.kt)("h1",{id:"labels--annotations"},"Labels & Annotations"),(0,r.kt)("p",null,"Add Kubernetes ",(0,r.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/"},"labels")," or ",(0,r.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/"},"annotations")," to the cluster."),(0,r.kt)("p",null,"Invalid labels can prevent upgrades or can prevent Rancher from starting. For details on label syntax requirements, see the ",(0,r.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#syntax-and-character-set"},"Kubernetes documentation.")),(0,r.kt)("h1",{id:"kubernetes-options"},"Kubernetes Options"),(0,r.kt)("h3",{id:"location-type"},"Location Type"),(0,r.kt)("p",null,"Zonal or Regional. With GKE, you can create a cluster tailored to the availability requirements of your workload and your budget. By default, a cluster's nodes run in a single compute zone. When multiple zones are selected, the cluster's nodes will span multiple compute zones, while the controlplane is located in a single zone. Regional clusters increase the availability of the controlplane as well. For help choosing the type of cluster availability, refer to ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/docs/best-practices/scalability#choosing_a_regional_or_zonal_control_plane"},"these docs.")),(0,r.kt)("p",null,"For ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/docs/concepts/types-of-clusters#regional_clusters"},"regional clusters,")," you can select a region. For more information about available regions and zones, refer to ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/compute/docs/regions-zones#available"},"this section"),". The first part of each zone name is the name of the region."),(0,r.kt)("p",null,"The location type can't be changed after the cluster is created."),(0,r.kt)("h3",{id:"zone"},"Zone"),(0,r.kt)("p",null,"Each region in Compute engine contains a number of zones."),(0,r.kt)("p",null,"For more information about available regions and zones, refer to ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/compute/docs/regions-zones#available"},"these docs.")),(0,r.kt)("h3",{id:"additional-zones"},"Additional Zones"),(0,r.kt)("p",null,"For zonal clusters, you can select additional zones to create a ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/docs/concepts/types-of-clusters#multi-zonal_clusters"},"multi-zone cluster.")),(0,r.kt)("h3",{id:"kubernetes-version-2"},"Kubernetes Version"),(0,r.kt)("p",null,"Link to list of GKE kubernetes versions"),(0,r.kt)("h3",{id:"container-address-range-1"},"Container Address Range"),(0,r.kt)("p",null,"The IP address range for pods in the cluster. Must be a valid CIDR range, e.g. 10.42.0.0/16. If not specified, a random range is automatically chosen from 10.0.0.0/8 and will exclude ranges already allocated to VMs, other clusters, or routes. Automatically chosen ranges may conflict with reserved IP addresses, dynamic routes, or routes within VPCs peering with the cluster."),(0,r.kt)("h3",{id:"alpha-features"},"Alpha Features"),(0,r.kt)("p",null,"Turns on all Kubernetes alpha API groups and features for the cluster. When enabled, the cluster cannot be upgraded and will be deleted automatically after 30 days. Alpha clusters are not recommended for production use as they are not covered by the GKE SLA. For more information, refer to ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/docs/concepts/alpha-clusters"},"this page"),"."),(0,r.kt)("h3",{id:"legacy-authorization"},"Legacy Authorization"),(0,r.kt)("p",null,"This option is deprecated and it is recommended to leave it disabled. For more information, see ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/docs/how-to/hardening-your-cluster#leave_abac_disabled"},"this page.")),(0,r.kt)("h3",{id:"stackdriver-logging"},"Stackdriver Logging"),(0,r.kt)("p",null,"Enable logging with Google Cloud's Operations Suite, formerly called Stackdriver. For details, see the ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/logging/docs/basic-concepts"},"documentation.")),(0,r.kt)("h3",{id:"stackdriver-monitoring"},"Stackdriver Monitoring"),(0,r.kt)("p",null,"Enable monitoring with Google Cloud's Operations Suite, formerly called Stackdriver. For details, see the ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/monitoring/docs/monitoring-overview"},"documentation.")),(0,r.kt)("h3",{id:"kubernetes-dashboard"},"Kubernetes Dashboard"),(0,r.kt)("p",null,"Enable the ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/docs/concepts/dashboards#kubernetes_dashboard"},"Kubernetes dashboard add-on.")," Starting with GKE v1.15, you will no longer be able to enable the Kubernetes Dashboard by using the add-on API."),(0,r.kt)("h3",{id:"http-load-balancing"},"Http Load Balancing"),(0,r.kt)("p",null,"Set up ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/docs/tutorials/http-balancer"},"HTTP(S) load balancing.")," To use Ingress, you must have the HTTP(S) Load Balancing add-on enabled."),(0,r.kt)("h3",{id:"horizontal-pod-autoscaling-1"},"Horizontal Pod Autoscaling"),(0,r.kt)("p",null,"The Horizontal Pod Autoscaler changes the shape of your Kubernetes workload by automatically increasing or decreasing the number of Pods in response to the workload's CPU or memory consumption, or in response to custom metrics reported from within Kubernetes or external metrics from sources outside of your cluster. For more information, see the ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/docs/concepts/horizontalpodautoscaler"},"documentation.")),(0,r.kt)("h3",{id:"maintenance-window-1"},"Maintenance Window"),(0,r.kt)("p",null,"Set the start time for a 4 hour maintenance window. The time is specified in the UTC time zone using the HH:MM format. For more information, refer to ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/docs/concepts/maintenance-windows-and-exclusions"},"this page.")),(0,r.kt)("h3",{id:"network-1"},"Network"),(0,r.kt)("p",null,"The Compute Engine Network that the cluster connects to. Routes and firewalls will be created using this network. If using ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/vpc/docs/shared-vpc"},"Shared VPCs"),", the VPC networks that are shared to your project will appear here. will be available to select in this field. For more information, refer to ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/vpc/docs/vpc#vpc_networks_and_subnets"},"this page"),"."),(0,r.kt)("h3",{id:"node-subnet--subnet-1"},"Node Subnet / Subnet"),(0,r.kt)("p",null,"The Compute Engine subnetwork that the cluster connects to. This subnetwork must belong to the network specified in the ",(0,r.kt)("strong",{parentName:"p"},"Network"),' field. Select an existing subnetwork, or select "Auto Create Subnetwork" to have one automatically created. If not using an existing network, ',(0,r.kt)("strong",{parentName:"p"},"Subnetwork Name")," is required to generate one. If using ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/vpc/docs/shared-vpc"},"Shared VPCs"),', the VPC subnets that are shared to your project will appear here. If using a Shared VPC network, you cannot select "Auto Create Subnetwork". For more information, refer to ',(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/vpc/docs/vpc#vpc_networks_and_subnets"},"this page.")),(0,r.kt)("h3",{id:"ip-aliases-1"},"Ip Aliases"),(0,r.kt)("p",null,"Enable ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/vpc/docs/alias-ip"},"alias IPs"),". This enables VPC-native traffic routing. Required if using ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/vpc/docs/shared-vpc"},"Shared VPCs"),"."),(0,r.kt)("h3",{id:"pod-address-range"},"Pod address range"),(0,r.kt)("p",null,"When you create a VPC-native cluster, you specify a subnet in a VPC network. The cluster uses three unique subnet IP address ranges for nodes, pods, and services. For more information on IP address ranges, see ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/docs/concepts/alias-ips#cluster_sizing"},"this section.")),(0,r.kt)("h3",{id:"service-address-range-1"},"Service address range"),(0,r.kt)("p",null,"When you create a VPC-native cluster, you specify a subnet in a VPC network. The cluster uses three unique subnet IP address ranges for nodes, pods, and services. For more information on IP address ranges, see ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/docs/concepts/alias-ips#cluster_sizing"},"this section.")),(0,r.kt)("h3",{id:"cluster-labels"},"Cluster Labels"),(0,r.kt)("p",null,"A ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/docs/how-to/creating-managing-labels"},"cluster label")," is a key-value pair that helps you organize your Google Cloud clusters. You can attach a label to each resource, then filter the resources based on their labels. Information about labels is forwarded to the billing system, so you can break down your billing charges by label."),(0,r.kt)("h2",{id:"node-options"},"Node Options"),(0,r.kt)("h3",{id:"node-count"},"Node Count"),(0,r.kt)("p",null,"Integer for the starting number of nodes in the node pool."),(0,r.kt)("h3",{id:"machine-type-1"},"Machine Type"),(0,r.kt)("p",null,"For more information on Google Cloud machine types, refer to ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/compute/docs/machine-types#machine_types"},"this page.")),(0,r.kt)("h3",{id:"image-type-1"},"Image Type"),(0,r.kt)("p",null,"Ubuntu or Container-Optimized OS images are available."),(0,r.kt)("p",null,"For more information about GKE node image options, refer to ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/docs/concepts/node-images#available_node_images"},"this page.")),(0,r.kt)("h3",{id:"root-disk-type-1"},"Root Disk Type"),(0,r.kt)("p",null,"Standard persistent disks are backed by standard hard disk drives (HDD), while SSD persistent disks are backed by solid state drives (SSD). For more information, refer to ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/compute/docs/disks"},"this section.")),(0,r.kt)("h3",{id:"root-disk-size"},"Root Disk Size"),(0,r.kt)("p",null,"The size in GB of the ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/compute/docs/disks"},"root disk.")),(0,r.kt)("h3",{id:"local-ssd-disks-1"},"Local SSD disks"),(0,r.kt)("p",null,"Configure each node's local SSD disk storage in GB."),(0,r.kt)("p",null,"Local SSDs are physically attached to the server that hosts your VM instance. Local SSDs have higher throughput and lower latency than standard persistent disks or SSD persistent disks. The data that you store on a local SSD persists only until the instance is stopped or deleted. For more information, see ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/compute/docs/disks#localssds"},"this section.")),(0,r.kt)("h3",{id:"preemptible-nodes-beta-1"},"Preemptible nodes (beta)"),(0,r.kt)("p",null,"Preemptible nodes, also called preemptible VMs, are Compute Engine VM instances that last a maximum of 24 hours in general, and provide no availability guarantees. For more information, see ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/docs/how-to/preemptible-vms"},"this page.")),(0,r.kt)("h3",{id:"auto-upgrade-1"},"Auto Upgrade"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Note: Enabling the Auto Upgrade feature for Nodes is not recommended.")),(0,r.kt)("p",null,"When enabled, the auto-upgrade feature keeps the nodes in your cluster up-to-date with the cluster control plane (master) version when your control plane is ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/upgrades#automatic_cp_upgrades"},"updated on your behalf.")," For more information about auto-upgrading nodes, see ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/docs/how-to/node-auto-upgrades"},"this page.")),(0,r.kt)("h3",{id:"auto-repair-1"},"Auto Repair"),(0,r.kt)("p",null,"GKE's node auto-repair feature helps you keep the nodes in your cluster in a healthy, running state. When enabled, GKE makes periodic checks on the health state of each node in your cluster. If a node fails consecutive health checks over an extended time period, GKE initiates a repair process for that node. For more information, see the section on ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/docs/how-to/node-auto-repair"},"auto-repairing nodes.")),(0,r.kt)("h3",{id:"node-pool-autoscaling"},"Node Pool Autoscaling"),(0,r.kt)("p",null,"Enable node pool autoscaling based on cluster load. For more information, see the documentation on ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/docs/how-to/cluster-autoscaler#adding_a_node_pool_with_autoscaling"},"adding a node pool with autoscaling.")),(0,r.kt)("h3",{id:"taints-1"},"Taints"),(0,r.kt)("p",null,"When you apply a taint to a node, only Pods that tolerate the taint are allowed to run on the node. In a GKE cluster, you can apply a taint to a node pool, which applies the taint to all nodes in the pool."),(0,r.kt)("h3",{id:"node-labels-1"},"Node Labels"),(0,r.kt)("p",null,"You can apply labels to the node pool, which applies the labels to all nodes in the pool."),(0,r.kt)("p",null,"Invalid labels can prevent upgrades or can prevent Rancher from starting. For details on label syntax requirements, see the ",(0,r.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#syntax-and-character-set"},"Kubernetes documentation.")),(0,r.kt)("h2",{id:"security-options"},"Security Options"),(0,r.kt)("h3",{id:"service-account"},"Service Account"),(0,r.kt)("p",null,"Create a ",(0,r.kt)("a",{parentName:"p",href:"https://console.cloud.google.com/projectselector/iam-admin/serviceaccounts"},"Service Account")," with a JSON private key and provide the JSON here. See ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/compute/docs/access/create-enable-service-accounts-for-instances"},"Google Cloud docs")," for more info about creating a service account. These IAM roles are required: Compute Viewer (",(0,r.kt)("inlineCode",{parentName:"p"},"roles/compute.viewer"),"), (Project) Viewer (",(0,r.kt)("inlineCode",{parentName:"p"},"roles/viewer"),"), Kubernetes Engine Admin (",(0,r.kt)("inlineCode",{parentName:"p"},"roles/container.admin"),"), Service Account User (",(0,r.kt)("inlineCode",{parentName:"p"},"roles/iam.serviceAccountUser"),"). More info on roles can be found ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine/docs/how-to/iam-integration"},"here.")),(0,r.kt)("h3",{id:"access-scopes-1"},"Access Scopes"),(0,r.kt)("p",null,"Access scopes are the legacy method of specifying permissions for your nodes."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Allow default access:")," The default access for new clusters is the ",(0,r.kt)("a",{parentName:"li",href:"https://cloud.google.com/compute/docs/access/service-accounts?hl=en_US#default_service_account"},"Compute Engine default service account.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Allow full access to all Cloud APIs:")," Generally, you can just set the cloud-platform access scope to allow full access to all Cloud APIs, then grant the service account only relevant IAM roles. The combination of access scopes granted to the virtual machine instance and the IAM roles granted to the service account determines the amount of access the service account has for that instance."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Set access for each API:")," Alternatively, you can choose to set specific scopes that permit access to the particular API methods that the service will call.")),(0,r.kt)("p",null,"For more information, see the ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/compute/docs/access/create-enable-service-accounts-for-instances"},"section about enabling service accounts for a VM.")))))}g.isMDXComponent=!0}}]);