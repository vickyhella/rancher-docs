"use strict";(self.webpackChunkrancher_docs=self.webpackChunkrancher_docs||[]).push([[68453],{3905:function(e,n,t){t.d(n,{Zo:function(){return d},kt:function(){return u}});var a=t(67294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=a.createContext({}),g=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},d=function(e){var n=g(e.components);return a.createElement(s.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},c=a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=g(t),u=o,h=c["".concat(s,".").concat(u)]||c[u]||p[u]||r;return t?a.createElement(h,i(i({ref:n},d),{},{components:t})):a.createElement(h,i({ref:n},d))}));function u(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var r=t.length,i=new Array(r);i[0]=c;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var g=2;g<r;g++)i[g]=t[g];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}c.displayName="MDXCreateElement"},32897:function(e,n,t){t.r(n),t.d(n,{assets:function(){return d},contentTitle:function(){return s},default:function(){return u},frontMatter:function(){return l},metadata:function(){return g},toc:function(){return p}});var a=t(87462),o=t(63366),r=(t(67294),t(3905)),i=["components"],l={title:"rancher-logging Helm Chart Options"},s=void 0,g={unversionedId:"explanations/integrations-in-rancher/logging/logging-helm-chart-options",id:"version-2.5/explanations/integrations-in-rancher/logging/logging-helm-chart-options",title:"rancher-logging Helm Chart Options",description:"Enable/Disable Windows Node Logging",source:"@site/versioned_docs/version-2.5/explanations/integrations-in-rancher/logging/logging-helm-chart-options.md",sourceDirName:"explanations/integrations-in-rancher/logging",slug:"/explanations/integrations-in-rancher/logging/logging-helm-chart-options",permalink:"/zh/v2.5/explanations/integrations-in-rancher/logging/logging-helm-chart-options",draft:!1,editUrl:"https://github.com/rancher/rancher-docs/edit/main/versioned_docs/version-2.5/explanations/integrations-in-rancher/logging/logging-helm-chart-options.md",tags:[],version:"2.5",lastUpdatedAt:1663953084,formattedLastUpdatedAt:"2022/9/23",frontMatter:{title:"rancher-logging Helm Chart Options"},sidebar:"tutorialSidebar",previous:{title:"Role-based Access Control for Logging",permalink:"/zh/v2.5/explanations/integrations-in-rancher/logging/rbac-for-logging"},next:{title:"Working with Taints and Tolerations",permalink:"/zh/v2.5/explanations/integrations-in-rancher/logging/taints-and-tolerations"}},d={},p=[{value:"Enable/Disable Windows Node Logging",id:"enabledisable-windows-node-logging",level:3},{value:"Working with a Custom Docker Root Directory",id:"working-with-a-custom-docker-root-directory",level:3},{value:"Adding NodeSelector Settings and Tolerations for Custom Taints",id:"adding-nodeselector-settings-and-tolerations-for-custom-taints",level:3},{value:"Enabling the Logging Application to Work with SELinux",id:"enabling-the-logging-application-to-work-with-selinux",level:3},{value:"Additional Logging Sources",id:"additional-logging-sources",level:3}],c={toc:p};function u(e){var n=e.components,t=(0,o.Z)(e,i);return(0,r.kt)("wrapper",(0,a.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h3",{id:"enabledisable-windows-node-logging"},"Enable/Disable Windows Node Logging"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Available as of v2.5.8")),(0,r.kt)("p",null,"You can enable or disable Windows node logging by setting ",(0,r.kt)("inlineCode",{parentName:"p"},"global.cattle.windows.enabled")," to either ",(0,r.kt)("inlineCode",{parentName:"p"},"true")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"false")," in the ",(0,r.kt)("inlineCode",{parentName:"p"},"values.yaml"),"."),(0,r.kt)("p",null,"By default, Windows node logging will be enabled if the Cluster Explorer UI is used to install the logging application on a Windows cluster."),(0,r.kt)("p",null,"In this scenario, setting ",(0,r.kt)("inlineCode",{parentName:"p"},"global.cattle.windows.enabled")," to ",(0,r.kt)("inlineCode",{parentName:"p"},"false")," will disable Windows node logging on the cluster.\nWhen disabled, logs will still be collected from Linux nodes within the Windows cluster."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Note: Currently an ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/rancher/rancher/issues/32325"},"issue")," exists where Windows nodeAgents are not deleted when performing a ",(0,r.kt)("inlineCode",{parentName:"p"},"helm upgrade")," after disabling Windows logging in a Windows cluster. In this scenario, users may need to manually remove the Windows nodeAgents if they are already installed.")),(0,r.kt)("h3",{id:"working-with-a-custom-docker-root-directory"},"Working with a Custom Docker Root Directory"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Applies to v2.5.6+")),(0,r.kt)("p",null,"If using a custom Docker root directory, you can set ",(0,r.kt)("inlineCode",{parentName:"p"},"global.dockerRootDirectory")," in ",(0,r.kt)("inlineCode",{parentName:"p"},"values.yaml"),"."),(0,r.kt)("p",null,"This will ensure that the Logging CRs created will use your specified path rather than the default Docker ",(0,r.kt)("inlineCode",{parentName:"p"},"data-root")," location."),(0,r.kt)("p",null,"Note that this only affects Linux nodes."),(0,r.kt)("p",null,"If there are any Windows nodes in the cluster, the change will not be applicable to those nodes."),(0,r.kt)("h3",{id:"adding-nodeselector-settings-and-tolerations-for-custom-taints"},"Adding NodeSelector Settings and Tolerations for Custom Taints"),(0,r.kt)("p",null,"You can add your own ",(0,r.kt)("inlineCode",{parentName:"p"},"nodeSelector")," settings and add ",(0,r.kt)("inlineCode",{parentName:"p"},"tolerations")," for additional taints by editing the logging Helm chart values. For details, see ",(0,r.kt)("a",{parentName:"p",href:"/zh/v2.5/explanations/integrations-in-rancher/logging/taints-and-tolerations"},"this page.")),(0,r.kt)("h3",{id:"enabling-the-logging-application-to-work-with-selinux"},"Enabling the Logging Application to Work with SELinux"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Available as of v2.5.8")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Requirements:")," Logging v2 was tested with SELinux on RHEL/CentOS 7 and 8.")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Security-Enhanced_Linux"},"Security-Enhanced Linux (SELinux)")," is a security enhancement to Linux. After being historically used by government agencies, SELinux is now industry standard and is enabled by default on CentOS 7 and 8."),(0,r.kt)("p",null,"To use Logging v2 with SELinux, we recommend installing the ",(0,r.kt)("inlineCode",{parentName:"p"},"rancher-selinux")," RPM according to the instructions on ",(0,r.kt)("a",{parentName:"p",href:"/zh/v2.5/pages-for-subheaders/selinux-rpm#installing-the-rancher-selinux-rpm"},"this page.")),(0,r.kt)("p",null,"Then, when installing the logging application, configure the chart to be SELinux aware by changing ",(0,r.kt)("inlineCode",{parentName:"p"},"global.seLinux.enabled")," to ",(0,r.kt)("inlineCode",{parentName:"p"},"true")," in the ",(0,r.kt)("inlineCode",{parentName:"p"},"values.yaml"),"."),(0,r.kt)("h3",{id:"additional-logging-sources"},"Additional Logging Sources"),(0,r.kt)("p",null,"By default, Rancher collects logs for ",(0,r.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/concepts/overview/components/#control-plane-components"},"control plane components")," and ",(0,r.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/concepts/overview/components/#node-components"},"node components")," for all cluster types."),(0,r.kt)("p",null,"In some cases, Rancher may be able to collect additional logs."),(0,r.kt)("p",null,"The following table summarizes the sources where additional logs may be collected for each node types:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Logging Source"),(0,r.kt)("th",{parentName:"tr",align:null},"Linux Nodes (including in Windows cluster)"),(0,r.kt)("th",{parentName:"tr",align:null},"Windows Nodes"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"RKE"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2713"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2713")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"RKE2"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2713"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"K3s"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2713"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"AKS"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2713"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"EKS"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2713"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"GKE"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2713"),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("p",null,"To enable hosted Kubernetes providers as additional logging sources, go to ",(0,r.kt)("strong",{parentName:"p"},"Cluster Explorer > Logging > Chart Options")," and select the ",(0,r.kt)("strong",{parentName:"p"},"Enable enhanced cloud provider logging")," option."),(0,r.kt)("p",null,"When enabled, Rancher collects all additional node and control plane logs the provider has made available, which may vary between providers"),(0,r.kt)("p",null,"If you're already using a cloud provider's own logging solution such as AWS CloudWatch or Google Cloud operations suite (formerly Stackdriver), it is not necessary to enable this option as the native solution will have unrestricted access to all logs."))}u.isMDXComponent=!0}}]);