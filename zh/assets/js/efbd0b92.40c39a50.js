"use strict";(self.webpackChunkrancher_docs=self.webpackChunkrancher_docs||[]).push([[79869],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>d});var r=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=r.createContext({}),c=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},p=function(e){var n=c(e.components);return r.createElement(s.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},k=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),k=c(t),d=a,h=k["".concat(s,".").concat(d)]||k[d]||u[d]||l;return t?r.createElement(h,i(i({ref:n},p),{},{components:t})):r.createElement(h,i({ref:n},p))}));function d(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var l=t.length,i=new Array(l);i[0]=k;var o={};for(var s in n)hasOwnProperty.call(n,s)&&(o[s]=n[s]);o.originalType=e,o.mdxType="string"==typeof e?e:a,i[1]=o;for(var c=2;c<l;c++)i[c]=t[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}k.displayName="MDXCreateElement"},39834:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>l,metadata:()=>o,toc:()=>c});var r=t(87462),a=(t(67294),t(3905));const l={title:"RKE \u96c6\u7fa4\u914d\u7f6e\u53c2\u8003"},i=void 0,o={unversionedId:"reference-guides/cluster-configuration/rancher-server-configuration/rke1-cluster-configuration",id:"reference-guides/cluster-configuration/rancher-server-configuration/rke1-cluster-configuration",title:"RKE \u96c6\u7fa4\u914d\u7f6e\u53c2\u8003",description:"Rancher \u5b89\u88c5 Kubernetes \u65f6\uff0c\u5b83\u4f7f\u7528 RKE \u6216 RKE2 \u4f5c\u4e3a Kubernetes \u53d1\u884c\u7248\u3002",source:"@site/i18n/zh/docusaurus-plugin-content-docs/current/reference-guides/cluster-configuration/rancher-server-configuration/rke1-cluster-configuration.md",sourceDirName:"reference-guides/cluster-configuration/rancher-server-configuration",slug:"/reference-guides/cluster-configuration/rancher-server-configuration/rke1-cluster-configuration",permalink:"/zh/reference-guides/cluster-configuration/rancher-server-configuration/rke1-cluster-configuration",draft:!1,editUrl:"https://github.com/rancher/rancher-docs/edit/main/docs/reference-guides/cluster-configuration/rancher-server-configuration/rke1-cluster-configuration.md",tags:[],version:"current",lastUpdatedAt:1666730466,formattedLastUpdatedAt:"2022\u5e7410\u670825\u65e5",frontMatter:{title:"RKE \u96c6\u7fa4\u914d\u7f6e\u53c2\u8003"},sidebar:"tutorialSidebar",previous:{title:"Rancher Server \u914d\u7f6e",permalink:"/zh/pages-for-subheaders/rancher-server-configuration"},next:{title:"RKE2 \u96c6\u7fa4\u914d\u7f6e\u53c2\u8003",permalink:"/zh/reference-guides/cluster-configuration/rancher-server-configuration/rke2-cluster-configuration"}},s={},c=[{value:"\u6982\u8ff0",id:"\u6982\u8ff0",level:2},{value:"\u5728 Rancher UI \u4e2d\u4f7f\u7528\u8868\u5355\u7f16\u8f91\u96c6\u7fa4",id:"\u5728-rancher-ui-\u4e2d\u4f7f\u7528\u8868\u5355\u7f16\u8f91\u96c6\u7fa4",level:2},{value:"\u4f7f\u7528 YAML \u7f16\u8f91\u96c6\u7fa4",id:"\u4f7f\u7528-yaml-\u7f16\u8f91\u96c6\u7fa4",level:2},{value:"Rancher UI \u4e2d\u7684\u914d\u7f6e\u9009\u9879",id:"rancher-ui-\u4e2d\u7684\u914d\u7f6e\u9009\u9879",level:2},{value:"Kubernetes \u7248\u672c",id:"kubernetes-\u7248\u672c",level:3},{value:"\u7f51\u7edc\u63d0\u4f9b\u5546",id:"\u7f51\u7edc\u63d0\u4f9b\u5546",level:3},{value:"\u9879\u76ee\u7f51\u7edc\u9694\u79bb",id:"\u9879\u76ee\u7f51\u7edc\u9694\u79bb",level:3},{value:"Kubernetes \u4e91\u63d0\u4f9b\u5546",id:"kubernetes-\u4e91\u63d0\u4f9b\u5546",level:3},{value:"\u79c1\u6709\u955c\u50cf\u4ed3\u5e93",id:"\u79c1\u6709\u955c\u50cf\u4ed3\u5e93",level:3},{value:"\u6388\u6743\u96c6\u7fa4\u7aef\u70b9",id:"\u6388\u6743\u96c6\u7fa4\u7aef\u70b9",level:3},{value:"\u8282\u70b9\u6c60",id:"\u8282\u70b9\u6c60",level:3},{value:"NGINX Ingress",id:"nginx-ingress",level:3},{value:"Metrics Server \u76d1\u63a7",id:"metrics-server-\u76d1\u63a7",level:3},{value:"Pod \u5b89\u5168\u7b56\u7565\u652f\u6301",id:"pod-\u5b89\u5168\u7b56\u7565\u652f\u6301",level:3},{value:"\u8282\u70b9\u4e0a\u7684 Docker \u7248\u672c",id:"\u8282\u70b9\u4e0a\u7684-docker-\u7248\u672c",level:3},{value:"Docker \u6839\u76ee\u5f55",id:"docker-\u6839\u76ee\u5f55",level:3},{value:"\u9ed8\u8ba4 Pod \u5b89\u5168\u7b56\u7565",id:"\u9ed8\u8ba4-pod-\u5b89\u5168\u7b56\u7565",level:3},{value:"\u8282\u70b9\u7aef\u53e3\u8303\u56f4",id:"\u8282\u70b9\u7aef\u53e3\u8303\u56f4",level:3},{value:"\u5b9a\u671f etcd \u5feb\u7167",id:"\u5b9a\u671f-etcd-\u5feb\u7167",level:3},{value:"Agent \u73af\u5883\u53d8\u91cf",id:"agent-\u73af\u5883\u53d8\u91cf",level:3},{value:"\u66f4\u65b0 ingress-nginx",id:"\u66f4\u65b0-ingress-nginx",level:3},{value:"RKE \u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u53c2\u8003",id:"rke-\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u53c2\u8003",level:2},{value:"Rancher \u4e2d\u7684\u914d\u7f6e\u6587\u4ef6\u7ed3\u6784",id:"rancher-\u4e2d\u7684\u914d\u7f6e\u6587\u4ef6\u7ed3\u6784",level:3},{value:"\u9ed8\u8ba4 DNS \u63d0\u4f9b\u5546",id:"\u9ed8\u8ba4-dns-\u63d0\u4f9b\u5546",level:3},{value:"YAML \u4e2d\u7684 Rancher \u7279\u5b9a\u53c2\u6570",id:"yaml-\u4e2d\u7684-rancher-\u7279\u5b9a\u53c2\u6570",level:2},{value:"docker_root_dir",id:"docker_root_dir",level:3},{value:"enable_cluster_monitoring",id:"enable_cluster_monitoring",level:3},{value:"enable_network_policy",id:"enable_network_policy",level:3},{value:"local_cluster_auth_endpoint",id:"local_cluster_auth_endpoint",level:3},{value:"\u81ea\u5b9a\u4e49\u7f51\u7edc\u63d2\u4ef6",id:"\u81ea\u5b9a\u4e49\u7f51\u7edc\u63d2\u4ef6",level:3}],p={toc:c};function u(e){let{components:n,...t}=e;return(0,a.kt)("wrapper",(0,r.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Rancher \u5b89\u88c5 Kubernetes \u65f6\uff0c\u5b83\u4f7f\u7528 ",(0,a.kt)("a",{parentName:"p",href:"/zh/pages-for-subheaders/launch-kubernetes-with-rancher"},"RKE")," \u6216 ",(0,a.kt)("a",{parentName:"p",href:"https://docs.rke2.io/"},"RKE2")," \u4f5c\u4e3a Kubernetes \u53d1\u884c\u7248\u3002"),(0,a.kt)("p",null,"\u672c\u6587\u4ecb\u7ecd Rancher \u4e2d\u53ef\u7528\u4e8e\u65b0\u7684\u6216\u73b0\u6709\u7684 RKE Kubernetes \u96c6\u7fa4\u7684\u914d\u7f6e\u9009\u9879\u3002"),(0,a.kt)("h2",{id:"\u6982\u8ff0"},"\u6982\u8ff0"),(0,a.kt)("p",null,"\u4f60\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u4e24\u79cd\u65b9\u5f0f\u4e4b\u4e00\u6765\u914d\u7f6e Kubernetes \u9009\u9879\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#rancher-ui-%E4%B8%AD%E7%9A%84%E9%85%8D%E7%BD%AE%E9%80%89%E9%A1%B9"},"Rancher UI"),"\uff1a\u4f7f\u7528 Rancher UI \u6765\u9009\u62e9\u8bbe\u7f6e Kubernetes \u96c6\u7fa4\u65f6\u5e38\u7528\u7684\u81ea\u5b9a\u4e49\u9009\u9879\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"},"\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6"),"\uff1a\u9ad8\u7ea7\u7528\u6237\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a RKE \u914d\u7f6e\u6587\u4ef6\uff0c\u800c\u4e0d\u662f\u4f7f\u7528 Rancher UI \u6765\u4e3a\u96c6\u7fa4\u9009\u62e9 Kubernetes \u9009\u9879\u3002\u914d\u7f6e\u6587\u4ef6\u53ef\u4ee5\u8ba9\u4f60\u4f7f\u7528 YAML \u6765\u6307\u5b9a RKE \u5b89\u88c5\u4e2d\u53ef\u7528\u7684\u4efb\u4f55\u9009\u9879\uff08\u9664\u4e86 system_images \u914d\u7f6e\uff09\u3002")),(0,a.kt)("p",null,"RKE \u96c6\u7fa4\u914d\u7f6e\u9009\u9879\u5d4c\u5957\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"rancher_kubernetes_engine_config")," \u53c2\u6570\u4e0b\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605",(0,a.kt)("a",{parentName:"p",href:"#%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"},"\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6"),"\u3002"),(0,a.kt)("p",null,"\u5728 ",(0,a.kt)("a",{parentName:"p",href:"/zh/pages-for-subheaders/launch-kubernetes-with-rancher"},"RKE \u542f\u52a8\u7684\u96c6\u7fa4"),"\u4e2d\uff0c\u4f60\u53ef\u4ee5\u7f16\u8f91\u4efb\u4f55\u540e\u7eed\u5269\u4f59\u7684\u9009\u9879\u3002"),(0,a.kt)("p",null,"\u6709\u5173 RKE \u914d\u7f6e\u6587\u4ef6\u8bed\u6cd5\u7684\u793a\u4f8b\uff0c\u8bf7\u53c2\u9605 ",(0,a.kt)("a",{parentName:"p",href:"https://rancher.com/docs/rke/latest/en/example-yamls/"},"RKE \u6587\u6863"),"\u3002"),(0,a.kt)("p",null,"Rancher UI \u4e2d\u7684\u8868\u5355\u4e0d\u5305\u62ec\u914d\u7f6e RKE \u7684\u6240\u6709\u9ad8\u7ea7\u9009\u9879\u3002\u6709\u5173 YAML \u4e2d RKE Kubernetes \u96c6\u7fa4\u7684\u53ef\u914d\u7f6e\u9009\u9879\u7684\u5b8c\u6574\u53c2\u8003\uff0c\u8bf7\u53c2\u9605 ",(0,a.kt)("a",{parentName:"p",href:"https://rancher.com/docs/rke/latest/en/config-options/"},"RKE \u6587\u6863"),"\u3002"),(0,a.kt)("h2",{id:"\u5728-rancher-ui-\u4e2d\u4f7f\u7528\u8868\u5355\u7f16\u8f91\u96c6\u7fa4"},"\u5728 Rancher UI \u4e2d\u4f7f\u7528\u8868\u5355\u7f16\u8f91\u96c6\u7fa4"),(0,a.kt)("p",null,"\u8981\u7f16\u8f91\u4f60\u7684\u96c6\u7fa4\uff1a"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u5728\u5de6\u4e0a\u89d2\uff0c\u5355\u51fb ",(0,a.kt)("strong",{parentName:"li"},"\u2630 > \u96c6\u7fa4\u7ba1\u7406"),"\u3002"),(0,a.kt)("li",{parentName:"ol"},"\u8f6c\u5230\u8981\u914d\u7f6e\u7684\u96c6\u7fa4\uff0c\u7136\u540e\u5355\u51fb ",(0,a.kt)("strong",{parentName:"li"},"\u22ee > \u7f16\u8f91\u914d\u7f6e"),"\u3002")),(0,a.kt)("h2",{id:"\u4f7f\u7528-yaml-\u7f16\u8f91\u96c6\u7fa4"},"\u4f7f\u7528 YAML \u7f16\u8f91\u96c6\u7fa4"),(0,a.kt)("p",null,"\u9ad8\u7ea7\u7528\u6237\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a RKE \u914d\u7f6e\u6587\u4ef6\uff0c\u800c\u4e0d\u662f\u4f7f\u7528 Rancher UI \u6765\u4e3a\u96c6\u7fa4\u9009\u62e9 Kubernetes \u9009\u9879\u3002\u914d\u7f6e\u6587\u4ef6\u53ef\u4ee5\u8ba9\u4f60\u4f7f\u7528 YAML \u6765\u6307\u5b9a RKE \u5b89\u88c5\u4e2d\u53ef\u7528\u7684\u4efb\u4f55\u9009\u9879\uff08\u9664\u4e86 system_images \u914d\u7f6e\uff09\u3002"),(0,a.kt)("p",null,"RKE \u96c6\u7fa4\uff08\u4e5f\u79f0\u4e3a RKE1 \u96c6\u7fa4\uff09\u7684\u7f16\u8f91\u65b9\u5f0f\u4e0e RKE2 \u548c K3s \u96c6\u7fa4\u4e0d\u540c\u3002"),(0,a.kt)("p",null,"\u8981\u76f4\u63a5\u4ece Rancher UI \u7f16\u8f91 RKE \u914d\u7f6e\u6587\u4ef6\uff1a"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u70b9\u51fb ",(0,a.kt)("strong",{parentName:"li"},"\u2630 > \u96c6\u7fa4\u7ba1\u7406"),"\u3002"),(0,a.kt)("li",{parentName:"ol"},"\u8f6c\u5230\u8981\u914d\u7f6e\u7684 RKE \u96c6\u7fa4\u3002\u5355\u51fb\u5e76\u5355\u51fb ",(0,a.kt)("strong",{parentName:"li"},"\u22ee > \u7f16\u8f91\u914d\u7f6e"),"\u3002\u4f60\u5c06\u4f1a\u8f6c\u5230 RKE \u914d\u7f6e\u8868\u5355\u3002\u8bf7\u6ce8\u610f\uff0c\u7531\u4e8e\u96c6\u7fa4\u914d\u7f6e\u5728 Rancher 2.6 \u4e2d\u53d1\u751f\u4e86\u53d8\u66f4\uff0c",(0,a.kt)("strong",{parentName:"li"},"\u22ee > \u4ee5 YAML \u6587\u4ef6\u7f16\u8f91"),"\u53ef\u7528\u4e8e\u914d\u7f6e RKE2 \u96c6\u7fa4\uff0c\u4f46\u4e0d\u80fd\u7528\u4e8e\u7f16\u8f91 RKE1 \u914d\u7f6e\u3002"),(0,a.kt)("li",{parentName:"ol"},"\u5728\u914d\u7f6e\u8868\u5355\u4e2d\uff0c\u5411\u4e0b\u6eda\u52a8\u5e76\u5355\u51fb",(0,a.kt)("strong",{parentName:"li"},"\u4ee5 YAML \u6587\u4ef6\u7f16\u8f91"),"\u3002"),(0,a.kt)("li",{parentName:"ol"},"\u7f16\u8f91 ",(0,a.kt)("inlineCode",{parentName:"li"},"rancher_kubernetes_engine_config")," \u53c2\u6570\u4e0b\u7684 RKE \u9009\u9879\u3002")),(0,a.kt)("h2",{id:"rancher-ui-\u4e2d\u7684\u914d\u7f6e\u9009\u9879"},"Rancher UI \u4e2d\u7684\u914d\u7f6e\u9009\u9879"),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"\u4e00\u4e9b\u9ad8\u7ea7\u914d\u7f6e\u9009\u9879\u6ca1\u6709\u5728 Rancher UI \u8868\u5355\u4e2d\u5f00\u653e\uff0c\u4f46\u4f60\u53ef\u4ee5\u901a\u8fc7\u5728 YAML \u4e2d\u7f16\u8f91 RKE \u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u6765\u542f\u7528\u8fd9\u4e9b\u9009\u9879\u3002\u6709\u5173 YAML \u4e2d RKE Kubernetes \u96c6\u7fa4\u7684\u53ef\u914d\u7f6e\u9009\u9879\u7684\u5b8c\u6574\u53c2\u8003\uff0c\u8bf7\u53c2\u9605 ",(0,a.kt)("a",{parentName:"p",href:"https://rancher.com/docs/rke/latest/en/config-options/"},"RKE \u6587\u6863"),"\u3002")),(0,a.kt)("h3",{id:"kubernetes-\u7248\u672c"},"Kubernetes \u7248\u672c"),(0,a.kt)("p",null,"\u8fd9\u6307\u7684\u662f\u96c6\u7fa4\u8282\u70b9\u4e0a\u5b89\u88c5\u7684 Kubernetes \u7248\u672c\u3002Rancher \u57fa\u4e8e ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/rancher/hyperkube"},"hyperkube")," \u6253\u5305\u4e86\u81ea\u5df1\u7684 Kubernetes \u7248\u672c\u3002"),(0,a.kt)("p",null,"\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605",(0,a.kt)("a",{parentName:"p",href:"/zh/getting-started/installation-and-upgrade/upgrade-and-roll-back-kubernetes"},"\u5347\u7ea7 Kubernetes"),"\u3002"),(0,a.kt)("h3",{id:"\u7f51\u7edc\u63d0\u4f9b\u5546"},"\u7f51\u7edc\u63d0\u4f9b\u5546"),(0,a.kt)("p",null,"\u8fd9\u6307\u7684\u662f\u96c6\u7fa4\u4f7f\u7528\u7684",(0,a.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/concepts/cluster-administration/networking/"},"\u7f51\u7edc\u63d0\u4f9b\u5546"),"\u3002\u6709\u5173\u4e0d\u540c\u7f51\u7edc\u63d0\u4f9b\u5546\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b\u6211\u4eec\u7684",(0,a.kt)("a",{parentName:"p",href:"/zh/faq/container-network-interface-providers"},"\u7f51\u7edc\u5e38\u89c1\u95ee\u9898\u89e3\u7b54"),"\u3002"),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"\u542f\u52a8\u96c6\u7fa4\u540e\uff0c\u4f60\u65e0\u6cd5\u66f4\u6539\u7f51\u7edc\u63d0\u4f9b\u5546\u3002\u7531\u4e8e Kubernetes \u4e0d\u5141\u8bb8\u5728\u7f51\u7edc\u63d0\u4f9b\u5546\u4e4b\u95f4\u5207\u6362\uff0c\u56e0\u6b64\uff0c\u8bf7\u8c28\u614e\u9009\u62e9\u8981\u4f7f\u7528\u7684\u7f51\u7edc\u63d0\u4f9b\u5546\u3002\u4f7f\u7528\u7f51\u7edc\u63d0\u4f9b\u5546\u521b\u5efa\u96c6\u7fa4\u540e\uff0c\u5982\u679c\u4f60\u9700\u8981\u66f4\u6539\u7f51\u7edc\u63d0\u4f9b\u5546\uff0c\u4f60\u5c06\u9700\u8981\u62c6\u9664\u6574\u4e2a\u96c6\u7fa4\u4ee5\u53ca\u5176\u4e2d\u7684\u6240\u6709\u5e94\u7528\u3002")),(0,a.kt)("p",null,"Rancher \u4e0e\u4ee5\u4e0b\u5f00\u7bb1\u5373\u7528\u7684\u7f51\u7edc\u63d0\u4f9b\u5546\u517c\u5bb9\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/projectcalico/canal"},"Canal")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/coreos/flannel#flannel"},"Flannel")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://docs.projectcalico.org/v3.11/introduction/"},"Calico")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/weaveworks/weave"},"Weave"))),(0,a.kt)("admonition",{title:"Weave \u6ce8\u610f\u4e8b\u9879\uff1a",type:"note"},(0,a.kt)("p",{parentName:"admonition"},"\u9009\u62e9 Weave \u4f5c\u4e3a\u7f51\u7edc\u63d0\u4f9b\u5546\u65f6\uff0cRancher \u5c06\u901a\u8fc7\u751f\u6210\u968f\u673a\u5bc6\u7801\u6765\u81ea\u52a8\u542f\u7528\u52a0\u5bc6\u3002\u5982\u679c\u4f60\u60f3\u624b\u52a8\u6307\u5b9a\u5bc6\u7801\uff0c\u8bf7\u53c2\u9605\u4f7f\u7528",(0,a.kt)("a",{parentName:"p",href:"#rke-%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%8F%82%E8%80%83"},"\u914d\u7f6e\u6587\u4ef6"),"\u548c ",(0,a.kt)("a",{parentName:"p",href:"https://rancher.com/docs/rke/latest/en/config-options/add-ons/network-plugins/#weave-network-plug-in-options"},"Weave \u7f51\u7edc\u63d2\u4ef6\u9009\u9879"),"\u6765\u914d\u7f6e\u96c6\u7fa4\u3002")),(0,a.kt)("h3",{id:"\u9879\u76ee\u7f51\u7edc\u9694\u79bb"},"\u9879\u76ee\u7f51\u7edc\u9694\u79bb"),(0,a.kt)("p",null,"\u5982\u679c\u4f60\u7684\u7f51\u7edc\u63d0\u4f9b\u5546\u5141\u8bb8\u9879\u76ee\u7f51\u7edc\u9694\u79bb\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9\u542f\u7528\u6216\u7981\u7528\u9879\u76ee\u95f4\u7684\u901a\u4fe1\u3002"),(0,a.kt)("p",null,"\u5982\u679c\u4f60\u4f7f\u7528\u652f\u6301\u6267\u884c Kubernetes \u7f51\u7edc\u7b56\u7565\u7684 RKE \u7f51\u7edc\u63d2\u4ef6\uff08\u4f8b\u5982 Canal \u6216 Cisco ACI \u63d2\u4ef6\uff09\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528\u9879\u76ee\u7f51\u7edc\u9694\u79bb\u3002"),(0,a.kt)("h3",{id:"kubernetes-\u4e91\u63d0\u4f9b\u5546"},"Kubernetes \u4e91\u63d0\u4f9b\u5546"),(0,a.kt)("p",null,"\u4f60\u53ef\u4ee5\u914d\u7f6e ",(0,a.kt)("a",{parentName:"p",href:"/zh/pages-for-subheaders/set-up-cloud-providers"},"Kubernetes \u4e91\u63d0\u4f9b\u5546"),"\u3002\u5982\u679c\u4f60\u60f3\u5728 Kubernetes \u4e2d\u4f7f\u7528\u52a8\u6001\u914d\u7f6e\u7684",(0,a.kt)("a",{parentName:"p",href:"/zh/pages-for-subheaders/create-kubernetes-persistent-storage"},"\u5377\u548c\u5b58\u50a8"),"\uff0c\u4f60\u901a\u5e38\u9700\u8981\u9009\u62e9\u7279\u5b9a\u7684\u4e91\u63d0\u4f9b\u5546\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4f60\u60f3\u4f7f\u7528 Amazon EBS\uff0c\u5219\u9700\u8981\u9009\u62e9 ",(0,a.kt)("inlineCode",{parentName:"p"},"aws")," \u4e91\u63d0\u4f9b\u5546\u3002"),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"\u5982\u679c\u4f60\u8981\u4f7f\u7528\u7684\u4e91\u63d0\u4f9b\u5546\u672a\u4f5c\u4e3a\u9009\u9879\u5217\u51fa\uff0c\u4f60\u9700\u8981\u4f7f\u7528",(0,a.kt)("a",{parentName:"p",href:"#%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"},"\u914d\u7f6e\u6587\u4ef6\u9009\u9879"),"\u6765\u914d\u7f6e\u4e91\u63d0\u4f9b\u5546\u3002\u8bf7\u53c2\u8003 ",(0,a.kt)("a",{parentName:"p",href:"https://rancher.com/docs/rke/latest/en/config-options/cloud-providers/"},"RKE \u4e91\u63d0\u4f9b\u5546\u6587\u6863"),"\u6765\u4e86\u89e3\u5982\u4f55\u914d\u7f6e\u4e91\u63d0\u4f9b\u5546\u3002")),(0,a.kt)("h3",{id:"\u79c1\u6709\u955c\u50cf\u4ed3\u5e93"},"\u79c1\u6709\u955c\u50cf\u4ed3\u5e93"),(0,a.kt)("p",null,"\u96c6\u7fa4\u7ea7\u522b\u7684\u79c1\u6709\u955c\u50cf\u4ed3\u5e93\u914d\u7f6e\u4ec5\u80fd\u7528\u4e8e\u914d\u7f6e\u96c6\u7fa4\u3002"),(0,a.kt)("p",null,"\u5728 Rancher \u4e2d\u8bbe\u7f6e\u79c1\u6709\u955c\u50cf\u4ed3\u5e93\u7684\u4e3b\u8981\u65b9\u6cd5\u6709\u4e24\u79cd\uff1a\u901a\u8fc7",(0,a.kt)("a",{parentName:"p",href:"/zh/how-to-guides/new-user-guides/authentication-permissions-and-global-configuration/global-default-private-registry"},"\u5168\u5c40\u9ed8\u8ba4\u955c\u50cf\u4ed3\u5e93"),"\u4e2d\u7684",(0,a.kt)("strong",{parentName:"p"},"\u8bbe\u7f6e"),"\u9009\u9879\u5361\u8bbe\u7f6e\u5168\u5c40\u9ed8\u8ba4\u955c\u50cf\u4ed3\u5e93\uff0c\u4ee5\u53ca\u5728\u96c6\u7fa4\u7ea7\u522b\u8bbe\u7f6e\u7684\u9ad8\u7ea7\u9009\u9879\u4e2d\u8bbe\u7f6e\u79c1\u6709\u955c\u50cf\u4ed3\u5e93\u3002\u5168\u5c40\u9ed8\u8ba4\u955c\u50cf\u4ed3\u5e93\u53ef\u4ee5\u7528\u4e8e\u79bb\u7ebf\u8bbe\u7f6e\uff0c\u4e0d\u9700\u8981\u51ed\u8bc1\u7684\u955c\u50cf\u4ed3\u5e93\u3002\u800c\u96c6\u7fa4\u7ea7\u79c1\u6709\u955c\u50cf\u4ed3\u5e93\u7528\u4e8e\u6240\u6709\u9700\u8981\u51ed\u8bc1\u7684\u79c1\u6709\u955c\u50cf\u4ed3\u5e93\u3002"),(0,a.kt)("p",null,"\u5982\u679c\u4f60\u7684\u79c1\u6709\u955c\u50cf\u4ed3\u5e93\u9700\u8981\u51ed\u8bc1\uff0c\u4e3a\u4e86\u5c06\u51ed\u8bc1\u4f20\u9012\u7ed9 Rancher\uff0c\u4f60\u9700\u8981\u7f16\u8f91\u6bcf\u4e2a\u9700\u8981\u4ece\u4ed3\u5e93\u4e2d\u62c9\u53d6\u955c\u50cf\u7684\u96c6\u7fa4\u7684\u96c6\u7fa4\u9009\u9879\u3002"),(0,a.kt)("p",null,"\u79c1\u6709\u955c\u50cf\u4ed3\u5e93\u7684\u914d\u7f6e\u9009\u9879\u80fd\u8ba9 Rancher \u77e5\u9053\u8981\u4ece\u54ea\u91cc\u62c9\u53d6\u7528\u4e8e\u96c6\u7fa4\u7684",(0,a.kt)("a",{parentName:"p",href:"https://rancher.com/docs/rke/latest/en/config-options/system-images/"},"\u7cfb\u7edf\u955c\u50cf"),"\u6216",(0,a.kt)("a",{parentName:"p",href:"https://rancher.com/docs/rke/latest/en/config-options/add-ons/"},"\u9644\u52a0\u7ec4\u4ef6\u955c\u50cf"),"\u3002"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u7cfb\u7edf\u955c\u50cf"),"\u662f\u7ef4\u62a4 Kubernetes \u96c6\u7fa4\u6240\u9700\u7684\u7ec4\u4ef6\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u9644\u52a0\u7ec4\u4ef6"),"\u7528\u4e8e\u90e8\u7f72\u591a\u4e2a\u96c6\u7fa4\u7ec4\u4ef6\uff0c\u5305\u62ec\u7f51\u7edc\u63d2\u4ef6\u3001ingress controller\u3001DNS \u63d0\u4f9b\u5546\u6216 metrics server\u3002")),(0,a.kt)("p",null,"\u6709\u5173\u4e3a\u96c6\u7fa4\u914d\u7f6e\u671f\u95f4\u5e94\u7528\u7684\u7ec4\u4ef6\u8bbe\u7f6e\u79c1\u6709\u955c\u50cf\u4ed3\u5e93\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605",(0,a.kt)("a",{parentName:"p",href:"https://rancher.com/docs/rke/latest/en/config-options/private-registries/"},"\u79c1\u6709\u955c\u50cf\u4ed3\u5e93\u7684 RKE \u6587\u6863"),"\u3002"),(0,a.kt)("p",null,"Rancher v2.6 \u5f15\u5165\u4e86",(0,a.kt)("a",{parentName:"p",href:"https://rancher.com/docs/rke/latest/en/config-options/private-registries/#amazon-elastic-container-registry-ecr-private-registry-setup"},"\u4e3a RKE \u96c6\u7fa4\u914d\u7f6e ECR \u955c\u50cf\u4ed3\u5e93"),"\u7684\u529f\u80fd\u3002"),(0,a.kt)("h3",{id:"\u6388\u6743\u96c6\u7fa4\u7aef\u70b9"},"\u6388\u6743\u96c6\u7fa4\u7aef\u70b9"),(0,a.kt)("p",null,"\u6388\u6743\u96c6\u7fa4\u7aef\u70b9\uff08ACE\uff09\u53ef\u7528\u4e8e\u76f4\u63a5\u8bbf\u95ee Kubernetes API server\uff0c\u800c\u65e0\u9700\u901a\u8fc7 Rancher \u8fdb\u884c\u901a\u4fe1\u3002"),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"\u6388\u6743\u96c6\u7fa4\u7aef\u70b9\u4ec5\u9002\u7528\u4e8e Rancher \u542f\u52a8\u7684 Kubernetes \u96c6\u7fa4\uff0c\u5373\u53ea\u9002\u7528\u4e8e Rancher ",(0,a.kt)("a",{parentName:"p",href:"/zh/pages-for-subheaders/rancher-manager-architecture#%E9%85%8D%E7%BD%AE-kubernetes-%E9%9B%86%E7%BE%A4%E7%9A%84%E5%B7%A5%E5%85%B7"},"\u4f7f\u7528 RKE")," \u6765\u914d\u7f6e\u7684\u96c6\u7fa4\u3002\u5b83\u4e0d\u9002\u7528\u4e8e\u6258\u7ba1\u5728 Kubernetes \u63d0\u4f9b\u5546\u4e2d\u7684\u96c6\u7fa4\uff0c\u4f8b\u5982 Amazon \u7684 EKS\u3002")),(0,a.kt)("p",null,"\u5728 Rancher \u542f\u52a8\u7684 Kubernetes \u96c6\u7fa4\u4e2d\uff0c\u5b83\u9ed8\u8ba4\u542f\u7528\uff0c\u4f7f\u7528\u5177\u6709 ",(0,a.kt)("inlineCode",{parentName:"p"},"controlplane")," \u89d2\u8272\u7684\u8282\u70b9\u7684 IP \u548c\u9ed8\u8ba4\u7684 Kubernetes \u81ea\u7b7e\u540d\u8bc1\u4e66\u3002"),(0,a.kt)("p",null,"\u6709\u5173\u6388\u6743\u96c6\u7fa4\u7aef\u70b9\u7684\u5de5\u4f5c\u539f\u7406\u4ee5\u53ca\u4f7f\u7528\u7684\u539f\u56e0\uff0c\u8bf7\u53c2\u9605",(0,a.kt)("a",{parentName:"p",href:"/zh/pages-for-subheaders/rancher-manager-architecture#4-%E6%8E%88%E6%9D%83%E9%9B%86%E7%BE%A4%E7%AB%AF%E7%82%B9"},"\u67b6\u6784\u4ecb\u7ecd"),"\u3002"),(0,a.kt)("p",null,"\u6211\u4eec\u5efa\u8bae\u4f7f\u7528\u5177\u6709\u6388\u6743\u96c6\u7fa4\u7aef\u70b9\u7684\u8d1f\u8f7d\u5747\u8861\u5668\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605",(0,a.kt)("a",{parentName:"p",href:"/zh/reference-guides/rancher-manager-architecture/architecture-recommendations#%E6%8E%88%E6%9D%83%E9%9B%86%E7%BE%A4%E7%AB%AF%E7%82%B9%E6%9E%B6%E6%9E%84"},"\u63a8\u8350\u7684\u67b6\u6784"),"\u3002"),(0,a.kt)("h3",{id:"\u8282\u70b9\u6c60"},"\u8282\u70b9\u6c60"),(0,a.kt)("p",null,"\u6709\u5173\u4f7f\u7528 Rancher UI \u5728 RKE \u96c6\u7fa4\u4e2d\u8bbe\u7f6e\u8282\u70b9\u6c60\u7684\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605",(0,a.kt)("a",{parentName:"p",href:"/zh/pages-for-subheaders/use-new-nodes-in-an-infra-provider"},"\u6b64\u9875\u9762"),"\u3002"),(0,a.kt)("h3",{id:"nginx-ingress"},"NGINX Ingress"),(0,a.kt)("p",null,"\u5982\u679c\u4f60\u60f3\u4f7f\u7528\u9ad8\u53ef\u7528\u6027\u914d\u7f6e\u6765\u53d1\u5e03\u5e94\u7528\uff0c\u5e76\u4e14\u4f60\u4f7f\u7528\u6ca1\u6709\u539f\u751f\u8d1f\u8f7d\u5747\u8861\u529f\u80fd\u7684\u4e91\u63d0\u4f9b\u5546\u6765\u6258\u7ba1\u4e3b\u673a\uff0c\u8bf7\u542f\u7528\u6b64\u9009\u9879\u4ee5\u5728\u96c6\u7fa4\u4e2d\u4f7f\u7528 NGINX Ingress\u3002"),(0,a.kt)("h3",{id:"metrics-server-\u76d1\u63a7"},"Metrics Server \u76d1\u63a7"),(0,a.kt)("p",null,"\u8fd9\u662f\u542f\u7528\u6216\u7981\u7528 ",(0,a.kt)("a",{parentName:"p",href:"https://rancher.com/docs/rke/latest/en/config-options/add-ons/metrics-server/"},"Metrics Server")," \u7684\u9009\u9879\u3002"),(0,a.kt)("p",null,"\u6bcf\u4e2a\u80fd\u591f\u4f7f\u7528 RKE \u542f\u52a8\u96c6\u7fa4\u7684\u4e91\u63d0\u4f9b\u5546\u90fd\u53ef\u4ee5\u6536\u96c6\u6307\u6807\u5e76\u76d1\u63a7\u4f60\u7684\u96c6\u7fa4\u8282\u70b9\u3002\u5982\u679c\u542f\u7528\u6b64\u9009\u9879\uff0c\u4f60\u53ef\u4ee5\u4ece\u4f60\u7684\u4e91\u63d0\u4f9b\u5546\u95e8\u6237\u67e5\u770b\u4f60\u7684\u8282\u70b9\u6307\u6807\u3002"),(0,a.kt)("h3",{id:"pod-\u5b89\u5168\u7b56\u7565\u652f\u6301"},"Pod \u5b89\u5168\u7b56\u7565\u652f\u6301"),(0,a.kt)("p",null,"\u4e3a\u96c6\u7fa4\u542f\u7528 ",(0,a.kt)("a",{parentName:"p",href:"/zh/how-to-guides/new-user-guides/authentication-permissions-and-global-configuration/create-pod-security-policies"},"pod \u5b89\u5168\u7b56\u7565"),"\u3002\u542f\u7528\u6b64\u9009\u9879\u540e\uff0c\u4f7f\u7528",(0,a.kt)("strong",{parentName:"p"},"\u9ed8\u8ba4 Pod \u5b89\u5168\u7b56\u7565"),"\u4e0b\u62c9\u83dc\u5355\u9009\u62e9\u4e00\u4e2a\u7b56\u7565\u3002"),(0,a.kt)("p",null,"\u4f60\u5fc5\u987b\u6709\u5df2\u914d\u7f6e\u7684 Pod \u5b89\u5168\u7b56\u7565\u624d\u80fd\u4f7f\u7528\u6b64\u9009\u9879\u3002"),(0,a.kt)("h3",{id:"\u8282\u70b9\u4e0a\u7684-docker-\u7248\u672c"},"\u8282\u70b9\u4e0a\u7684 Docker \u7248\u672c"),(0,a.kt)("p",null,"\u8868\u793a\u662f\u5426\u5141\u8bb8\u8282\u70b9\u8fd0\u884c Rancher \u4e0d\u6b63\u5f0f\u652f\u6301\u7684 Docker \u7248\u672c\u3002"),(0,a.kt)("p",null,"\u5982\u679c\u4f60\u9009\u62e9\u4f7f\u7528\u652f\u6301\u7684 Docker \u7248\u672c\uff0cRancher \u4f1a\u7981\u6b62 pod \u8fd0\u884c\u5728\u5b89\u88c5\u4e86\u4e0d\u652f\u6301\u7684 Docker \u7248\u672c\u7684\u8282\u70b9\u4e0a\u3002"),(0,a.kt)("p",null,"\u5982\u9700\u4e86\u89e3\u5404\u4e2a Rancher \u7248\u672c\u901a\u8fc7\u4e86\u54ea\u4e9b Docker \u7248\u672c\u6d4b\u8bd5\uff0c\u8bf7\u53c2\u89c1",(0,a.kt)("a",{parentName:"p",href:"https://rancher.com/support-maintenance-terms/"},"\u652f\u6301\u548c\u7ef4\u62a4\u6761\u6b3e"),"\u3002"),(0,a.kt)("h3",{id:"docker-\u6839\u76ee\u5f55"},"Docker \u6839\u76ee\u5f55"),(0,a.kt)("p",null,"\u5982\u679c\u8981\u6dfb\u52a0\u5230\u96c6\u7fa4\u7684\u8282\u70b9\u4e3a Docker \u914d\u7f6e\u4e86\u975e\u9ed8\u8ba4 Docker \u6839\u76ee\u5f55\uff08\u9ed8\u8ba4\u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"/var/lib/docker"),"\uff09\uff0c\u8bf7\u5728\u6b64\u9009\u9879\u4e2d\u6307\u5b9a\u6b63\u786e\u7684 Docker \u6839\u76ee\u5f55\u3002"),(0,a.kt)("h3",{id:"\u9ed8\u8ba4-pod-\u5b89\u5168\u7b56\u7565"},"\u9ed8\u8ba4 Pod \u5b89\u5168\u7b56\u7565"),(0,a.kt)("p",null,"\u5982\u679c\u4f60\u542f\u7528\u4e86 ",(0,a.kt)("strong",{parentName:"p"},"Pod \u5b89\u5168\u7b56\u7565\u652f\u6301"),"\uff0c\u8bf7\u4f7f\u7528\u6b64\u4e0b\u62c9\u83dc\u5355\u9009\u62e9\u5e94\u7528\u4e8e\u96c6\u7fa4\u7684 pod \u5b89\u5168\u7b56\u7565\u3002"),(0,a.kt)("h3",{id:"\u8282\u70b9\u7aef\u53e3\u8303\u56f4"},"\u8282\u70b9\u7aef\u53e3\u8303\u56f4"),(0,a.kt)("p",null,"\u66f4\u6539\u53ef\u7528\u4e8e ",(0,a.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/concepts/services-networking/service/#nodeport"},"NodePort \u670d\u52a1"),"\u7684\u7aef\u53e3\u8303\u56f4\u7684\u9009\u9879\u3002\u9ed8\u8ba4\u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"30000-32767"),"\u3002"),(0,a.kt)("h3",{id:"\u5b9a\u671f-etcd-\u5feb\u7167"},"\u5b9a\u671f etcd \u5feb\u7167"),(0,a.kt)("p",null,"\u542f\u7528\u6216\u7981\u7528",(0,a.kt)("a",{parentName:"p",href:"https://rancher.com/docs/rke/latest/en/etcd-snapshots/#etcd-recurring-snapshots"},"\u5b9a\u671f etcd \u5feb\u7167"),"\u7684\u9009\u9879\u3002"),(0,a.kt)("h3",{id:"agent-\u73af\u5883\u53d8\u91cf"},"Agent \u73af\u5883\u53d8\u91cf"),(0,a.kt)("p",null,"\u4e3a ",(0,a.kt)("a",{parentName:"p",href:"/zh/how-to-guides/new-user-guides/launch-kubernetes-with-rancher/about-rancher-agents"},"rancher agent")," \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u7684\u9009\u9879\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u952e\u503c\u5bf9\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u3002\u5982\u679c Rancher Agent \u9700\u8981\u4f7f\u7528\u4ee3\u7406\u4e0e Rancher Server \u901a\u4fe1\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528 Agent \u73af\u5883\u53d8\u91cf\u8bbe\u7f6e ",(0,a.kt)("inlineCode",{parentName:"p"},"HTTP_PROXY"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"HTTPS_PROXY")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"NO_PROXY")," \u73af\u5883\u53d8\u91cf\u3002"),(0,a.kt)("h3",{id:"\u66f4\u65b0-ingress-nginx"},"\u66f4\u65b0 ingress-nginx"),(0,a.kt)("p",null,"\u4f7f\u7528 Kubernetes 1.16 \u4e4b\u524d\u7248\u672c\u521b\u5efa\u7684\u96c6\u7fa4\u5c06\u5177\u6709 ",(0,a.kt)("inlineCode",{parentName:"p"},"OnDelete"),"\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"ingress-nginx")," ",(0,a.kt)("inlineCode",{parentName:"p"},"updateStrategy"),"\u3002\u4f7f\u7528 Kubernetes 1.16 \u6216\u66f4\u9ad8\u7248\u672c\u521b\u5efa\u7684\u96c6\u7fa4\u5c06\u5177\u6709 ",(0,a.kt)("inlineCode",{parentName:"p"},"RollingUpdate"),"\u3002"),(0,a.kt)("p",null,"\u5982\u679c ",(0,a.kt)("inlineCode",{parentName:"p"},"ingress-nginx")," \u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"updateStrategy")," \u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"OnDelete"),"\uff0c\u5219\u9700\u8981\u5220\u9664\u8fd9\u4e9b pod \u4ee5\u83b7\u5f97 deployment \u6b63\u786e\u7684\u7248\u672c\u3002"),(0,a.kt)("h2",{id:"rke-\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u53c2\u8003"},"RKE \u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u53c2\u8003"),(0,a.kt)("p",null,"\u9ad8\u7ea7\u7528\u6237\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a RKE \u914d\u7f6e\u6587\u4ef6\uff0c\u800c\u4e0d\u662f\u4f7f\u7528 Rancher UI \u6765\u4e3a\u96c6\u7fa4\u9009\u62e9 Kubernetes \u9009\u9879\u3002\u914d\u7f6e\u6587\u4ef6\u53ef\u4ee5\u8ba9\u4f60\u5728 RKE \u5b89\u88c5\u4e2d\u8bbe\u7f6e\u4efb\u4f55",(0,a.kt)("a",{parentName:"p",href:"https://rancher.com/docs/rke/latest/en/config-options/"},"\u53ef\u7528\u9009\u9879"),"\uff08",(0,a.kt)("inlineCode",{parentName:"p"},"system_images")," \u914d\u7f6e\u9664\u5916\uff09\u3002\u4f7f\u7528 Rancher UI \u6216 API \u521b\u5efa\u96c6\u7fa4\u65f6\uff0c\u4e0d\u652f\u6301 ",(0,a.kt)("inlineCode",{parentName:"p"},"system_images")," \u9009\u9879\u3002"),(0,a.kt)("p",null,"\u6709\u5173 YAML \u4e2d RKE Kubernetes \u96c6\u7fa4\u7684\u53ef\u914d\u7f6e\u9009\u9879\u7684\u5b8c\u6574\u53c2\u8003\uff0c\u8bf7\u53c2\u9605 ",(0,a.kt)("a",{parentName:"p",href:"https://rancher.com/docs/rke/latest/en/config-options/"},"RKE \u6587\u6863"),"\u3002"),(0,a.kt)("h3",{id:"rancher-\u4e2d\u7684\u914d\u7f6e\u6587\u4ef6\u7ed3\u6784"},"Rancher \u4e2d\u7684\u914d\u7f6e\u6587\u4ef6\u7ed3\u6784"),(0,a.kt)("p",null,"RKE\uff08Rancher Kubernetes Engine\uff09\u662f Rancher \u7528\u6765\u914d\u7f6e Kubernetes \u96c6\u7fa4\u7684\u5de5\u5177\u3002\u8fc7\u53bb\uff0cRancher \u7684\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u4e0e ",(0,a.kt)("a",{parentName:"p",href:"https://rancher.com/docs/rke/latest/en/example-yamls/"},"RKE \u914d\u7f6e\u6587\u4ef6"),"\u7684\u7ed3\u6784\u662f\u4e00\u81f4\u7684\u3002\u4f46\u7531\u4e8e Rancher \u6587\u4ef6\u7ed3\u6784\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u56e0\u6b64\u5728 Rancher \u4e2d\uff0cRKE \u96c6\u7fa4\u914d\u7f6e\u9879\u4e0e\u975e RKE \u914d\u7f6e\u9879\u662f\u5206\u5f00\u7684\u3002\u6240\u4ee5\uff0c\u4f60\u7684\u96c6\u7fa4\u914d\u7f6e\u9700\u8981\u5d4c\u5957\u5728\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"rancher_kubernetes_engine_config")," \u53c2\u6570\u4e0b\u3002\u4f7f\u7528\u65e9\u671f\u7248\u672c\u7684 Rancher \u521b\u5efa\u7684\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u9700\u8981\u9488\u5bf9\u8fd9\u79cd\u683c\u5f0f\u8fdb\u884c\u66f4\u65b0\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u793a\u4f8b\uff1a"),(0,a.kt)("details",{id:"v2.3.0-cluster-config-file"},(0,a.kt)("summary",null,"\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u793a\u4f8b"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"#\n# Cluster Config\n#\ndocker_root_dir: /var/lib/docker\nenable_cluster_alerting: false\nenable_cluster_monitoring: false\nenable_network_policy: false\nlocal_cluster_auth_endpoint:\n  enabled: true\n#\n# Rancher Config\n#\nrancher_kubernetes_engine_config: # Your RKE template config goes here.\n  addon_job_timeout: 30\n  authentication:\n    strategy: x509\n  ignore_docker_version: true\n#\n# # \u76ee\u524d\u4ec5\u652f\u6301 Nginx ingress provider\n# # \u8981\u7981\u7528 Ingress controller\uff0c\u8bbe\u7f6e `provider: none`\n# # \u8981\u5728\u6307\u5b9a\u8282\u70b9\u4e0a\u7981\u7528 Ingress\uff0c\u4f7f\u7528 node_selector\uff0c\u4f8b\u5982\uff1a\n#    provider: nginx\n#    node_selector:\n#      app: ingress\n#\n  ingress:\n    provider: nginx\n  kubernetes_version: v1.15.3-rancher3-1\n  monitoring:\n    provider: metrics-server\n#\n#   If you are using calico on AWS\n#\n#    network:\n#      plugin: calico\n#      calico_network_provider:\n#        cloud_provider: aws\n#\n# # To specify flannel interface\n#\n#    network:\n#      plugin: flannel\n#      flannel_network_provider:\n#      iface: eth1\n#\n# # To specify flannel interface for canal plugin\n#\n#    network:\n#      plugin: canal\n#      canal_network_provider:\n#        iface: eth1\n#\n  network:\n    options:\n      flannel_backend_type: vxlan\n    plugin: canal\n#\n#    services:\n#      kube-api:\n#        service_cluster_ip_range: 10.43.0.0/16\n#      kube-controller:\n#        cluster_cidr: 10.42.0.0/16\n#        service_cluster_ip_range: 10.43.0.0/16\n#      kubelet:\n#        cluster_domain: cluster.local\n#        cluster_dns_server: 10.43.0.10\n#\n  services:\n    etcd:\n      backup_config:\n        enabled: true\n        interval_hours: 12\n        retention: 6\n        safe_timestamp: false\n      creation: 12h\n      extra_args:\n        election-timeout: 5000\n        heartbeat-interval: 500\n      gid: 0\n      retention: 72h\n      snapshot: false\n      uid: 0\n    kube_api:\n      always_pull_images: false\n      pod_security_policy: false\n      service_node_port_range: 30000-32767\n  ssh_agent_auth: false\nwindows_prefered_cluster: false\n"))),(0,a.kt)("h3",{id:"\u9ed8\u8ba4-dns-\u63d0\u4f9b\u5546"},"\u9ed8\u8ba4 DNS \u63d0\u4f9b\u5546"),(0,a.kt)("p",null,"\u4e0b\u8868\u663e\u793a\u4e86\u9ed8\u8ba4\u90e8\u7f72\u7684 DNS \u63d0\u4f9b\u5546\u3002\u6709\u5173\u5982\u4f55\u914d\u7f6e\u4e0d\u540c DNS \u63d0\u4f9b\u5546\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 ",(0,a.kt)("a",{parentName:"p",href:"https://rancher.com/docs/rke/latest/en/config-options/add-ons/dns/"},"DNS \u63d0\u4f9b\u5546\u76f8\u5173\u7684 RKE \u6587\u6863"),"\u3002CoreDNS \u53ea\u80fd\u5728 Kubernetes v1.12.0 \u53ca\u66f4\u9ad8\u7248\u672c\u4e0a\u4f7f\u7528\u3002"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Rancher \u7248\u672c"),(0,a.kt)("th",{parentName:"tr",align:null},"Kubernetes \u7248\u672c"),(0,a.kt)("th",{parentName:"tr",align:null},"\u9ed8\u8ba4 DNS \u63d0\u4f9b\u5546"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"v2.2.5 \u53ca\u66f4\u9ad8\u7248\u672c"),(0,a.kt)("td",{parentName:"tr",align:null},"v1.14.0 \u53ca\u66f4\u9ad8\u7248\u672c"),(0,a.kt)("td",{parentName:"tr",align:null},"CoreDNS")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"v2.2.5 \u53ca\u66f4\u9ad8\u7248\u672c"),(0,a.kt)("td",{parentName:"tr",align:null},"v1.13.x \u53ca\u66f4\u4f4e\u7248\u672c"),(0,a.kt)("td",{parentName:"tr",align:null},"kube-dns")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"v2.2.4 \u53ca\u66f4\u4f4e\u7248\u672c"),(0,a.kt)("td",{parentName:"tr",align:null},"\u4efb\u610f"),(0,a.kt)("td",{parentName:"tr",align:null},"kube-dns")))),(0,a.kt)("h2",{id:"yaml-\u4e2d\u7684-rancher-\u7279\u5b9a\u53c2\u6570"},"YAML \u4e2d\u7684 Rancher \u7279\u5b9a\u53c2\u6570"),(0,a.kt)("p",null,"\u9664\u4e86 RKE \u914d\u7f6e\u6587\u4ef6\u9009\u9879\u5916\uff0c\u8fd8\u6709\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6 (YAML) \u4e2d\u914d\u7f6e\u7684 Rancher \u7279\u5b9a\u8bbe\u7f6e\u5982\u4e0b\u3002"),(0,a.kt)("h3",{id:"docker_root_dir"},"docker_root_dir"),(0,a.kt)("p",null,"\u8bf7\u53c2\u9605 ",(0,a.kt)("a",{parentName:"p",href:"#docker-%E6%A0%B9%E7%9B%AE%E5%BD%95"},"Docker \u6839\u76ee\u5f55"),"\u3002"),(0,a.kt)("h3",{id:"enable_cluster_monitoring"},"enable_cluster_monitoring"),(0,a.kt)("p",null,"\u542f\u7528\u6216\u7981\u7528",(0,a.kt)("a",{parentName:"p",href:"/zh/pages-for-subheaders/monitoring-and-alerting"},"\u96c6\u7fa4\u76d1\u63a7"),"\u7684\u9009\u9879\u3002"),(0,a.kt)("h3",{id:"enable_network_policy"},"enable_network_policy"),(0,a.kt)("p",null,"\u542f\u7528\u6216\u7981\u7528\u9879\u76ee\u7f51\u7edc\u9694\u79bb\u7684\u9009\u9879\u3002"),(0,a.kt)("p",null,"\u5982\u679c\u4f60\u4f7f\u7528\u652f\u6301\u6267\u884c Kubernetes \u7f51\u7edc\u7b56\u7565\u7684 RKE \u7f51\u7edc\u63d2\u4ef6\uff08\u4f8b\u5982 Canal \u6216 Cisco ACI \u63d2\u4ef6\uff09\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528\u9879\u76ee\u7f51\u7edc\u9694\u79bb\u3002"),(0,a.kt)("h3",{id:"local_cluster_auth_endpoint"},"local_cluster_auth_endpoint"),(0,a.kt)("p",null,"\u8bf7\u53c2\u9605",(0,a.kt)("a",{parentName:"p",href:"#%E6%8E%88%E6%9D%83%E9%9B%86%E7%BE%A4%E7%AB%AF%E7%82%B9"},"\u6388\u6743\u96c6\u7fa4\u7aef\u70b9"),"\u3002"),(0,a.kt)("p",null,"\u793a\u4f8b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'local_cluster_auth_endpoint:\n  enabled: true\n  fqdn: "FQDN"\n  ca_certs: |-\n    -----BEGIN CERTIFICATE-----\n    ...\n    -----END CERTIFICATE-----\n')),(0,a.kt)("h3",{id:"\u81ea\u5b9a\u4e49\u7f51\u7edc\u63d2\u4ef6"},"\u81ea\u5b9a\u4e49\u7f51\u7edc\u63d2\u4ef6"),(0,a.kt)("p",null,"\u4f60\u53ef\u4ee5\u4f7f\u7528 RKE \u7684",(0,a.kt)("a",{parentName:"p",href:"https://rancher.com/docs/rke/latest/en/config-options/add-ons/user-defined-add-ons/"},"\u7528\u6237\u5b9a\u4e49\u7684\u9644\u52a0\u7ec4\u4ef6\u529f\u80fd"),"\u6765\u6dfb\u52a0\u81ea\u5b9a\u4e49\u7f51\u7edc\u63d2\u4ef6\u3002\u90e8\u7f72 Kubernetes \u96c6\u7fa4\u4e4b\u540e\uff0c\u4f60\u53ef\u4ee5\u5b9a\u4e49\u8981\u90e8\u7f72\u7684\u4efb\u4f55\u9644\u52a0\u7ec4\u4ef6\u3002"),(0,a.kt)("p",null,"\u6709\u4e24\u79cd\u65b9\u6cd5\u53ef\u4ee5\u6307\u5b9a\u9644\u52a0\u7ec4\u4ef6\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://rancher.com/docs/rke/latest/en/config-options/add-ons/user-defined-add-ons/#in-line-add-ons"},"\u5185\u5d4c\u9644\u52a0\u7ec4\u4ef6")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://rancher.com/docs/rke/latest/en/config-options/add-ons/user-defined-add-ons/#referencing-yaml-files-for-add-ons"},"\u4e3a\u9644\u52a0\u7ec4\u4ef6\u5f15\u7528 YAML \u6587\u4ef6"))),(0,a.kt)("p",null,"\u6709\u5173\u5982\u4f55\u901a\u8fc7\u7f16\u8f91 ",(0,a.kt)("inlineCode",{parentName:"p"},"cluster.yml")," \u6765\u914d\u7f6e\u81ea\u5b9a\u4e49\u7f51\u7edc\u63d2\u4ef6\u7684\u793a\u4f8b\uff0c\u8bf7\u53c2\u9605 ",(0,a.kt)("a",{parentName:"p",href:"https://rancher.com/docs/rke/latest/en/config-options/add-ons/network-plugins/custom-network-plugin-example"},"RKE \u6587\u6863"),"\u3002"))}u.isMDXComponent=!0}}]);