<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-keycloak-oidc">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<link rel="search" type="application/opensearchdescription+xml" title="Rancher Manager" href="/opensearch.xml"><title data-rh="true">Configure Keycloak (OIDC) | Rancher Manager</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://docs.ranchermanager.rancher.io//how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-keycloak-oidc"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Configure Keycloak (OIDC) | Rancher Manager"><meta data-rh="true" name="description" content="Create a Keycloak OpenID Connect (OIDC) client and configure Rancher to work with Keycloak. By the end your users will be able to sign into Rancher using their Keycloak logins"><meta data-rh="true" property="og:description" content="Create a Keycloak OpenID Connect (OIDC) client and configure Rancher to work with Keycloak. By the end your users will be able to sign into Rancher using their Keycloak logins"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="http://docs.ranchermanager.rancher.io//how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-keycloak-oidc"><link data-rh="true" rel="alternate" href="http://docs.ranchermanager.rancher.io//how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-keycloak-oidc" hreflang="en"><link data-rh="true" rel="alternate" href="http://docs.ranchermanager.rancher.io//how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-keycloak-oidc" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://30NEY6C9UY-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.9543bcfd.css">
<link rel="preload" href="/assets/js/runtime~main.217a7f9f.js" as="script">
<link rel="preload" href="/assets/js/main.00d8b9dc.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/rancher-logo-horiz-color.svg" alt="logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/rancher-logo-horiz-color.svg" alt="logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><div class="navbar__item dropdown dropdown--hoverable"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/">v2.6</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-keycloak-oidc">v2.6</a></li><li><a class="dropdown__link" href="/v2.5">v2.5</a></li><li><a class="dropdown__link" href="/v2.0-v2.4">v2.0-v2.4</a></li><li><a class="dropdown__link" href="/versions">All versions</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__docs navbar__link--active" href="/">Docs</a><a href="https://github.com/rancher/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__github btn btn-secondary icon-github">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Rancher 2.6</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/getting-started">Getting Started</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/how-to-guides">How-to Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;How-to Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/pages-for-subheaders/new-user-guides">New User Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;New User Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/pages-for-subheaders/advanced-user-guides">Advanced User Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Advanced User Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/pages-for-subheaders/authentication-permissions-and-global-configuration">Authentication, Permissions, and Global Configuration</a><button aria-label="Toggle the collapsible sidebar category &#x27;Authentication, Permissions, and Global Configuration&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/pages-for-subheaders/about-authentication">About Authentication</a><button aria-label="Toggle the collapsible sidebar category &#x27;About Authentication&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/pages-for-subheaders/authentication-config">Authentication Config</a><button aria-label="Toggle the collapsible sidebar category &#x27;Authentication Config&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/manage-users-and-groups">Users and Groups</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/create-local-users">Local Authentication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-google-oauth">Configure Google OAuth</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-active-directory">Configure Active Directory (AD)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-freeipa">Configure FreeIPA</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-azure-ad">Configure Azure AD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-github">Configure GitHub</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-keycloak-oidc">Configure Keycloak (OIDC)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-keycloak-saml">Configure Keycloak (SAML)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-pingidentity">Configure PingIdentity (SAML)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-okta-saml">Configure Okta (SAML)</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/pages-for-subheaders/configure-microsoft-ad-federation-service-saml">Configure Microsoft AD Federation Service (SAML)</a><button aria-label="Toggle the collapsible sidebar category &#x27;Configure Microsoft AD Federation Service (SAML)&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/pages-for-subheaders/configure-shibboleth-saml">Configure Shibboleth (SAML)</a><button aria-label="Toggle the collapsible sidebar category &#x27;Configure Shibboleth (SAML)&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/pages-for-subheaders/manage-role-based-access-control-rbac">Manage Role-Based Access Control (RBAC)</a><button aria-label="Toggle the collapsible sidebar category &#x27;Manage Role-Based Access Control (RBAC)&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/pages-for-subheaders/about-provisioning-drivers">About Provisioning Drivers</a><button aria-label="Toggle the collapsible sidebar category &#x27;About Provisioning Drivers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/pages-for-subheaders/about-rke1-templates">About RKE1 Templates</a><button aria-label="Toggle the collapsible sidebar category &#x27;About RKE1 Templates&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/manage-cluster-templates">Cluster Templates</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/create-pod-security-policies">Pod Security Policies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/global-default-private-registry">Configuring a Global Default Private Registry</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/custom-branding">Custom Branding</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/pages-for-subheaders/manage-clusters">Manage Clusters</a><button aria-label="Toggle the collapsible sidebar category &#x27;Manage Clusters&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/pages-for-subheaders/manage-projects">Manage Projects</a><button aria-label="Toggle the collapsible sidebar category &#x27;Manage Projects&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/pages-for-subheaders/monitoring-alerting-guides">Monitoring/Alerting Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Monitoring/Alerting Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/pages-for-subheaders/monitoring-v2-configuration-guides">Monitoring V2 Configuration Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Monitoring V2 Configuration Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/pages-for-subheaders/istio-setup-guide">Istio Setup Guide</a><button aria-label="Toggle the collapsible sidebar category &#x27;Istio Setup Guide&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/pages-for-subheaders/cis-scan-guides">CIS Scan Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;CIS Scan Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/reference-guides">Reference Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Reference Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/explanations">Explanations</a><button aria-label="Toggle the collapsible sidebar category &#x27;Explanations&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/faq">FAQ</a><button aria-label="Toggle the collapsible sidebar category &#x27;FAQ&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/troubleshooting">Troubleshooting</a><button aria-label="Toggle the collapsible sidebar category &#x27;Troubleshooting&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/contribute-to-rancher">Contributing to Rancher</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/how-to-guides"><span itemprop="name">How-to Guides</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/pages-for-subheaders/advanced-user-guides"><span itemprop="name">Advanced User Guides</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/pages-for-subheaders/authentication-permissions-and-global-configuration"><span itemprop="name">Authentication, Permissions, and Global Configuration</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/pages-for-subheaders/about-authentication"><span itemprop="name">About Authentication</span></a><meta itemprop="position" content="4"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/pages-for-subheaders/authentication-config"><span itemprop="name">Authentication Config</span></a><meta itemprop="position" content="5"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Configure Keycloak (OIDC)</span><meta itemprop="position" content="6"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v2.6</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Configure Keycloak (OIDC)</h1></header><p>If your organization uses <a href="https://www.keycloak.org" target="_blank" rel="noopener noreferrer">Keycloak Identity Provider (IdP)</a> for user authentication, you can configure Rancher to allow your users to log in using their IdP credentials. Rancher supports integration with Keycloak using the OpenID Connect (OIDC) protocol and the SAML protocol. Both implementations are functionally equivalent when used with Rancher. This page describes the process to configure Rancher to work with Keycloak using the OIDC protocol.</p><p>If you prefer to use Keycloak with the SAML protocol instead, refer to <a href="/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-keycloak-saml">this page</a>.</p><p>If you have an existing configuration using the SAML protocol and want to switch to the OIDC protocol, refer to <a href="#migrating-from-saml-to-oidc">this section</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">​</a></h2><ul><li><p>On Rancher, Keycloak (SAML) is disabled.</p></li><li><p>You must have a <a href="https://www.keycloak.org/docs/latest/server_installation/" target="_blank" rel="noopener noreferrer">Keycloak IdP Server</a> configured.</p></li><li><p>In Keycloak, create a <a href="https://www.keycloak.org/docs/latest/server_admin/#oidc-clients" target="_blank" rel="noopener noreferrer">new OIDC client</a>, with the settings below. See the <a href="https://www.keycloak.org/docs/latest/server_admin/#oidc-clients" target="_blank" rel="noopener noreferrer">Keycloak documentation</a> for help.</p><table><thead><tr><th>Setting</th><th>Value</th></tr></thead><tbody><tr><td><code>Client ID</code></td><td>&lt;<!-- -->CLIENT_ID&gt; (e.g. <code>rancher</code>)</td></tr><tr><td><code>Name</code></td><td>&lt;<!-- -->CLIENT_NAME&gt; (e.g. <code>rancher</code>)</td></tr><tr><td><code>Client Protocol</code></td><td><code>openid-connect</code></td></tr><tr><td><code>Access Type</code></td><td><code>confidential</code></td></tr><tr><td><code>Valid Redirect URI</code></td><td><code>https://yourRancherHostURL/verify-auth</code></td></tr></tbody></table></li><li><p>In the new OIDC client, create <a href="https://www.keycloak.org/docs/latest/server_admin/#_protocol-mappers" target="_blank" rel="noopener noreferrer">Mappers</a> to expose the users fields.</p><ul><li><p>Create a new &quot;Groups Mapper&quot; with the settings below.</p><table><thead><tr><th>Setting</th><th>Value</th></tr></thead><tbody><tr><td><code>Name</code></td><td><code>Groups Mapper</code></td></tr><tr><td><code>Mapper Type</code></td><td><code>Group Membership</code></td></tr><tr><td><code>Token Claim Name</code></td><td><code>groups</code></td></tr><tr><td><code>Add to ID token</code></td><td><code>OFF</code></td></tr><tr><td><code>Add to access token</code></td><td><code>OFF</code></td></tr><tr><td><code>Add to user info</code></td><td><code>ON</code></td></tr></tbody></table></li><li><p>Create a new &quot;Client Audience&quot; with the settings below.</p><table><thead><tr><th>Setting</th><th>Value</th></tr></thead><tbody><tr><td><code>Name</code></td><td><code>Client Audience</code></td></tr><tr><td><code>Mapper Type</code></td><td><code>Audience</code></td></tr><tr><td><code>Included Client Audience</code></td><td>&lt;<!-- -->CLIENT_NAME&gt;</td></tr><tr><td><code>Add to access token</code></td><td><code>ON</code></td></tr></tbody></table></li><li><p>Create a new &quot;Groups Path&quot; with the settings below.</p><table><thead><tr><th>Setting</th><th>Value</th></tr></thead><tbody><tr><td><code>Name</code></td><td><code>Group Path</code></td></tr><tr><td><code>Mapper Type</code></td><td><code>Group Membership</code></td></tr><tr><td><code>Token Claim Name</code></td><td><code>full_group_path</code></td></tr><tr><td><code>Full group path</code></td><td><code>ON</code></td></tr><tr><td><code>Add to user info</code></td><td><code>ON</code></td></tr></tbody></table></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-keycloak-in-rancher">Configuring Keycloak in Rancher<a class="hash-link" href="#configuring-keycloak-in-rancher" title="Direct link to heading">​</a></h2><ol><li><p>In the Rancher UI, click <strong>☰ &gt; Users &amp; Authentication</strong>.</p></li><li><p>In the left navigation bar, click <strong>Auth Provider</strong>.</p></li><li><p>Select <strong>Keycloak (OIDC)</strong>.</p></li><li><p>Complete the <strong>Configure a Keycloak OIDC account</strong> form. For help with filling the form, see the <a href="#configuration-reference">configuration reference</a>.</p></li><li><p>After you complete the <strong>Configure a Keycloak OIDC account</strong> form, click <strong>Enable</strong>.</p><p>Rancher redirects you to the IdP login page. Enter credentials that authenticate with Keycloak IdP to validate your Rancher Keycloak configuration.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>You may need to disable your popup blocker to see the IdP login page.</p></div></div></li></ol><p><strong>Result:</strong> Rancher is configured to work with Keycloak using the OIDC protocol. Your users can now sign into Rancher using their Keycloak logins.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-reference">Configuration Reference<a class="hash-link" href="#configuration-reference" title="Direct link to heading">​</a></h2><table><thead><tr><th>Field</th><th>Description</th></tr></thead><tbody><tr><td>Client ID</td><td>The <code>Client ID</code> of your Keycloak client.</td></tr><tr><td>Client Secret</td><td>The generated <code>Secret</code> of your Keycloak client. In the Keycloak console, select <strong>Clients</strong>, select the client you created, select the <strong>Credentials</strong> tab and copy the value of the <code>Secret</code> field.</td></tr><tr><td>Private Key / Certificate</td><td>A key/certificate pair to create a secure shell between Rancher and your IdP. Required if HTTPS/SSL is enabled on your Keycloak server.</td></tr><tr><td>Endpoints</td><td>Choose whether to use the generated values for the <code>Rancher URL</code>, <code>Issue</code>, and <code>Auth Endpoint</code> fields or to provide manual overrides if incorrect.</td></tr><tr><td>Keycloak URL</td><td>The URL for your Keycloak server.</td></tr><tr><td>Keycloak Realm</td><td>The name of the realm in which the Keycloak client was created in.</td></tr><tr><td>Rancher URL</td><td>The URL for your Rancher Server.</td></tr><tr><td>Issuer</td><td>The URL of your IdP.</td></tr><tr><td>Auth Endpoint</td><td>The URL where users are redirected to authenticate.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="migrating-from-saml-to-oidc">Migrating from SAML to OIDC<a class="hash-link" href="#migrating-from-saml-to-oidc" title="Direct link to heading">​</a></h2><p>This section describes the process to transition from using Rancher with Keycloak (SAML) to Keycloak (OIDC).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reconfigure-keycloak">Reconfigure Keycloak<a class="hash-link" href="#reconfigure-keycloak" title="Direct link to heading">​</a></h3><ol><li><p>Change the existing client to use the OIDC protocol. In the Keycloak console, select <strong>Clients</strong>, select the SAML client to migrate, select the <strong>Settings</strong> tab, change <code>Client Protocol</code> from <code>saml</code> to <code>openid-connect</code>, and click <strong>Save</strong></p></li><li><p>Verify the <code>Valid Redirect URIs</code> are still valid.</p></li><li><p>Select the <strong>Mappers</strong> tab and create a new Mapper with the settings below.</p><table><thead><tr><th>Setting</th><th>Value</th></tr></thead><tbody><tr><td><code>Name</code></td><td><code>Groups Mapper</code></td></tr><tr><td><code>Mapper Type</code></td><td><code>Group Membership</code></td></tr><tr><td><code>Token Claim Name</code></td><td><code>groups</code></td></tr><tr><td><code>Add to ID token</code></td><td><code>ON</code></td></tr><tr><td><code>Add to access token</code></td><td><code>ON</code></td></tr><tr><td><code>Add to user info</code></td><td><code>ON</code></td></tr></tbody></table></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reconfigure-rancher">Reconfigure Rancher<a class="hash-link" href="#reconfigure-rancher" title="Direct link to heading">​</a></h3><p>Before configuring Rancher to use Keycloak (OIDC), Keycloak (SAML) must be first disabled. </p><ol><li>In the Rancher UI, click <strong>☰ &gt; Users &amp; Authentication</strong>.</li><li>In the left navigation bar, click <strong>Auth Provider</strong>.</li><li>Select <strong>Keycloak (SAML)</strong>.</li><li>Click <strong>Disable</strong>.</li></ol><p>Configure Rancher to use Keycloak (OIDC) by following the steps in <a href="#configuring-keycloak-in-rancher">this section</a>.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>After configuration is completed, Rancher user permissions will need to be reapplied as they are not automatically migrated.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="annex-troubleshooting">Annex: Troubleshooting<a class="hash-link" href="#annex-troubleshooting" title="Direct link to heading">​</a></h2><p>If you are experiencing issues while testing the connection to the Keycloak server, first double-check the configuration options of your OIDC client. You may also inspect the Rancher logs to help pinpoint what&#x27;s causing issues. Debug logs may contain more detailed information about the error. Please refer to <a href="/faq/technical-items#how-can-i-enable-debug-logging">How can I enable debug logging</a> in this documentation.</p><p>All Keycloak related log entries will be prepended with either <code>[generic oidc]</code> or <code>[keycloak oidc]</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="you-are-not-redirected-to-keycloak">You are not redirected to Keycloak<a class="hash-link" href="#you-are-not-redirected-to-keycloak" title="Direct link to heading">​</a></h3><p>When you fill the <strong>Configure a Keycloak OIDC account</strong> form and click on <strong>Enable</strong>, you are not redirected to your IdP.</p><ul><li>Verify your Keycloak client configuration.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-generated-issuer-and-auth-endpoint-are-incorrect">The generated <code>Issuer</code> and <code>Auth Endpoint</code> are incorrect<a class="hash-link" href="#the-generated-issuer-and-auth-endpoint-are-incorrect" title="Direct link to heading">​</a></h3><ul><li>On the <strong>Configure a Keycloak OIDC account</strong> form, change <strong>Endpoints</strong> to <code>Specify (advanced)</code> and override the <code>Issuer</code> and <code>Auth Endpoint</code> values. To find the values, go to the Keycloak console and select <strong>Realm Settings</strong>, select the <strong>General</strong> tab, and click <strong>OpenID Endpoint Configuration</strong>. The JSON output will display values for <code>issuer</code> and <code>authorization_endpoint</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="keycloak-error-invalid-grant_type">Keycloak Error: &quot;Invalid grant_type&quot;<a class="hash-link" href="#keycloak-error-invalid-grant_type" title="Direct link to heading">​</a></h3><ul><li>In some cases, this error message may be misleading and is actually caused by setting the <code>Valid Redirect URI</code> incorrectly.</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/rancher/rancher-docs/edit/main/docs/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-keycloak-oidc.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_eYIM" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vbeJ"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-09-08T22:35:34.000Z">9/8/2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-github"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Configure GitHub</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-keycloak-saml"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Configure Keycloak (SAML)</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#configuring-keycloak-in-rancher" class="table-of-contents__link toc-highlight">Configuring Keycloak in Rancher</a></li><li><a href="#configuration-reference" class="table-of-contents__link toc-highlight">Configuration Reference</a></li><li><a href="#migrating-from-saml-to-oidc" class="table-of-contents__link toc-highlight">Migrating from SAML to OIDC</a><ul><li><a href="#reconfigure-keycloak" class="table-of-contents__link toc-highlight">Reconfigure Keycloak</a></li><li><a href="#reconfigure-rancher" class="table-of-contents__link toc-highlight">Reconfigure Rancher</a></li></ul></li><li><a href="#annex-troubleshooting" class="table-of-contents__link toc-highlight">Annex: Troubleshooting</a><ul><li><a href="#you-are-not-redirected-to-keycloak" class="table-of-contents__link toc-highlight">You are not redirected to Keycloak</a></li><li><a href="#the-generated-issuer-and-auth-endpoint-are-incorrect" class="table-of-contents__link toc-highlight">The generated <code>Issuer</code> and <code>Auth Endpoint</code> are incorrect</a></li><li><a href="#keycloak-error-invalid-grant_type" class="table-of-contents__link toc-highlight">Keycloak Error: &quot;Invalid grant_type&quot;</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 SUSE Rancher. All Rights Reserved.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.217a7f9f.js"></script>
<script src="/assets/js/main.00d8b9dc.js"></script>
</body>
</html>