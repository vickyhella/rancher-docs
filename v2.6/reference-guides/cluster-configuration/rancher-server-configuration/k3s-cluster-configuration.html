<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-2.6 plugin-docs plugin-id-default docs-doc-id-reference-guides/cluster-configuration/rancher-server-configuration/k3s-cluster-configuration">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">K3s Cluster Configuration Reference | Rancher Manager</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://ranchermanager.docs.rancher.com/v2.6/reference-guides/cluster-configuration/rancher-server-configuration/k3s-cluster-configuration"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="2.6"><meta data-rh="true" name="docusaurus_tag" content="docs-default-2.6"><meta data-rh="true" name="docsearch:version" content="2.6"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-2.6"><meta data-rh="true" property="og:title" content="K3s Cluster Configuration Reference | Rancher Manager"><meta data-rh="true" name="description" content="This section covers the configuration options that are available in Rancher for a new or existing K3s Kubernetes cluster."><meta data-rh="true" property="og:description" content="This section covers the configuration options that are available in Rancher for a new or existing K3s Kubernetes cluster."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="http://ranchermanager.docs.rancher.com/v2.6/reference-guides/cluster-configuration/rancher-server-configuration/k3s-cluster-configuration"><link data-rh="true" rel="alternate" href="http://ranchermanager.docs.rancher.com/v2.6/reference-guides/cluster-configuration/rancher-server-configuration/k3s-cluster-configuration" hreflang="en"><link data-rh="true" rel="alternate" href="http://ranchermanager.docs.rancher.com/zh/v2.6/reference-guides/cluster-configuration/rancher-server-configuration/k3s-cluster-configuration" hreflang="zh"><link data-rh="true" rel="alternate" href="http://ranchermanager.docs.rancher.com/v2.6/reference-guides/cluster-configuration/rancher-server-configuration/k3s-cluster-configuration" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://30NEY6C9UY-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-57KS2MW",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>


<link rel="search" type="application/opensearchdescription+xml" title="Rancher Manager" href="/opensearch.xml">

<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="0f98beb0-fc4c-417d-a42e-564e2cae42d2" async></script>
<script src="/scripts/optanonwrapper.js" async></script><link rel="stylesheet" href="/assets/css/styles.35be4547.css">
<link rel="preload" href="/assets/js/runtime~main.74cb3068.js" as="script">
<link rel="preload" href="/assets/js/main.0657872f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-57KS2MW" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/rancher-logo-horiz-color.svg" alt="logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/rancher-logo-horiz-color.svg" alt="logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><div class="navbar__item dropdown dropdown--hoverable"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/v2.6">v2.6</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/reference-guides/cluster-configuration/rancher-server-configuration/k3s-cluster-configuration">v2.7</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/v2.6/reference-guides/cluster-configuration/rancher-server-configuration/k3s-cluster-configuration">v2.6</a></li><li><a class="dropdown__link" href="/v2.5">v2.5</a></li><li><a class="dropdown__link" href="/v2.0-v2.4">v2.0-v2.4</a></li><li><a class="dropdown__link" href="/versions">All versions</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/v2.6/reference-guides/cluster-configuration/rancher-server-configuration/k3s-cluster-configuration" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh/v2.6/reference-guides/cluster-configuration/rancher-server-configuration/k3s-cluster-configuration" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh">简体中文</a></li></ul></div><a href="https://github.com/rancher/rancher-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__github">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://rancher.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Rancher Home<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v2.6">What is Rancher?</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v2.6/getting-started/overview">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v2.6/pages-for-subheaders/new-user-guides">How-to Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/v2.6/pages-for-subheaders/best-practices">Reference Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.6/pages-for-subheaders/best-practices">Best Practices</a><button aria-label="Toggle the collapsible sidebar category &#x27;Best Practices&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.6/pages-for-subheaders/rancher-manager-architecture">Rancher Manager Architecture</a><button aria-label="Toggle the collapsible sidebar category &#x27;Rancher Manager Architecture&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/v2.6/pages-for-subheaders/cluster-configuration">Cluster Configuration</a><button aria-label="Toggle the collapsible sidebar category &#x27;Cluster Configuration&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/v2.6/pages-for-subheaders/rancher-server-configuration">Rancher Server Configuration</a><button aria-label="Toggle the collapsible sidebar category &#x27;Rancher Server Configuration&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.6/reference-guides/cluster-configuration/rancher-server-configuration/rke1-cluster-configuration">RKE Cluster Configuration Reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.6/reference-guides/cluster-configuration/rancher-server-configuration/rke2-cluster-configuration">RKE2 Cluster Configuration Reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/v2.6/reference-guides/cluster-configuration/rancher-server-configuration/k3s-cluster-configuration">K3s Cluster Configuration Reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.6/reference-guides/cluster-configuration/rancher-server-configuration/eks-cluster-configuration">EKS Cluster Configuration Reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.6/reference-guides/cluster-configuration/rancher-server-configuration/aks-cluster-configuration">AKS Cluster Configuration Reference</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.6/pages-for-subheaders/gke-cluster-configuration">GKE Cluster Configuration</a><button aria-label="Toggle the collapsible sidebar category &#x27;GKE Cluster Configuration&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.6/pages-for-subheaders/use-existing-nodes">Use Existing Nodes</a><button aria-label="Toggle the collapsible sidebar category &#x27;Use Existing Nodes&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.6/reference-guides/cluster-configuration/rancher-server-configuration/sync-clusters">Syncing</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.6/pages-for-subheaders/downstream-cluster-configuration">Downstream Cluster Configuration</a><button aria-label="Toggle the collapsible sidebar category &#x27;Downstream Cluster Configuration&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.6/pages-for-subheaders/single-node-rancher-in-docker">Single-Node Rancher in Docker</a><button aria-label="Toggle the collapsible sidebar category &#x27;Single-Node Rancher in Docker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.6/pages-for-subheaders/backup-restore-configuration">Backup &amp; Restore Configuration</a><button aria-label="Toggle the collapsible sidebar category &#x27;Backup &amp; Restore Configuration&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.6/reference-guides/kubernetes-concepts">Kubernetes Concepts</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.6/pages-for-subheaders/monitoring-v2-configuration">Monitoring V2 Configuration</a><button aria-label="Toggle the collapsible sidebar category &#x27;Monitoring V2 Configuration&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.6/pages-for-subheaders/prometheus-federator">Prometheus Federator</a><button aria-label="Toggle the collapsible sidebar category &#x27;Prometheus Federator&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.6/pages-for-subheaders/user-settings">User Settings</a><button aria-label="Toggle the collapsible sidebar category &#x27;User Settings&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.6/pages-for-subheaders/cli-with-rancher">CLI with Rancher</a><button aria-label="Toggle the collapsible sidebar category &#x27;CLI with Rancher&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.6/pages-for-subheaders/about-the-api">About the API</a><button aria-label="Toggle the collapsible sidebar category &#x27;About the API&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.6/reference-guides/rancher-cluster-tools">Cluster Tools for Logging, Monitoring, and Visibility</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.6/reference-guides/rancher-project-tools">Project Tools for Logging, Monitoring, and Visibility</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.6/reference-guides/system-tools">System Tools</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.6/reference-guides/rke1-template-example-yaml">RKE1 Example YAML</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.6/pages-for-subheaders/pipelines">Pipelines</a><button aria-label="Toggle the collapsible sidebar category &#x27;Pipelines&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.6/pages-for-subheaders/rancher-security">Rancher Security</a><button aria-label="Toggle the collapsible sidebar category &#x27;Rancher Security&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v2.6/pages-for-subheaders/cloud-marketplace">Integrations in Rancher</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v2.6/faq/general-faq">FAQ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v2.6/troubleshooting/general-troubleshooting">Troubleshooting</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v2.6/contribute-to-rancher">Contributing to Rancher</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Reference Guides</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/v2.6/pages-for-subheaders/cluster-configuration"><span itemprop="name">Cluster Configuration</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/v2.6/pages-for-subheaders/rancher-server-configuration"><span itemprop="name">Rancher Server Configuration</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">K3s Cluster Configuration Reference</span><meta itemprop="position" content="4"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v2.6</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>K3s Cluster Configuration Reference</h1></header><p>This section covers the configuration options that are available in Rancher for a new or existing K3s Kubernetes cluster.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2><p>You can configure the Kubernetes options one of two ways:</p><ul><li><a href="#configuration-options-in-the-rancher-ui">Rancher UI</a>: Use the Rancher UI to select options that are commonly customized when setting up a Kubernetes cluster.</li><li><a href="#cluster-config-file">Cluster Config File</a>: Instead of using the Rancher UI to choose Kubernetes options for the cluster, advanced users can create a K3s config file. Using a config file allows you to set any of the <a href="https://rancher.com/docs/k3s/latest/en/installation/install-options/" target="_blank" rel="noopener noreferrer">options</a> available in an K3s installation.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-options-in-the-rancher-ui">Configuration Options in the Rancher UI<a href="#configuration-options-in-the-rancher-ui" class="hash-link" aria-label="Direct link to Configuration Options in the Rancher UI" title="Direct link to Configuration Options in the Rancher UI">​</a></h2><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>Some advanced configuration options are not exposed in the Rancher UI forms, but they can be enabled by editing the K3s cluster configuration file in YAML. For the complete reference of configurable options for K3s clusters in YAML, see the <a href="https://rancher.com/docs/k3s/latest/en/installation/install-options/" target="_blank" rel="noopener noreferrer">K3s documentation.</a></p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="basics">Basics<a href="#basics" class="hash-link" aria-label="Direct link to Basics" title="Direct link to Basics">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes-version">Kubernetes Version<a href="#kubernetes-version" class="hash-link" aria-label="Direct link to Kubernetes Version" title="Direct link to Kubernetes Version">​</a></h4><p>The version of Kubernetes installed on your cluster nodes. Rancher packages its own version of Kubernetes based on <a href="https://github.com/rancher/hyperkube" target="_blank" rel="noopener noreferrer">hyperkube</a>.</p><p>For more detail, see <a href="/v2.6/getting-started/installation-and-upgrade/upgrade-and-roll-back-kubernetes">Upgrading Kubernetes</a>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="encrypt-secrets">Encrypt Secrets<a href="#encrypt-secrets" class="hash-link" aria-label="Direct link to Encrypt Secrets" title="Direct link to Encrypt Secrets">​</a></h4><p>Option to enable or disable secrets encryption. When enabled, secrets will be encrypted using a AES-CBC key. If disabled, any previously secrets will not be readable until encryption is enabled again. Refer to the <a href="https://rancher.com/docs/k3s/latest/en/advanced/#secrets-encryption-config-experimental" target="_blank" rel="noopener noreferrer">K3s documentation</a> for details.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="project-network-isolation">Project Network Isolation<a href="#project-network-isolation" class="hash-link" aria-label="Direct link to Project Network Isolation" title="Direct link to Project Network Isolation">​</a></h4><p>If your network provider allows project network isolation, you can choose whether to enable or disable inter-project communication.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="selinux">SELinux<a href="#selinux" class="hash-link" aria-label="Direct link to SELinux" title="Direct link to SELinux">​</a></h4><p>Option to enable or disable <a href="https://rancher.com/docs/k3s/latest/en/advanced/#selinux-support" target="_blank" rel="noopener noreferrer">SELinux</a> support.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="coredns">CoreDNS<a href="#coredns" class="hash-link" aria-label="Direct link to CoreDNS" title="Direct link to CoreDNS">​</a></h4><p>By default, <a href="https://coredns.io/" target="_blank" rel="noopener noreferrer">CoreDNS</a> is installed as the default DNS provider. If CoreDNS is not installed, an alternate DNS provider must be installed yourself. Refer to the <a href="https://rancher.com/docs/k3s/latest/en/networking/#coredns" target="_blank" rel="noopener noreferrer">K3s documentation</a> for details..</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="klipper-service-lb">Klipper Service LB<a href="#klipper-service-lb" class="hash-link" aria-label="Direct link to Klipper Service LB" title="Direct link to Klipper Service LB">​</a></h4><p>Option to enable or disable the <a href="https://github.com/rancher/klipper-lb" target="_blank" rel="noopener noreferrer">Klipper</a> service load balancer. Refer to the <a href="https://rancher.com/docs/k3s/latest/en/networking/#service-load-balancer" target="_blank" rel="noopener noreferrer">K3s documentation</a> for details.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="traefik-ingress">Traefik Ingress<a href="#traefik-ingress" class="hash-link" aria-label="Direct link to Traefik Ingress" title="Direct link to Traefik Ingress">​</a></h4><p>Option to enable or disable the <a href="https://traefik.io/" target="_blank" rel="noopener noreferrer">Traefik</a> HTTP reverse proxy and load balancer. For more details and configuration options, see the <a href="https://rancher.com/docs/k3s/latest/en/networking/#traefik-ingress-controller" target="_blank" rel="noopener noreferrer">K3s documentation</a>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="local-storage">Local Storage<a href="#local-storage" class="hash-link" aria-label="Direct link to Local Storage" title="Direct link to Local Storage">​</a></h4><p>Option to enable or disable <a href="https://rancher.com/docs/k3s/latest/en/storage/" target="_blank" rel="noopener noreferrer">local storage</a> on the node(s).</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="metrics-server">Metrics Server<a href="#metrics-server" class="hash-link" aria-label="Direct link to Metrics Server" title="Direct link to Metrics Server">​</a></h4><p>Option to enable or disable the <a href="https://github.com/kubernetes-incubator/metrics-server" target="_blank" rel="noopener noreferrer">metrics server</a>. If enabled, ensure port 10250 is opened for inbound TCP traffic.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-on-config">Add-On Config<a href="#add-on-config" class="hash-link" aria-label="Direct link to Add-On Config" title="Direct link to Add-On Config">​</a></h3><p>Additional Kubernetes manifests, managed as a <a href="https://kubernetes.io/docs/concepts/cluster-administration/addons/" target="_blank" rel="noopener noreferrer">Add-on</a>, to apply to the cluster on startup. Refer to the <a href="https://rancher.com/docs/k3s/latest/en/helm/#automatically-deploying-manifests-and-helm-charts" target="_blank" rel="noopener noreferrer">K3s documentation</a> for details.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="agent-environment-vars">Agent Environment Vars<a href="#agent-environment-vars" class="hash-link" aria-label="Direct link to Agent Environment Vars" title="Direct link to Agent Environment Vars">​</a></h3><p>Option to set environment variables for <a href="https://rancher.com/docs/k3s/latest/en/architecture/" target="_blank" rel="noopener noreferrer">K3s agents</a>. The environment variables can be set using key value pairs. Refer to the <a href="https://rancher.com/docs/k3s/latest/en/installation/install-options/agent-config/" target="_blank" rel="noopener noreferrer">K3 documentation</a> for more details.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="etcd">etcd<a href="#etcd" class="hash-link" aria-label="Direct link to etcd" title="Direct link to etcd">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="automatic-snapshots">Automatic Snapshots<a href="#automatic-snapshots" class="hash-link" aria-label="Direct link to Automatic Snapshots" title="Direct link to Automatic Snapshots">​</a></h4><p>Option to enable or disable recurring etcd snapshots. If enabled, users have the option to configure the frequency of snapshots. For details, refer to the <a href="https://rancher.com/docs/k3s/latest/en/backup-restore/#creating-snapshots" target="_blank" rel="noopener noreferrer">K3s documentation</a>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="metrics">Metrics<a href="#metrics" class="hash-link" aria-label="Direct link to Metrics" title="Direct link to Metrics">​</a></h4><p>Option to choose whether to expose etcd metrics to the public or only within the cluster.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="networking">Networking<a href="#networking" class="hash-link" aria-label="Direct link to Networking" title="Direct link to Networking">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="cluster-cidr">Cluster CIDR<a href="#cluster-cidr" class="hash-link" aria-label="Direct link to Cluster CIDR" title="Direct link to Cluster CIDR">​</a></h4><p>IPv4/IPv6 network CIDRs to use for pod IPs (default: 10.42.0.0/16).</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="service-cidr">Service CIDR<a href="#service-cidr" class="hash-link" aria-label="Direct link to Service CIDR" title="Direct link to Service CIDR">​</a></h4><p>IPv4/IPv6 network CIDRs to use for service IPs (default: 10.43.0.0/16).</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="cluster-dns">Cluster DNS<a href="#cluster-dns" class="hash-link" aria-label="Direct link to Cluster DNS" title="Direct link to Cluster DNS">​</a></h4><p>IPv4 Cluster IP for coredns service. Should be in your service-cidr range (default: 10.43.0.10).</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="cluster-domain">Cluster Domain<a href="#cluster-domain" class="hash-link" aria-label="Direct link to Cluster Domain" title="Direct link to Cluster Domain">​</a></h4><p>Select the domain for the cluster. The default is <code>cluster.local</code>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="nodeport-service-port-range">NodePort Service Port Range<a href="#nodeport-service-port-range" class="hash-link" aria-label="Direct link to NodePort Service Port Range" title="Direct link to NodePort Service Port Range">​</a></h4><p>Option to change the range of ports that can be used for <a href="https://kubernetes.io/docs/concepts/services-networking/service/#nodeport" target="_blank" rel="noopener noreferrer">NodePort services</a>. The default is <code>30000-32767</code>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="tls-alternate-names">TLS Alternate Names<a href="#tls-alternate-names" class="hash-link" aria-label="Direct link to TLS Alternate Names" title="Direct link to TLS Alternate Names">​</a></h4><p>Add additional hostnames or IPv4/IPv6 addresses as Subject Alternative Names on the server TLS cert.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="authorized-cluster-endpoint">Authorized Cluster Endpoint<a href="#authorized-cluster-endpoint" class="hash-link" aria-label="Direct link to Authorized Cluster Endpoint" title="Direct link to Authorized Cluster Endpoint">​</a></h4><p>Authorized Cluster Endpoint can be used to directly access the Kubernetes API server, without requiring communication through Rancher.</p><p>For more detail on how an authorized cluster endpoint works and why it is used, refer to the <a href="/v2.6/pages-for-subheaders/rancher-manager-architecture#4-authorized-cluster-endpoint">architecture section.</a></p><p>We recommend using a load balancer with the authorized cluster endpoint. For details, refer to the <a href="/v2.6/reference-guides/rancher-manager-architecture/architecture-recommendations#architecture-for-an-authorized-cluster-endpoint">recommended architecture section.</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="registries">Registries<a href="#registries" class="hash-link" aria-label="Direct link to Registries" title="Direct link to Registries">​</a></h3><p>Select the image repository to pull Rancher images from. For more details and configuration options, see the <a href="https://rancher.com/docs/k3s/latest/en/installation/private-registry/" target="_blank" rel="noopener noreferrer">K3s documentation</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade-strategy">Upgrade Strategy<a href="#upgrade-strategy" class="hash-link" aria-label="Direct link to Upgrade Strategy" title="Direct link to Upgrade Strategy">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="controle-plane-concurrency">Controle Plane Concurrency<a href="#controle-plane-concurrency" class="hash-link" aria-label="Direct link to Controle Plane Concurrency" title="Direct link to Controle Plane Concurrency">​</a></h4><p>Select how many nodes can be upgraded at the same time. Can be a fixed number or percentage.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="worker-concurrency">Worker Concurrency<a href="#worker-concurrency" class="hash-link" aria-label="Direct link to Worker Concurrency" title="Direct link to Worker Concurrency">​</a></h4><p>Select how many nodes can be upgraded at the same time. Can be a fixed number or percentage.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="drain-nodes-control-plane">Drain Nodes (Control Plane)<a href="#drain-nodes-control-plane" class="hash-link" aria-label="Direct link to Drain Nodes (Control Plane)" title="Direct link to Drain Nodes (Control Plane)">​</a></h4><p>Option to remove all pods from the node prior to upgrading.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="drain-nodes-worker-nodes">Drain Nodes (Worker Nodes)<a href="#drain-nodes-worker-nodes" class="hash-link" aria-label="Direct link to Drain Nodes (Worker Nodes)" title="Direct link to Drain Nodes (Worker Nodes)">​</a></h4><p>Option to remove all pods from the node prior to upgrading.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="advanced">Advanced<a href="#advanced" class="hash-link" aria-label="Direct link to Advanced" title="Direct link to Advanced">​</a></h3><p>Option to set kubelet options for different nodes. For available options, refer to the <a href="https://kubernetes.io/docs/reference/command-line-tools-reference/kubelet/" target="_blank" rel="noopener noreferrer">Kubernetes documentation</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cluster-config-file">Cluster Config File<a href="#cluster-config-file" class="hash-link" aria-label="Direct link to Cluster Config File" title="Direct link to Cluster Config File">​</a></h2><p>Instead of using the Rancher UI forms to choose Kubernetes options for the cluster, advanced users can create an K3s config file. Using a config file allows you to set any of the <a href="https://rancher.com/docs/k3s/latest/en/installation/install-options/" target="_blank" rel="noopener noreferrer">options</a> available in an K3s installation.</p><p>To edit an K3s config file directly from the Rancher UI, click <strong>Edit as YAML</strong>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/rancher/rancher-docs/edit/main/versioned_docs/version-2.6/reference-guides/cluster-configuration/rancher-server-configuration/k3s-cluster-configuration.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-11-14T18:56:27.000Z">Nov 14, 2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/v2.6/reference-guides/cluster-configuration/rancher-server-configuration/rke2-cluster-configuration"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">RKE2 Cluster Configuration Reference</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/v2.6/reference-guides/cluster-configuration/rancher-server-configuration/eks-cluster-configuration"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">EKS Cluster Configuration Reference</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#configuration-options-in-the-rancher-ui" class="table-of-contents__link toc-highlight">Configuration Options in the Rancher UI</a><ul><li><a href="#basics" class="table-of-contents__link toc-highlight">Basics</a></li><li><a href="#add-on-config" class="table-of-contents__link toc-highlight">Add-On Config</a></li><li><a href="#agent-environment-vars" class="table-of-contents__link toc-highlight">Agent Environment Vars</a></li><li><a href="#etcd" class="table-of-contents__link toc-highlight">etcd</a></li><li><a href="#networking" class="table-of-contents__link toc-highlight">Networking</a></li><li><a href="#registries" class="table-of-contents__link toc-highlight">Registries</a></li><li><a href="#upgrade-strategy" class="table-of-contents__link toc-highlight">Upgrade Strategy</a></li><li><a href="#advanced" class="table-of-contents__link toc-highlight">Advanced</a></li></ul></li><li><a href="#cluster-config-file" class="table-of-contents__link toc-highlight">Cluster Config File</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 SUSE Rancher. All Rights Reserved.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.74cb3068.js"></script>
<script src="/assets/js/main.0657872f.js"></script>
</body>
</html>