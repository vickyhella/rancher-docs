"use strict";(self.webpackChunkrancher_docs=self.webpackChunkrancher_docs||[]).push([[85657],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),d=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=d(e.components);return a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=d(n),h=r,m=p["".concat(l,".").concat(h)]||p[h]||u[h]||o;return n?a.createElement(m,i(i({ref:t},c),{},{components:n})):a.createElement(m,i({ref:t},c))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var d=2;d<o;d++)i[d]=n[d];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},29367:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>d});var a=n(87462),r=(n(67294),n(3905));const o={title:"Technical"},i=void 0,s={unversionedId:"faq/technical-items",id:"version-2.5/faq/technical-items",title:"Technical",description:"How can I reset the administrator password?",source:"@site/versioned_docs/version-2.5/faq/technical-items.md",sourceDirName:"faq",slug:"/faq/technical-items",permalink:"/v2.5/faq/technical-items",draft:!1,editUrl:"https://github.com/rancher/rancher-docs/edit/main/versioned_docs/version-2.5/faq/technical-items.md",tags:[],version:"2.5",lastUpdatedAt:1663953084,formattedLastUpdatedAt:"Sep 23, 2022",frontMatter:{title:"Technical"},sidebar:"tutorialSidebar",previous:{title:"Installing and Configuring kubectl",permalink:"/v2.5/faq/install-and-configure-kubectl"},next:{title:"Security",permalink:"/v2.5/faq/security"}},l={},d=[{value:"How can I reset the administrator password?",id:"how-can-i-reset-the-administrator-password",level:3},{value:"I deleted/deactivated the last admin, how can I fix it?",id:"i-deleteddeactivated-the-last-admin-how-can-i-fix-it",level:3},{value:"How can I enable debug logging?",id:"how-can-i-enable-debug-logging",level:3},{value:"My ClusterIP does not respond to ping",id:"my-clusterip-does-not-respond-to-ping",level:3},{value:"Where can I manage Node Templates?",id:"where-can-i-manage-node-templates",level:3},{value:"Why is my Layer-4 Load Balancer in <code>Pending</code> state?",id:"why-is-my-layer-4-load-balancer-in-pending-state",level:3},{value:"Where is the state of Rancher stored?",id:"where-is-the-state-of-rancher-stored",level:3},{value:"How are the supported Docker versions determined?",id:"how-are-the-supported-docker-versions-determined",level:3},{value:"How can I access nodes created by Rancher?",id:"how-can-i-access-nodes-created-by-rancher",level:3},{value:"How can I automate task X in Rancher?",id:"how-can-i-automate-task-x-in-rancher",level:3},{value:"The IP address of a node changed, how can I recover?",id:"the-ip-address-of-a-node-changed-how-can-i-recover",level:3},{value:"How can I add additional arguments/binds/environment variables to Kubernetes components in a Rancher Launched Kubernetes cluster?",id:"how-can-i-add-additional-argumentsbindsenvironment-variables-to-kubernetes-components-in-a-rancher-launched-kubernetes-cluster",level:3},{value:"How do I check if my certificate chain is valid?",id:"how-do-i-check-if-my-certificate-chain-is-valid",level:3},{value:"How do I check <code>Common Name</code> and <code>Subject Alternative Names</code> in my server certificate?",id:"how-do-i-check-common-name-and-subject-alternative-names-in-my-server-certificate",level:3},{value:"Why does it take 5+ minutes for a pod to be rescheduled when a node has failed?",id:"why-does-it-take-5-minutes-for-a-pod-to-be-rescheduled-when-a-node-has-failed",level:3},{value:"Can I use keyboard shortcuts in the UI?",id:"can-i-use-keyboard-shortcuts-in-the-ui",level:3},{value:"What does <code>Unknown schema for type:</code> errors followed by something like <code>catalog.cattle.io.operation</code> mean when trying to modify an App?",id:"what-does-unknown-schema-for-type-errors-followed-by-something-like-catalogcattleiooperation-mean-when-trying-to-modify-an-app",level:3}],c={toc:d};function u(e){let{components:t,...o}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h3",{id:"how-can-i-reset-the-administrator-password"},"How can I reset the administrator password?"),(0,r.kt)("p",null,"Docker Install:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ docker exec -ti <container_id> reset-password\nNew password for default administrator (user-xxxxx):\n<new_password>\n")),(0,r.kt)("p",null,"Kubernetes install (Helm):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ KUBECONFIG=./kube_config_cluster.yml\n$ kubectl --kubeconfig $KUBECONFIG -n cattle-system exec $(kubectl --kubeconfig $KUBECONFIG -n cattle-system get pods -l app=rancher | grep '1/1' | head -1 | awk '{ print $1 }') -- reset-password\nNew password for default administrator (user-xxxxx):\n<new_password>\n")),(0,r.kt)("h3",{id:"i-deleteddeactivated-the-last-admin-how-can-i-fix-it"},"I deleted/deactivated the last admin, how can I fix it?"),(0,r.kt)("p",null,"Docker Install:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ docker exec -ti <container_id> ensure-default-admin\nNew default administrator (user-xxxxx)\nNew password for default administrator (user-xxxxx):\n<new_password>\n")),(0,r.kt)("p",null,"Kubernetes install (Helm):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ KUBECONFIG=./kube_config_cluster.yml\n$ kubectl --kubeconfig $KUBECONFIG -n cattle-system exec $(kubectl --kubeconfig $KUBECONFIG -n cattle-system get pods -l app=rancher | grep '1/1' | head -1 | awk '{ print $1 }') -- ensure-default-admin\nNew password for default administrator (user-xxxxx):\n<new_password>\n")),(0,r.kt)("h3",{id:"how-can-i-enable-debug-logging"},"How can I enable debug logging?"),(0,r.kt)("p",null,"See ",(0,r.kt)("a",{parentName:"p",href:"/v2.5/troubleshooting/other-troubleshooting-tips/logging"},"Troubleshooting: Logging")),(0,r.kt)("h3",{id:"my-clusterip-does-not-respond-to-ping"},"My ClusterIP does not respond to ping"),(0,r.kt)("p",null,"ClusterIP is a virtual IP, which will not respond to ping. Best way to test if the ClusterIP is configured correctly, is by using ",(0,r.kt)("inlineCode",{parentName:"p"},"curl")," to access the IP and port to see if it responds."),(0,r.kt)("h3",{id:"where-can-i-manage-node-templates"},"Where can I manage Node Templates?"),(0,r.kt)("p",null,"Node Templates can be accessed by opening your account menu (top right) and selecting ",(0,r.kt)("inlineCode",{parentName:"p"},"Node Templates"),"."),(0,r.kt)("h3",{id:"why-is-my-layer-4-load-balancer-in-pending-state"},"Why is my Layer-4 Load Balancer in ",(0,r.kt)("inlineCode",{parentName:"h3"},"Pending")," state?"),(0,r.kt)("p",null,"The Layer-4 Load Balancer is created as ",(0,r.kt)("inlineCode",{parentName:"p"},"type: LoadBalancer"),". In Kubernetes, this needs a cloud provider or controller that can satisfy these requests, otherwise these will be in ",(0,r.kt)("inlineCode",{parentName:"p"},"Pending")," state forever. More information can be found on ",(0,r.kt)("a",{parentName:"p",href:"/v2.5/pages-for-subheaders/set-up-cloud-providers"},"Cloud Providers")," or ",(0,r.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/tasks/access-application-cluster/create-external-load-balancer/"},"Create External Load Balancer")),(0,r.kt)("h3",{id:"where-is-the-state-of-rancher-stored"},"Where is the state of Rancher stored?"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Docker Install: in the embedded etcd of the ",(0,r.kt)("inlineCode",{parentName:"li"},"rancher/rancher")," container, located at ",(0,r.kt)("inlineCode",{parentName:"li"},"/var/lib/rancher"),"."),(0,r.kt)("li",{parentName:"ul"},"Kubernetes install: in the etcd of the RKE cluster created to run Rancher.")),(0,r.kt)("h3",{id:"how-are-the-supported-docker-versions-determined"},"How are the supported Docker versions determined?"),(0,r.kt)("p",null,"We follow the validated Docker versions for upstream Kubernetes releases. The validated versions can be found under ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG-1.10.md#external-dependencies"},"External Dependencies")," in the Kubernetes release CHANGELOG.md."),(0,r.kt)("h3",{id:"how-can-i-access-nodes-created-by-rancher"},"How can I access nodes created by Rancher?"),(0,r.kt)("p",null,"SSH keys to access the nodes created by Rancher can be downloaded via the ",(0,r.kt)("strong",{parentName:"p"},"Nodes")," view. Choose the node which you want to access and click on the vertical ","\u22ee"," button at the end of the row, and choose ",(0,r.kt)("strong",{parentName:"p"},"Download Keys")," as shown in the picture below."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Download Keys",src:n(45171).Z,width:"442",height:"426"})),(0,r.kt)("p",null,"Unzip the downloaded zip file, and use the file ",(0,r.kt)("inlineCode",{parentName:"p"},"id_rsa")," to connect to you host. Be sure to use the correct username (",(0,r.kt)("inlineCode",{parentName:"p"},"rancher")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"docker")," for RancherOS, ",(0,r.kt)("inlineCode",{parentName:"p"},"ubuntu")," for Ubuntu, ",(0,r.kt)("inlineCode",{parentName:"p"},"ec2-user")," for Amazon Linux)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ ssh -i id_rsa user@ip_of_node\n")),(0,r.kt)("h3",{id:"how-can-i-automate-task-x-in-rancher"},"How can I automate task X in Rancher?"),(0,r.kt)("p",null,"The UI consists of static files, and works based on responses of the API. That means every action/task that you can execute in the UI, can be automated via the API. There are 2 ways to do this:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Visit ",(0,r.kt)("inlineCode",{parentName:"li"},"https://your_rancher_ip/v3")," and browse the API options."),(0,r.kt)("li",{parentName:"ul"},"Capture the API calls when using the UI (Most commonly used for this is ",(0,r.kt)("a",{parentName:"li",href:"https://developers.google.com/web/tools/chrome-devtools/#network"},"Chrome Developer Tools")," but you can use anything you like)")),(0,r.kt)("h3",{id:"the-ip-address-of-a-node-changed-how-can-i-recover"},"The IP address of a node changed, how can I recover?"),(0,r.kt)("p",null,"A node is required to have a static IP configured (or a reserved IP via DHCP). If the IP of a node has changed, you will have to remove it from the cluster and readd it. After it is removed, Rancher will update the cluster to the correct state. If the cluster is no longer in ",(0,r.kt)("inlineCode",{parentName:"p"},"Provisioning")," state, the node is removed from the cluster."),(0,r.kt)("p",null,"When the IP address of the node changed, Rancher lost connection to the node, so it will be unable to clean the node properly. See ",(0,r.kt)("a",{parentName:"p",href:"/v2.5/how-to-guides/advanced-user-guides/manage-clusters/clean-cluster-nodes"},"Cleaning cluster nodes")," to clean the node."),(0,r.kt)("p",null,"When the node is removed from the cluster, and the node is cleaned, you can readd the node to the cluster."),(0,r.kt)("h3",{id:"how-can-i-add-additional-argumentsbindsenvironment-variables-to-kubernetes-components-in-a-rancher-launched-kubernetes-cluster"},"How can I add additional arguments/binds/environment variables to Kubernetes components in a Rancher Launched Kubernetes cluster?"),(0,r.kt)("p",null,"You can add additional arguments/binds/environment variables via the ",(0,r.kt)("a",{parentName:"p",href:"cluster-provisioning/rke-clusters/options/#cluster-config-file"},"Config File")," option in Cluster Options. For more information, see the ",(0,r.kt)("a",{parentName:"p",href:"https://rancher.com/docs/rke/latest/en/config-options/services/services-extras/"},"Extra Args, Extra Binds, and Extra Environment Variables")," in the RKE documentation or browse the ",(0,r.kt)("a",{parentName:"p",href:"https://rancher.com/docs/rke/latest/en/example-yamls/"},"Example Cluster.ymls"),"."),(0,r.kt)("h3",{id:"how-do-i-check-if-my-certificate-chain-is-valid"},"How do I check if my certificate chain is valid?"),(0,r.kt)("p",null,"Use the ",(0,r.kt)("inlineCode",{parentName:"p"},"openssl verify")," command to validate your certificate chain:"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Note:")," Configure ",(0,r.kt)("inlineCode",{parentName:"p"},"SSL_CERT_DIR")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"SSL_CERT_FILE")," to a dummy location to make sure the OS installed certificates are not used when verifying manually.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"SSL_CERT_DIR=/dummy SSL_CERT_FILE=/dummy openssl verify -CAfile ca.pem rancher.yourdomain.com.pem\nrancher.yourdomain.com.pem: OK\n")),(0,r.kt)("p",null,"If you receive the error ",(0,r.kt)("inlineCode",{parentName:"p"},"unable to get local issuer certificate"),", the chain is incomplete. This usually means that there is an intermediate CA certificate that issued your server certificate. If you already have this certificate, you can use it in the verification of the certificate like shown below:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"SSL_CERT_DIR=/dummy SSL_CERT_FILE=/dummy openssl verify -CAfile ca.pem -untrusted intermediate.pem rancher.yourdomain.com.pem\nrancher.yourdomain.com.pem: OK\n")),(0,r.kt)("p",null,"If you have successfully verified your certificate chain, you should include needed intermediate CA certificates in the server certificate to complete the certificate chain for any connection made to Rancher (for example, by the Rancher agent). The order of the certificates in the server certificate file should be first the server certificate itself (contents of ",(0,r.kt)("inlineCode",{parentName:"p"},"rancher.yourdomain.com.pem"),"), followed by intermediate CA certificate(s) (contents of ",(0,r.kt)("inlineCode",{parentName:"p"},"intermediate.pem"),")."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"-----BEGIN CERTIFICATE-----\n%YOUR_CERTIFICATE%\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\n%YOUR_INTERMEDIATE_CERTIFICATE%\n-----END CERTIFICATE-----\n")),(0,r.kt)("p",null,"If you still get errors during verification, you can retrieve the subject and the issuer of the server certificate using the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"openssl x509 -noout -subject -issuer -in rancher.yourdomain.com.pem\nsubject= /C=GB/ST=England/O=Alice Ltd/CN=rancher.yourdomain.com\nissuer= /C=GB/ST=England/O=Alice Ltd/CN=Alice Intermediate CA\n")),(0,r.kt)("h3",{id:"how-do-i-check-common-name-and-subject-alternative-names-in-my-server-certificate"},"How do I check ",(0,r.kt)("inlineCode",{parentName:"h3"},"Common Name")," and ",(0,r.kt)("inlineCode",{parentName:"h3"},"Subject Alternative Names")," in my server certificate?"),(0,r.kt)("p",null,"Although technically an entry in ",(0,r.kt)("inlineCode",{parentName:"p"},"Subject Alternative Names")," is required, having the hostname in both ",(0,r.kt)("inlineCode",{parentName:"p"},"Common Name")," and as entry in ",(0,r.kt)("inlineCode",{parentName:"p"},"Subject Alternative Names")," gives you maximum compatibility with older browser/applications."),(0,r.kt)("p",null,"Check ",(0,r.kt)("inlineCode",{parentName:"p"},"Common Name"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"openssl x509 -noout -subject -in cert.pem\nsubject= /CN=rancher.my.org\n")),(0,r.kt)("p",null,"Check ",(0,r.kt)("inlineCode",{parentName:"p"},"Subject Alternative Names"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"openssl x509 -noout -in cert.pem -text | grep DNS\n                DNS:rancher.my.org\n")),(0,r.kt)("h3",{id:"why-does-it-take-5-minutes-for-a-pod-to-be-rescheduled-when-a-node-has-failed"},"Why does it take 5+ minutes for a pod to be rescheduled when a node has failed?"),(0,r.kt)("p",null,"This is due to a combination of the following default Kubernetes settings:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"kubelet",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"node-status-update-frequency"),": Specifies how often kubelet posts node status to master (default 10s)"))),(0,r.kt)("li",{parentName:"ul"},"kube-controller-manager",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"node-monitor-period"),": The period for syncing NodeStatus in NodeController (default 5s)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"node-monitor-grace-period"),": Amount of time which we allow running Node to be unresponsive before marking it unhealthy (default 40s)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"pod-eviction-timeout"),": The grace period for deleting pods on failed nodes (default 5m0s)")))),(0,r.kt)("p",null,"See ",(0,r.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/reference/command-line-tools-reference/kubelet/"},"Kubernetes: kubelet")," and ",(0,r.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/reference/command-line-tools-reference/kube-controller-manager/"},"Kubernetes: kube-controller-manager")," for more information on these settings."),(0,r.kt)("p",null,"In Kubernetes v1.13, the ",(0,r.kt)("inlineCode",{parentName:"p"},"TaintBasedEvictions")," feature is enabled by default. See ",(0,r.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/#taint-based-evictions"},"Kubernetes: Taint based Evictions")," for more information."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"kube-apiserver (Kubernetes v1.13 and up)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"default-not-ready-toleration-seconds"),": Indicates the tolerationSeconds of the toleration for notReady:NoExecute that is added by default to every pod that does not already have such a toleration."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"default-unreachable-toleration-seconds"),": Indicates the tolerationSeconds of the toleration for unreachable:NoExecute that is added by default to every pod that does not already have such a toleration.")))),(0,r.kt)("h3",{id:"can-i-use-keyboard-shortcuts-in-the-ui"},"Can I use keyboard shortcuts in the UI?"),(0,r.kt)("p",null,"Yes, most parts of the UI can be reached using keyboard shortcuts. For an overview of the available shortcuts, press ",(0,r.kt)("inlineCode",{parentName:"p"},"?")," anywhere in the UI."),(0,r.kt)("h3",{id:"what-does-unknown-schema-for-type-errors-followed-by-something-like-catalogcattleiooperation-mean-when-trying-to-modify-an-app"},"What does ",(0,r.kt)("inlineCode",{parentName:"h3"},"Unknown schema for type:")," errors followed by something like ",(0,r.kt)("inlineCode",{parentName:"h3"},"catalog.cattle.io.operation")," mean when trying to modify an App?"),(0,r.kt)("p",null,"This error occurs when Kubernetes can not find the CRD mentioned.  The vast majority of the time these are a result of missing RBAC permissions.  Try with an admin user and if this works, add permissions for the resource mentioned by the error (ie. ",(0,r.kt)("inlineCode",{parentName:"p"},"Get"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"List"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"Patch")," as needed)."))}u.isMDXComponent=!0},45171:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/downloadsshkeys-617979ebc3df306cf60b60325923b283.png"}}]);