"use strict";(self.webpackChunkrancher_docs=self.webpackChunkrancher_docs||[]).push([[30285],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>h});var a=r(67294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,a,o=function(e,t){if(null==e)return{};var r,a,o={},n=Object.keys(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var u=a.createContext({}),l=function(e){var t=a.useContext(u),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},c=function(e){var t=l(e.components);return a.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var r=e.components,o=e.mdxType,n=e.originalType,u=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),d=l(r),h=o,m=d["".concat(u,".").concat(h)]||d[h]||p[h]||n;return r?a.createElement(m,s(s({ref:t},c),{},{components:r})):a.createElement(m,s({ref:t},c))}));function h(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var n=r.length,s=new Array(n);s[0]=d;var i={};for(var u in t)hasOwnProperty.call(t,u)&&(i[u]=t[u]);i.originalType=e,i.mdxType="string"==typeof e?e:o,s[1]=i;for(var l=2;l<n;l++)s[l]=r[l];return a.createElement.apply(null,s)}return a.createElement.apply(null,r)}d.displayName="MDXCreateElement"},69138:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>u,contentTitle:()=>s,default:()=>p,frontMatter:()=>n,metadata:()=>i,toc:()=>l});var a=r(87462),o=(r(67294),r(3905));const n={title:"The Horizontal Pod Autoscaler",description:"Learn about the horizontal pod autoscaler (HPA). How to manage HPAs and how to test them with a service deployment"},s=void 0,i={unversionedId:"pages-for-subheaders/horizontal-pod-autoscaler",id:"version-2.0-2.4/pages-for-subheaders/horizontal-pod-autoscaler",title:"The Horizontal Pod Autoscaler",description:"Learn about the horizontal pod autoscaler (HPA). How to manage HPAs and how to test them with a service deployment",source:"@site/versioned_docs/version-2.0-2.4/pages-for-subheaders/horizontal-pod-autoscaler.md",sourceDirName:"pages-for-subheaders",slug:"/pages-for-subheaders/horizontal-pod-autoscaler",permalink:"/v2.0-v2.4/pages-for-subheaders/horizontal-pod-autoscaler",draft:!1,editUrl:"https://github.com/rancher/rancher-docs/edit/main/versioned_docs/version-2.0-2.4/pages-for-subheaders/horizontal-pod-autoscaler.md",tags:[],version:"2.0-2.4",lastUpdatedAt:1663953084,formattedLastUpdatedAt:"Sep 23, 2022",frontMatter:{title:"The Horizontal Pod Autoscaler",description:"Learn about the horizontal pod autoscaler (HPA). How to manage HPAs and how to test them with a service deployment"},sidebar:"tutorialSidebar",previous:{title:"Adding a Sidecar",permalink:"/v2.0-v2.4/how-to-guides/new-user-guides/kubernetes-resources-setup/workloads-and-pods/add-a-sidecar"},next:{title:"Manual HPA Installation for Clusters Created Before Rancher v2.0.7",permalink:"/v2.0-v2.4/how-to-guides/new-user-guides/kubernetes-resources-setup/horizontal-pod-autoscaler/hpa-for-rancher-before-2.0.7"}},u={},l=[{value:"Managing HPAs",id:"managing-hpas",level:2},{value:"Testing HPAs with a Service Deployment",id:"testing-hpas-with-a-service-deployment",level:2}],c={toc:l};function p(e){let{components:t,...r}=e;return(0,o.kt)("wrapper",(0,a.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"The ",(0,o.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/"},"Horizontal Pod Autoscaler")," (HPA) is a Kubernetes feature that allows you to configure your cluster to automatically scale the services it's running up or down."),(0,o.kt)("p",null,"Rancher provides some additional features to help manage HPAs, depending on the version of Rancher."),(0,o.kt)("p",null,"You can create, manage, and delete HPAs using the Rancher UI in Rancher v2.3.0-alpha4 and higher versions. It only supports HPA in the ",(0,o.kt)("inlineCode",{parentName:"p"},"autoscaling/v2beta2")," API."),(0,o.kt)("h2",{id:"managing-hpas"},"Managing HPAs"),(0,o.kt)("p",null,"The way that you manage HPAs is different based on your version of the Kubernetes API:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"For Kubernetes API version autoscaling/V2beta1:")," This version of the Kubernetes API lets you autoscale your pods based on the CPU and memory utilization of your application."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"For Kubernetes API Version autoscaling/V2beta2:")," This version of the Kubernetes API lets you autoscale your pods based on CPU and memory utilization, in addition to custom metrics.")),(0,o.kt)("p",null,"HPAs are also managed differently based on your version of Rancher:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"For Rancher v2.3.0+"),": You can create, manage, and delete HPAs using the Rancher UI. From the Rancher UI you can configure the HPA to scale based on CPU and memory utilization. For more information, refer to ",(0,o.kt)("a",{parentName:"li",href:"/v2.0-v2.4/how-to-guides/new-user-guides/kubernetes-resources-setup/horizontal-pod-autoscaler/manage-hpas-with-ui"},"Managing HPAs with the Rancher UI"),". To scale the HPA based on custom metrics, you still need to use ",(0,o.kt)("inlineCode",{parentName:"li"},"kubectl"),". For more information, refer to ",(0,o.kt)("a",{parentName:"li",href:"/v2.0-v2.4/how-to-guides/new-user-guides/kubernetes-resources-setup/horizontal-pod-autoscaler/manage-hpas-with-kubectl#configuring-hpa-to-scale-using-custom-metrics-with-prometheus"},"Configuring HPA to Scale Using Custom Metrics with Prometheus"),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"For Rancher Before v2.3.0:")," To manage and configure HPAs, you need to use ",(0,o.kt)("inlineCode",{parentName:"li"},"kubectl"),". For instructions on how to create, manage, and scale HPAs, refer to ",(0,o.kt)("a",{parentName:"li",href:"/v2.0-v2.4/how-to-guides/new-user-guides/kubernetes-resources-setup/horizontal-pod-autoscaler/manage-hpas-with-kubectl"},"Managing HPAs with kubectl"),".")),(0,o.kt)("p",null,"You might have additional HPA installation steps if you are using an older version of Rancher:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"For Rancher v2.0.7+:")," Clusters created in Rancher v2.0.7 and higher automatically have all the requirements needed (metrics-server and Kubernetes cluster configuration) to use HPA."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"For Rancher Before v2.0.7:")," Clusters created in Rancher before v2.0.7 don't automatically have the requirements needed to use HPA. For instructions on installing HPA for these clusters, refer to ",(0,o.kt)("a",{parentName:"li",href:"/v2.0-v2.4/how-to-guides/new-user-guides/kubernetes-resources-setup/horizontal-pod-autoscaler/hpa-for-rancher-before-2.0.7"},"Manual HPA Installation for Clusters Created Before Rancher v2.0.7"),".")),(0,o.kt)("h2",{id:"testing-hpas-with-a-service-deployment"},"Testing HPAs with a Service Deployment"),(0,o.kt)("p",null,"In Rancher v2.3.x+, you can see your HPA's current number of replicas by going to your project and clicking ",(0,o.kt)("strong",{parentName:"p"},"Resources > HPA.")," For more information, refer to ",(0,o.kt)("a",{parentName:"p",href:"/v2.0-v2.4/how-to-guides/new-user-guides/kubernetes-resources-setup/horizontal-pod-autoscaler/manage-hpas-with-ui"},"Get HPA Metrics and Status"),"."),(0,o.kt)("p",null,"You can also use ",(0,o.kt)("inlineCode",{parentName:"p"},"kubectl")," to get the status of HPAs that you test with your load testing tool. For more information, refer to ","[Testing HPAs with kubectl]","\n(k8s-in-rancher/horitzontal-pod-autoscaler/testing-hpa/)."))}p.isMDXComponent=!0}}]);